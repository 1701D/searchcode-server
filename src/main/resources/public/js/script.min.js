(function(){function d(b){return function(p,a,c,e){a=L(a,e,4);var d=!A(p)&&f.keys(p),l=(d||p).length,k=0<b?0:l-1;3>arguments.length&&(c=p[d?d[k]:k],k+=b);for(var h=a,g=c;0<=k&&l>k;k+=b)var n=d?d[k]:k,g=h(g,p[n],n,p);return g}}function c(b){return function(p,a,c){a=B(a,c);c=H(p);for(var f=0<b?0:c-1;0<=f&&c>f;f+=b)if(a(p[f],f,p))return f;return-1}}function a(b,p,a){return function(c,e,d){var l=0,k=H(c);if("number"==typeof d)0<b?l=0<=d?d:Math.max(d+k,l):k=0<=d?Math.min(d+1,k):d+k+1;else if(a&&d&&k)return d=
a(c,e),c[d]===e?d:-1;if(e!==e)return d=p(x.call(c,l,k),f.isNaN),0<=d?d+l:-1;for(d=0<b?l:k-1;0<=d&&k>d;d+=b)if(c[d]===e)return d;return-1}}function e(b,p){var a=fa.length,c=b.constructor,c=f.isFunction(c)&&c.prototype||t,e="constructor";for(f.has(b,e)&&!f.contains(p,e)&&p.push(e);a--;)e=fa[a],e in b&&b[e]!==c[e]&&!f.contains(p,e)&&p.push(e)}var h=this,n=h._,g=Array.prototype,t=Object.prototype,J=g.push,x=g.slice,v=t.toString,ba=t.hasOwnProperty,aa=Array.isArray,ga=Object.keys,I=Function.prototype.bind,
Q=Object.create,M=function(){},f=function(b){return b instanceof f?b:this instanceof f?void(this._wrapped=b):new f(b)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports._=f):h._=f;f.VERSION="1.8.3";var L=function(b,p,a){if(void 0===p)return b;switch(null==a?3:a){case 1:return function(a){return b.call(p,a)};case 2:return function(a,c){return b.call(p,a,c)};case 3:return function(a,c,ea){return b.call(p,a,c,ea)};case 4:return function(a,c,ea,
e){return b.call(p,a,c,ea,e)}}return function(){return b.apply(p,arguments)}},B=function(b,p,a){return null==b?f.identity:f.isFunction(b)?L(b,p,a):f.isObject(b)?f.matcher(b):f.property(b)};f.iteratee=function(b,p){return B(b,p,1/0)};var R=function(b,p){return function(a){var c=arguments.length;if(2>c||null==a)return a;for(var e=1;c>e;e++)for(var f=arguments[e],d=b(f),l=d.length,k=0;l>k;k++){var h=d[k];p&&void 0!==a[h]||(a[h]=f[h])}return a}},N=function(b){if(!f.isObject(b))return{};if(Q)return Q(b);
M.prototype=b;b=new M;return M.prototype=null,b},G=function(b){return function(p){return null==p?void 0:p[b]}},ha=Math.pow(2,53)-1,H=G("length"),A=function(b){b=H(b);return"number"==typeof b&&0<=b&&ha>=b};f.each=f.forEach=function(b,p,a){p=L(p,a);var c;if(A(b))for(a=0,c=b.length;c>a;a++)p(b[a],a,b);else{var e=f.keys(b);a=0;for(c=e.length;c>a;a++)p(b[e[a]],e[a],b)}return b};f.map=f.collect=function(b,p,a){p=B(p,a);a=!A(b)&&f.keys(b);for(var c=(a||b).length,e=Array(c),d=0;c>d;d++){var l=a?a[d]:d;e[d]=
p(b[l],l,b)}return e};f.reduce=f.foldl=f.inject=d(1);f.reduceRight=f.foldr=d(-1);f.find=f.detect=function(b,p,a){var c;return c=A(b)?f.findIndex(b,p,a):f.findKey(b,p,a),void 0!==c&&-1!==c?b[c]:void 0};f.filter=f.select=function(b,a,c){var e=[];return a=B(a,c),f.each(b,function(b,y,c){a(b,y,c)&&e.push(b)}),e};f.reject=function(b,a,c){return f.filter(b,f.negate(B(a)),c)};f.every=f.all=function(b,a,c){a=B(a,c);c=!A(b)&&f.keys(b);for(var e=(c||b).length,d=0;e>d;d++){var l=c?c[d]:d;if(!a(b[l],l,b))return!1}return!0};
f.some=f.any=function(b,a,c){a=B(a,c);c=!A(b)&&f.keys(b);for(var e=(c||b).length,d=0;e>d;d++){var l=c?c[d]:d;if(a(b[l],l,b))return!0}return!1};f.contains=f.includes=f.include=function(b,a,c,e){return A(b)||(b=f.values(b)),("number"!=typeof c||e)&&(c=0),0<=f.indexOf(b,a,c)};f.invoke=function(b,a){var c=x.call(arguments,2),e=f.isFunction(a);return f.map(b,function(b){var y=e?a:b[a];return null==y?y:y.apply(b,c)})};f.pluck=function(b,a){return f.map(b,f.property(a))};f.where=function(b,a){return f.filter(b,
f.matcher(a))};f.findWhere=function(b,a){return f.find(b,f.matcher(a))};f.max=function(b,a,c){var e,d=-1/0,l=-1/0;if(null==a&&null!=b){b=A(b)?b:f.values(b);for(var k=0,h=b.length;h>k;k++)c=b[k],c>d&&(d=c)}else a=B(a,c),f.each(b,function(b,y,c){e=a(b,y,c);(e>l||e===-1/0&&d===-1/0)&&(d=b,l=e)});return d};f.min=function(b,a,c){var e,d=1/0,l=1/0;if(null==a&&null!=b){b=A(b)?b:f.values(b);for(var k=0,h=b.length;h>k;k++)c=b[k],d>c&&(d=c)}else a=B(a,c),f.each(b,function(b,y,c){e=a(b,y,c);(l>e||1/0===e&&1/
0===d)&&(d=b,l=e)});return d};f.shuffle=function(b){for(var a=A(b)?b:f.values(b),c=a.length,e=Array(c),d=0;c>d;d++)b=f.random(0,d),b!==d&&(e[d]=e[b]),e[b]=a[d];return e};f.sample=function(b,a,c){return null==a||c?(A(b)||(b=f.values(b)),b[f.random(b.length-1)]):f.shuffle(b).slice(0,Math.max(0,a))};f.sortBy=function(b,a,c){return a=B(a,c),f.pluck(f.map(b,function(b,y,c){return{value:b,index:y,criteria:a(b,y,c)}}).sort(function(b,a){var y=b.criteria,c=a.criteria;if(y!==c){if(y>c||void 0===y)return 1;
if(c>y||void 0===c)return-1}return b.index-a.index}),"value")};var S=function(b){return function(a,c,e){var d={};return c=B(c,e),f.each(a,function(e,f){var l=c(e,f,a);b(d,e,l)}),d}};f.groupBy=S(function(b,a,c){f.has(b,c)?b[c].push(a):b[c]=[a]});f.indexBy=S(function(b,a,c){b[c]=a});f.countBy=S(function(b,a,c){f.has(b,c)?b[c]++:b[c]=1});f.toArray=function(b){return b?f.isArray(b)?x.call(b):A(b)?f.map(b,f.identity):f.values(b):[]};f.size=function(b){return null==b?0:A(b)?b.length:f.keys(b).length};f.partition=
function(b,a,c){a=B(a,c);var e=[],d=[];return f.each(b,function(b,c,y){(a(b,c,y)?e:d).push(b)}),[e,d]};f.first=f.head=f.take=function(b,a,c){return null==b?void 0:null==a||c?b[0]:f.initial(b,b.length-a)};f.initial=function(b,a,c){return x.call(b,0,Math.max(0,b.length-(null==a||c?1:a)))};f.last=function(b,a,c){return null==b?void 0:null==a||c?b[b.length-1]:f.rest(b,Math.max(0,b.length-a))};f.rest=f.tail=f.drop=function(b,a,c){return x.call(b,null==a||c?1:a)};f.compact=function(b){return f.filter(b,
f.identity)};var F=function(b,a,c,e){var d=[],l=0;e=e||0;for(var k=H(b);k>e;e++){var h=b[e];if(A(h)&&(f.isArray(h)||f.isArguments(h))){a||(h=F(h,a,c));var g=0,n=h.length;for(d.length+=n;n>g;)d[l++]=h[g++]}else c||(d[l++]=h)}return d};f.flatten=function(b,a){return F(b,a,!1)};f.without=function(b){return f.difference(b,x.call(arguments,1))};f.uniq=f.unique=function(b,a,c,e){f.isBoolean(a)||(e=c,c=a,a=!1);null!=c&&(c=B(c,e));e=[];for(var d=[],l=0,k=H(b);k>l;l++){var h=b[l],g=c?c(h,l,b):h;a?(l&&d===
g||e.push(h),d=g):c?f.contains(d,g)||(d.push(g),e.push(h)):f.contains(e,h)||e.push(h)}return e};f.union=function(){return f.uniq(F(arguments,!0,!0))};f.intersection=function(b){for(var a=[],c=arguments.length,e=0,d=H(b);d>e;e++){var l=b[e];if(!f.contains(a,l)){for(var k=1;c>k&&f.contains(arguments[k],l);k++);k===c&&a.push(l)}}return a};f.difference=function(b){var a=F(arguments,!0,!0,1);return f.filter(b,function(b){return!f.contains(a,b)})};f.zip=function(){return f.unzip(arguments)};f.unzip=function(b){for(var a=
b&&f.max(b,H).length||0,c=Array(a),e=0;a>e;e++)c[e]=f.pluck(b,e);return c};f.object=function(b,a){for(var c={},e=0,d=H(b);d>e;e++)a?c[b[e]]=a[e]:c[b[e][0]]=b[e][1];return c};f.findIndex=c(1);f.findLastIndex=c(-1);f.sortedIndex=function(b,a,c,e){c=B(c,e,1);a=c(a);e=0;for(var d=H(b);d>e;){var f=Math.floor((e+d)/2);c(b[f])<a?e=f+1:d=f}return e};f.indexOf=a(1,f.findIndex,f.sortedIndex);f.lastIndexOf=a(-1,f.findLastIndex);f.range=function(b,a,c){null==a&&(a=b||0,b=0);c=c||1;a=Math.max(Math.ceil((a-b)/
c),0);for(var e=Array(a),d=0;a>d;d++,b+=c)e[d]=b;return e};var ia=function(b,a,c,e,d){if(!(e instanceof a))return b.apply(c,d);a=N(b.prototype);b=b.apply(a,d);return f.isObject(b)?b:a};f.bind=function(b,a){if(I&&b.bind===I)return I.apply(b,x.call(arguments,1));if(!f.isFunction(b))throw new TypeError("Bind must be called on a function");var c=x.call(arguments,2),e=function(){return ia(b,e,a,this,c.concat(x.call(arguments)))};return e};f.partial=function(b){var a=x.call(arguments,1),c=function(){for(var e=
0,d=a.length,l=Array(d),k=0;d>k;k++)l[k]=a[k]===f?arguments[e++]:a[k];for(;e<arguments.length;)l.push(arguments[e++]);return ia(b,c,this,this,l)};return c};f.bindAll=function(b){var a,c,e=arguments.length;if(1>=e)throw Error("bindAll must be passed function names");for(a=1;e>a;a++)c=arguments[a],b[c]=f.bind(b[c],b);return b};f.memoize=function(b,a){var c=function(e){var d=c.cache,l=""+(a?a.apply(this,arguments):e);return f.has(d,l)||(d[l]=b.apply(this,arguments)),d[l]};return c.cache={},c};f.delay=
function(b,a){var c=x.call(arguments,2);return setTimeout(function(){return b.apply(null,c)},a)};f.defer=f.partial(f.delay,f,1);f.throttle=function(b,a,c){var e,d,l,k=null,h=0;c||(c={});var g=function(){h=!1===c.leading?0:f.now();k=null;l=b.apply(e,d);k||(e=d=null)};return function(){var n=f.now();h||!1!==c.leading||(h=n);var v=a-(n-h);return e=this,d=arguments,0>=v||v>a?(k&&(clearTimeout(k),k=null),h=n,l=b.apply(e,d),k||(e=d=null)):k||!1===c.trailing||(k=setTimeout(g,v)),l}};f.debounce=function(b,
a,c){var e,d,l,k,h,g=function(){var n=f.now()-k;a>n&&0<=n?e=setTimeout(g,a-n):(e=null,c||(h=b.apply(l,d),e||(l=d=null)))};return function(){l=this;d=arguments;k=f.now();var n=c&&!e;return e||(e=setTimeout(g,a)),n&&(h=b.apply(l,d),l=d=null),h}};f.wrap=function(b,a){return f.partial(a,b)};f.negate=function(b){return function(){return!b.apply(this,arguments)}};f.compose=function(){var b=arguments,a=b.length-1;return function(){for(var c=a,e=b[a].apply(this,arguments);c--;)e=b[c].call(this,e);return e}};
f.after=function(b,a){return function(){return 1>--b?a.apply(this,arguments):void 0}};f.before=function(b,a){var c;return function(){return 0<--b&&(c=a.apply(this,arguments)),1>=b&&(a=null),c}};f.once=f.partial(f.before,2);var ca=!{toString:null}.propertyIsEnumerable("toString"),fa="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");f.keys=function(b){if(!f.isObject(b))return[];if(ga)return ga(b);var a=[],c;for(c in b)f.has(b,c)&&a.push(c);return ca&&e(b,
a),a};f.allKeys=function(b){if(!f.isObject(b))return[];var a=[],c;for(c in b)a.push(c);return ca&&e(b,a),a};f.values=function(b){for(var a=f.keys(b),c=a.length,e=Array(c),d=0;c>d;d++)e[d]=b[a[d]];return e};f.mapObject=function(b,a,c){a=B(a,c);for(var e=f.keys(b),d=e.length,l={},k=0;d>k;k++)c=e[k],l[c]=a(b[c],c,b);return l};f.pairs=function(b){for(var a=f.keys(b),c=a.length,e=Array(c),d=0;c>d;d++)e[d]=[a[d],b[a[d]]];return e};f.invert=function(b){for(var a={},c=f.keys(b),e=0,d=c.length;d>e;e++)a[b[c[e]]]=
c[e];return a};f.functions=f.methods=function(b){var a=[],c;for(c in b)f.isFunction(b[c])&&a.push(c);return a.sort()};f.extend=R(f.allKeys);f.extendOwn=f.assign=R(f.keys);f.findKey=function(b,a,c){a=B(a,c);var e;c=f.keys(b);for(var d=0,l=c.length;l>d;d++)if(e=c[d],a(b[e],e,b))return e};f.pick=function(b,a,c){var e,d,l={},k=b;if(null==k)return l;f.isFunction(a)?(d=f.allKeys(k),e=L(a,c)):(d=F(arguments,!1,!1,1),e=function(b,a,c){return a in c},k=Object(k));for(var h=0,g=d.length;g>h;h++){var n=d[h],
v=k[n];e(v,n,k)&&(l[n]=v)}return l};f.omit=function(b,a,c){if(f.isFunction(a))a=f.negate(a);else{var e=f.map(F(arguments,!1,!1,1),String);a=function(b,a){return!f.contains(e,a)}}return f.pick(b,a,c)};f.defaults=R(f.allKeys,!0);f.create=function(b,a){var c=N(b);return a&&f.extendOwn(c,a),c};f.clone=function(b){return f.isObject(b)?f.isArray(b)?b.slice():f.extend({},b):b};f.tap=function(b,a){return a(b),b};f.isMatch=function(b,a){var c=f.keys(a),e=c.length;if(null==b)return!e;for(var d=Object(b),l=
0;e>l;l++){var k=c[l];if(a[k]!==d[k]||!(k in d))return!1}return!0};var T=function(b,a,c,e){if(b===a)return 0!==b||1/b===1/a;if(null==b||null==a)return b===a;b instanceof f&&(b=b._wrapped);a instanceof f&&(a=a._wrapped);var d=v.call(b);if(d!==v.call(a))return!1;switch(d){case "[object RegExp]":case "[object String]":return""+b==""+a;case "[object Number]":return+b!==+b?+a!==+a:0===+b?1/+b===1/a:+b===+a;case "[object Date]":case "[object Boolean]":return+b===+a}d="[object Array]"===d;if(!d){if("object"!=
typeof b||"object"!=typeof a)return!1;var l=b.constructor,k=a.constructor;if(l!==k&&!(f.isFunction(l)&&l instanceof l&&f.isFunction(k)&&k instanceof k)&&"constructor"in b&&"constructor"in a)return!1}c=c||[];e=e||[];for(l=c.length;l--;)if(c[l]===b)return e[l]===a;if(c.push(b),e.push(a),d){if(l=b.length,l!==a.length)return!1;for(;l--;)if(!T(b[l],a[l],c,e))return!1}else{var h,d=f.keys(b);if(l=d.length,f.keys(a).length!==l)return!1;for(;l--;)if(h=d[l],!f.has(a,h)||!T(b[h],a[h],c,e))return!1}return c.pop(),
e.pop(),!0};f.isEqual=function(b,a){return T(b,a)};f.isEmpty=function(b){return null==b?!0:A(b)&&(f.isArray(b)||f.isString(b)||f.isArguments(b))?0===b.length:0===f.keys(b).length};f.isElement=function(b){return!(!b||1!==b.nodeType)};f.isArray=aa||function(b){return"[object Array]"===v.call(b)};f.isObject=function(b){var a=typeof b;return"function"===a||"object"===a&&!!b};f.each("Arguments Function String Number Date RegExp Error".split(" "),function(b){f["is"+b]=function(a){return v.call(a)==="[object "+
b+"]"}});f.isArguments(arguments)||(f.isArguments=function(b){return f.has(b,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(f.isFunction=function(b){return"function"==typeof b||!1});f.isFinite=function(b){return isFinite(b)&&!isNaN(parseFloat(b))};f.isNaN=function(b){return f.isNumber(b)&&b!==+b};f.isBoolean=function(b){return!0===b||!1===b||"[object Boolean]"===v.call(b)};f.isNull=function(b){return null===b};f.isUndefined=function(b){return void 0===b};f.has=function(b,a){return null!=
b&&ba.call(b,a)};f.noConflict=function(){return h._=n,this};f.identity=function(b){return b};f.constant=function(b){return function(){return b}};f.noop=function(){};f.property=G;f.propertyOf=function(b){return null==b?function(){}:function(a){return b[a]}};f.matcher=f.matches=function(b){return b=f.extendOwn({},b),function(a){return f.isMatch(a,b)}};f.times=function(b,a,c){var e=Array(Math.max(0,b));a=L(a,c,1);for(c=0;b>c;c++)e[c]=a(c);return e};f.random=function(b,a){return null==a&&(a=b,b=0),b+
Math.floor(Math.random()*(a-b+1))};f.now=Date.now||function(){return(new Date).getTime()};aa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};R=f.invert(aa);G=function(b){var a=function(a){return b[a]},c="(?:"+f.keys(b).join("|")+")",e=RegExp(c),d=RegExp(c,"g");return function(b){return b=null==b?"":""+b,e.test(b)?b.replace(d,a):b}};f.escape=G(aa);f.unescape=G(R);f.result=function(b,a,c){a=null==b?void 0:b[a];return void 0===a&&(a=c),f.isFunction(a)?a.call(b):a};var O=0;
f.uniqueId=function(b){var a=++O+"";return b?b+a:a};f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,ja={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},b=/\\|'|\r|\n|\u2028|\u2029/g,l=function(b){return"\\"+ja[b]};f.template=function(a,c,e){!c&&e&&(c=e);c=f.defaults({},c,f.templateSettings);e=RegExp([(c.escape||P).source,(c.interpolate||P).source,(c.evaluate||P).source].join("|")+"|$","g");var d=0,k="__p+='";
a.replace(e,function(c,e,f,h,g){return k+=a.slice(d,g).replace(b,l),d=g+c.length,e?k+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":f?k+="'+\n((__t=("+f+"))==null?'':__t)+\n'":h&&(k+="';\n"+h+"\n__p+='"),c});k+="';\n";c.variable||(k="with(obj||{}){\n"+k+"}\n");k="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+k+"return __p;\n";try{var h=new Function(c.variable||"obj","_",k)}catch(g){throw g.source=k,g;}e=function(b){return h.call(this,b,f)};return e.source=
"function("+(c.variable||"obj")+"){\n"+k+"}",e};f.chain=function(b){b=f(b);return b._chain=!0,b};var k=function(b,a){return b._chain?f(a).chain():a};f.mixin=function(b){f.each(f.functions(b),function(a){var c=f[a]=b[a];f.prototype[a]=function(){var b=[this._wrapped];return J.apply(b,arguments),k(this,c.apply(f,b))}})};f.mixin(f);f.each("pop push reverse shift sort splice unshift".split(" "),function(b){var a=g[b];f.prototype[b]=function(){var c=this._wrapped;return a.apply(c,arguments),"shift"!==
b&&"splice"!==b||0!==c.length||delete c[0],k(this,c)}});f.each(["concat","join","slice"],function(b){var a=g[b];f.prototype[b]=function(){return k(this,a.apply(this._wrapped,arguments))}});f.prototype.value=function(){return this._wrapped};f.prototype.valueOf=f.prototype.toJSON=f.prototype.value;f.prototype.toString=function(){return""+this._wrapped};"function"==typeof define&&define.amd&&define("underscore",[],function(){return f})}).call(this);(function(){function d(c,a,e){this.maxSize_=c||-1;this.debug_=a||!1;this.storage_=e||new d.BasicCacheStorage;this.fillFactor_=.75;this.stats_={};this.stats_.hits=0;this.stats_.misses=0;this.log_("Initialized cache with size "+c)}d.Priority={LOW:1,NORMAL:2,HIGH:4};d.BasicCacheStorage=function(){this.items_={};this.count_=0};d.BasicCacheStorage.prototype.get=function(c){return this.items_[c]};d.BasicCacheStorage.prototype.set=function(c,a){"undefined"===typeof this.get(c)&&this.count_++;this.items_[c]=
a};d.BasicCacheStorage.prototype.size=function(c,a){return this.count_};d.BasicCacheStorage.prototype.remove=function(c){var a=this.get(c);"undefined"!==typeof a&&this.count_--;delete this.items_[c];return a};d.BasicCacheStorage.prototype.keys=function(){var c=[],a;for(a in this.items_)c.push(a);return c};d.LocalStorageCacheStorage=function(c){this.prefix_="cache-storage."+(c||"default")+".";c=this.prefix_.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");this.regexp_=new RegExp("^"+c)};d.LocalStorageCacheStorage.prototype.get=
function(c){return(c=window.localStorage[this.prefix_+c])?JSON.parse(c):null};d.LocalStorageCacheStorage.prototype.set=function(c,a){window.localStorage[this.prefix_+c]=JSON.stringify(a)};d.LocalStorageCacheStorage.prototype.size=function(c,a){return this.keys().length};d.LocalStorageCacheStorage.prototype.remove=function(c){var a=this.get(c);delete window.localStorage[this.prefix_+c];return a};d.LocalStorageCacheStorage.prototype.keys=function(){var c=[],a;for(a in window.localStorage)a.match(this.regexp_)&&
c.push(a.replace(this.prefix_,""));return c};d.prototype.getItem=function(c){var a=this.storage_.get(c);null!=a&&(this.isExpired_(a)?(this.removeItem(c),a=null):a.lastAccessed=(new Date).getTime());(a=a?a.value:null)?(this.stats_.hits++,this.log_("Cache HIT for key "+c)):(this.stats_.misses++,this.log_("Cache MISS for key "+c));return a};d._CacheItem=function(c,a,e){if(!c)throw Error("key cannot be null or empty");this.key=c;this.value=a;e=e||{};e.expirationAbsolute&&(e.expirationAbsolute=e.expirationAbsolute.getTime());
e.priority||(e.priority=d.Priority.NORMAL);this.options=e;this.lastAccessed=(new Date).getTime()};d.prototype.setItem=function(c,a,e){null!=this.storage_.get(c)&&this.removeItem(c);this.addItem_(new d._CacheItem(c,a,e));this.log_("Setting key "+c);if(0<this.maxSize_&&this.size()>this.maxSize_){var h=this;setTimeout(function(){h.purge_.call(h)},0)}};d.prototype.clear=function(){for(var c=this.storage_.keys(),a=0;a<c.length;a++)this.removeItem(c[a]);this.log_("Cache cleared")};d.prototype.getStats=
function(){return this.stats_};d.prototype.toHtmlString=function(){for(var c=this.size()+" item(s) in cache<br /><ul>",a=this.storage_.keys(),e=0;e<a.length;e++)var d=this.storage_.get(a[e]),c=c+"<li>"+d.key.toString()+" = "+d.value.toString()+"</li>";return c+"</ul>"};d.prototype.resize=function(c){this.log_("Resizing Cache from "+this.maxSize_+" to "+c);var a=this.maxSize_;this.maxSize_=c;0<c&&(0>a||c<a)&&this.size()>c&&this.purge_();this.log_("Resizing done")};d.prototype.purge_=function(){var c=
[],a=Math.round(this.maxSize_*this.fillFactor_);0>this.maxSize_&&(a=this.size()*this.fillFactor_);for(var e=this.storage_.keys(),d=0;d<e.length;d++){var n=e[d],g=this.storage_.get(n);this.isExpired_(g)?this.removeItem(n):c.push(g)}if(c.length>a)for(c=c.sort(function(a,c){return a.options.priority!=c.options.priority?c.options.priority-a.options.priority:c.lastAccessed-a.lastAccessed});c.length>a;)e=c.pop(),this.removeItem(e.key);this.log_("Purged cached")};d.prototype.addItem_=function(c,a){try{this.storage_.set(c.key,
c)}catch(e){if(a)throw this.log_("Failed setting again, giving up: "+e.toString()),e;this.log_("Error adding item, purging and trying again: "+e.toString());this.purge_();this.addItem_(c,!0)}};d.prototype.removeItem=function(c){var a=this.storage_.remove(c);this.log_("removed key "+c);a&&a.options&&a.options.callback&&setTimeout(function(){a.options.callback.call(null,a.key,a.value)},0);return a?a.value:null};d.prototype.removeWhere=function(c){for(var a=this.storage_.keys(),e=0;e<a.length;e++){var d=
a[e],n=this.storage_.get(d);!0===c(d,n.value)&&this.removeItem(d)}};d.prototype.size=function(){return this.storage_.size()};d.prototype.isExpired_=function(c){var a=(new Date).getTime(),e=!1;c.options.expirationAbsolute&&c.options.expirationAbsolute<a&&(e=!0);!e&&c.options.expirationSliding&&c.lastAccessed+1E3*c.options.expirationSliding<a&&(e=!0);return e};d.prototype.log_=function(c){this.debug_&&console.log(c)};"undefined"!==typeof module&&module.exports?module.exports=d:"function"==typeof define&&
define.amd?define(function(){return d}):this.Cache=d})();(function(){var d=this,c=d.Chart,a=function(b){this.canvas=b.canvas;this.ctx=b;var a=function(b,a){return b["offset"+a]?b["offset"+a]:document.defaultView.getComputedStyle(b).getPropertyValue(a)},c=this.width=a(b.canvas,"Width"),a=this.height=a(b.canvas,"Height");b.canvas.width=c;b.canvas.height=a;c=this.width=b.canvas.width;a=this.height=b.canvas.height;return this.aspectRatio=this.width/this.height,e.retinaScale(this),this};a.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",
showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",
tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",
onAnimationProgress:function(){},onAnimationComplete:function(){}}};a.types={};var e=a.helpers={},h=e.each=function(b,a,c){var e=Array.prototype.slice.call(arguments,3);if(b)if(b.length===+b.length){var d;for(d=0;d<b.length;d++)a.apply(c,[b[d],d].concat(e))}else for(d in b)a.apply(c,[b[d],d].concat(e))},n=e.clone=function(b){var a={};return h(b,function(c,e){b.hasOwnProperty(e)&&(a[e]=c)}),a},g=e.extend=function(b){return h(Array.prototype.slice.call(arguments,1),function(a){h(a,function(c,e){a.hasOwnProperty(e)&&
(b[e]=c)})}),b},t=e.merge=function(){var b=Array.prototype.slice.call(arguments,0);return b.unshift({}),g.apply(null,b)},J=e.indexOf=function(b,a){if(Array.prototype.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(b[c]===a)return c;return-1},x=(e.where=function(b,a){var c=[];return e.each(b,function(b){a(b)&&c.push(b)}),c},e.findNextWhere=function(b,a,c){c||(c=-1);for(c+=1;c<b.length;c++){var e=b[c];if(a(e))return e}},e.findPreviousWhere=function(b,a,c){c||(c=b.length);for(--c;0<=c;c--){var e=
b[c];if(a(e))return e}},e.inherits=function(b){var a=this,c=b&&b.hasOwnProperty("constructor")?b.constructor:function(){return a.apply(this,arguments)},e=function(){this.constructor=c};return e.prototype=a.prototype,c.prototype=new e,c.extend=x,b&&g(c.prototype,b),c.__super__=a.prototype,c}),v=e.noop=function(){},ba=e.uid=function(){var b=0;return function(){return"chart-"+b++}}(),aa=e.warn=function(b){window.console&&"function"==typeof window.console.warn&&console.warn(b)},ga=e.amd="function"==typeof define&&
define.amd,I=e.isNumber=function(b){return!isNaN(parseFloat(b))&&isFinite(b)},Q=e.max=function(b){return Math.max.apply(Math,b)},M=e.min=function(b){return Math.min.apply(Math,b)},f=(e.cap=function(b,a,c){if(I(a)){if(b>a)return a}else if(I(c)&&c>b)return c;return b},e.getDecimalPlaces=function(b){return 0!==b%1&&I(b)?b.toString().split(".")[1].length:0}),L=e.radians=function(b){return Math.PI/180*b},B=(e.getAngleFromPoint=function(b,a){var c=a.x-b.x,e=a.y-b.y,d=Math.sqrt(c*c+e*e),f=2*Math.PI+Math.atan2(e,
c);return 0>c&&0>e&&(f+=2*Math.PI),{angle:f,distance:d}},e.aliasPixel=function(b){return 0===b%2?0:.5}),R=(e.splineCurve=function(b,a,c,e){var d=Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2)),f=Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2)),h=e*d/(d+f);e=e*f/(d+f);return{inner:{x:a.x-h*(c.x-b.x),y:a.y-h*(c.y-b.y)},outer:{x:a.x+e*(c.x-b.x),y:a.y+e*(c.y-b.y)}}},e.calculateOrderOfMagnitude=function(b){return Math.floor(Math.log(b)/Math.LN10)}),N=(e.calculateScaleRange=function(b,a,c,e,d){a=Math.floor(a/
(1.5*c));c=2>=a;var f=Q(b),h=M(b);f===h&&(f+=.5,.5<=h&&!e?h-=.5:f+=.5);b=R(Math.abs(f-h));e=e?0:Math.floor(h/(1*Math.pow(10,b)))*Math.pow(10,b);for(var f=Math.ceil(f/(1*Math.pow(10,b)))*Math.pow(10,b)-e,h=Math.pow(10,b),g=Math.round(f/h);(g>a||a>2*g)&&!c;)if(g>a)h*=2,g=Math.round(f/h),0!==g%1&&(c=!0);else{if(d&&0<=b&&0!==h/2%1)break;h/=2;g=Math.round(f/h)}return c&&(g=2,h=f/g),{steps:g,stepValue:h,min:e,max:e+g*h}},e.template=function(b,a){if(b instanceof Function)return b(a);var c={},c=/\W/.test(b)?
new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+b.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):c[b]=c[b];return a?c(a):c}),G=(e.generateLabels=function(b,a,c,e){var d=Array(a);return labelTemplateString&&h(d,function(a,f){d[f]=N(b,{value:c+e*(f+1)})}),d},e.easingEffects={linear:function(b){return b},
easeInQuad:function(b){return b*b},easeOutQuad:function(b){return-1*b*(b-2)},easeInOutQuad:function(b){return 1>(b/=.5)?.5*b*b:-.5*(--b*(b-2)-1)},easeInCubic:function(b){return b*b*b},easeOutCubic:function(b){return 1*((b=b/1-1)*b*b+1)},easeInOutCubic:function(b){return 1>(b/=.5)?.5*b*b*b:.5*((b-=2)*b*b+2)},easeInQuart:function(b){return b*b*b*b},easeOutQuart:function(b){return-1*((b=b/1-1)*b*b*b-1)},easeInOutQuart:function(b){return 1>(b/=.5)?.5*b*b*b*b:-.5*((b-=2)*b*b*b-2)},easeInQuint:function(b){return 1*
(b/=1)*b*b*b*b},easeOutQuint:function(b){return 1*((b=b/1-1)*b*b*b*b+1)},easeInOutQuint:function(b){return 1>(b/=.5)?.5*b*b*b*b*b:.5*((b-=2)*b*b*b*b+2)},easeInSine:function(b){return-1*Math.cos(b/1*(Math.PI/2))+1},easeOutSine:function(b){return 1*Math.sin(b/1*(Math.PI/2))},easeInOutSine:function(b){return-.5*(Math.cos(Math.PI*b/1)-1)},easeInExpo:function(b){return 0===b?1:1*Math.pow(2,10*(b/1-1))},easeOutExpo:function(b){return 1===b?1:1*(-Math.pow(2,-10*b/1)+1)},easeInOutExpo:function(b){return 0===
b?0:1===b?1:1>(b/=.5)?.5*Math.pow(2,10*(b-1)):.5*(-Math.pow(2,-10*--b)+2)},easeInCirc:function(b){return 1<=b?b:-1*(Math.sqrt(1-(b/=1)*b)-1)},easeOutCirc:function(b){return 1*Math.sqrt(1-(b=b/1-1)*b)},easeInOutCirc:function(b){return 1>(b/=.5)?-.5*(Math.sqrt(1-b*b)-1):.5*(Math.sqrt(1-(b-=2)*b)+1)},easeInElastic:function(b){var a=1.70158,c=0,e=1;return 0===b?0:1==(b/=1)?1:(c||(c=.3),e<Math.abs(1)?(e=1,a=c/4):a=c/(2*Math.PI)*Math.asin(1/e),-(e*Math.pow(2,10*--b)*Math.sin(2*(1*b-a)*Math.PI/c)))},easeOutElastic:function(b){var a=
1.70158,c=0,e=1;return 0===b?0:1==(b/=1)?1:(c||(c=.3),e<Math.abs(1)?(e=1,a=c/4):a=c/(2*Math.PI)*Math.asin(1/e),e*Math.pow(2,-10*b)*Math.sin(2*(1*b-a)*Math.PI/c)+1)},easeInOutElastic:function(b){var a=1.70158,c=0,e=1;return 0===b?0:2==(b/=.5)?1:(c||(c=.3*1.5),e<Math.abs(1)?(e=1,a=c/4):a=c/(2*Math.PI)*Math.asin(1/e),1>b?-.5*e*Math.pow(2,10*--b)*Math.sin(2*(1*b-a)*Math.PI/c):e*Math.pow(2,-10*--b)*Math.sin(2*(1*b-a)*Math.PI/c)*.5+1)},easeInBack:function(b){return 1*(b/=1)*b*(2.70158*b-1.70158)},easeOutBack:function(b){return 1*
((b=b/1-1)*b*(2.70158*b+1.70158)+1)},easeInOutBack:function(b){var a=1.70158;return 1>(b/=.5)?.5*b*b*(((a*=1.525)+1)*b-a):.5*((b-=2)*b*(((a*=1.525)+1)*b+a)+2)},easeInBounce:function(b){return 1-G.easeOutBounce(1-b)},easeOutBounce:function(b){return(b/=1)<1/2.75?7.5625*b*b:2/2.75>b?1*(7.5625*(b-=1.5/2.75)*b+.75):2.5/2.75>b?1*(7.5625*(b-=2.25/2.75)*b+.9375):1*(7.5625*(b-=2.625/2.75)*b+.984375)},easeInOutBounce:function(b){return.5>b?.5*G.easeInBounce(2*b):.5*G.easeOutBounce(2*b-1)+.5}}),ha=e.requestAnimFrame=
function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){return window.setTimeout(b,1E3/60)}}(),H=e.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(b){return window.clearTimeout(b,1E3/60)}}(),A=(e.animationLoop=function(b,
a,c,e,d,f){var h=0,g=G[c]||G.linear,n=function(){h++;var c=h/a,k=g(c);b.call(f,k,c,h);e.call(f,k,c);a>h?f.animationFrame=ha(n):d.apply(f)};ha(n)},e.getRelativePosition=function(b){var a,c,e=b.originalEvent||b;b=(b.currentTarget||b.srcElement).getBoundingClientRect();return e.touches?(a=e.touches[0].clientX-b.left,c=e.touches[0].clientY-b.top):(a=e.clientX-b.left,c=e.clientY-b.top),{x:a,y:c}},e.addEvent=function(b,a,c){b.addEventListener?b.addEventListener(a,c):b.attachEvent?b.attachEvent("on"+a,c):
b["on"+a]=c}),S=e.removeEvent=function(b,a,c){b.removeEventListener?b.removeEventListener(a,c,!1):b.detachEvent?b.detachEvent("on"+a,c):b["on"+a]=v},F=(e.bindEvents=function(b,a,c){b.events||(b.events={});h(a,function(a){b.events[a]=function(){c.apply(b,arguments)};A(b.chart.canvas,a,b.events[a])})},e.unbindEvents=function(b,a){h(a,function(a,c){S(b.chart.canvas,c,a)})}),ia=e.getMaximumWidth=function(b){return b.parentNode.clientWidth},ca=e.getMaximumHeight=function(b){return b.parentNode.clientHeight},
fa=(e.getMaximumSize=e.getMaximumWidth,e.retinaScale=function(b){var a=b.ctx,c=b.canvas.width;b=b.canvas.height;window.devicePixelRatio&&(a.canvas.style.width=c+"px",a.canvas.style.height=b+"px",a.canvas.height=b*window.devicePixelRatio,a.canvas.width=c*window.devicePixelRatio,a.scale(window.devicePixelRatio,window.devicePixelRatio))}),T=e.clear=function(b){b.ctx.clearRect(0,0,b.width,b.height)},O=e.fontString=function(b,a,c){return a+" "+b+"px "+c},P=e.longestText=function(b,a,c){b.font=a;var e=
0;return h(c,function(a){a=b.measureText(a).width;e=a>e?a:e}),e},ja=e.drawRoundedRectangle=function(b,a,c,e,d,f){b.beginPath();b.moveTo(a+f,c);b.lineTo(a+e-f,c);b.quadraticCurveTo(a+e,c,a+e,c+f);b.lineTo(a+e,c+d-f);b.quadraticCurveTo(a+e,c+d,a+e-f,c+d);b.lineTo(a+f,c+d);b.quadraticCurveTo(a,c+d,a,c+d-f);b.lineTo(a,c+f);b.quadraticCurveTo(a,c,a+f,c);b.closePath()};a.instances={};a.Type=function(b,c,e){this.options=c;this.chart=e;this.id=ba();a.instances[this.id]=this;c.responsive&&this.resize();this.initialize.call(this,
b)};g(a.Type.prototype,{initialize:function(){return this},clear:function(){return T(this.chart),this},stop:function(){return H(this.animationFrame),this},resize:function(b){this.stop();var a=this.chart.canvas,c=ia(this.chart.canvas),e=this.options.maintainAspectRatio?c/this.chart.aspectRatio:ca(this.chart.canvas);return a.width=this.chart.width=c,a.height=this.chart.height=e,fa(this.chart),"function"==typeof b&&b.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:v,render:function(b){return b&&
this.reflow(),this.options.animation&&!b?e.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return N(this.options.legendTemplate,this)},destroy:function(){this.clear();F(this,this.events);var b=this.chart.canvas;b.width=this.chart.width;b.height=this.chart.height;b.style.removeProperty?(b.style.removeProperty("width"),
b.style.removeProperty("height")):(b.style.removeAttribute("width"),b.style.removeAttribute("height"));delete a.instances[this.id]},showTooltip:function(b,c){"undefined"==typeof this.activeElements&&(this.activeElements=[]);if(function(b){var a=!1;return b.length!==this.activeElements.length?a=!0:(h(b,function(b,c){b!==this.activeElements[c]&&(a=!0)},this),a)}.call(this,b)||c){if(this.activeElements=b,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),0<b.length)if(this.datasets&&
1<this.datasets.length){for(var d,f,g=this.datasets.length-1;0<=g&&(d=this.datasets[g].points||this.datasets[g].bars||this.datasets[g].segments,f=J(d,b[0]),-1===f);g--);var n=[],v=[];d=function(){var b,a,c,d,h,l=[],g=[],k=[];return e.each(this.datasets,function(a){b=a.points||a.bars||a.segments;b[f]&&b[f].hasValue()&&l.push(b[f])}),e.each(l,function(b){g.push(b.x);k.push(b.y);n.push(e.template(this.options.multiTooltipTemplate,b));v.push({fill:b._saved.fillColor||b.fillColor,stroke:b._saved.strokeColor||
b.strokeColor})},this),h=M(k),c=Q(k),d=M(g),a=Q(g),{x:d>this.chart.width/2?d:a,y:(h+c)/2}}.call(this,f);(new a.MultiTooltip({x:d.x,y:d.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,
titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:n,legendColors:v,legendColorBackground:this.options.multiTooltipKeyBackground,title:b[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips})).draw()}else h(b,function(b){var c=b.tooltipPosition();(new a.Tooltip({x:Math.round(c.x),y:Math.round(c.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,
fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:N(this.options.tooltipTemplate,b),chart:this.chart,custom:this.options.customTooltips})).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}});
a.Type.extend=function(b){var c=this,e=function(){return c.apply(this,arguments)};if(e.prototype=n(c.prototype),g(e.prototype,b),e.extend=a.Type.extend,b.name||c.prototype.name){var d=b.name||c.prototype.name,f=a.defaults[c.prototype.name]?n(a.defaults[c.prototype.name]):{};a.defaults[d]=g(f,b.defaults);a.types[d]=e;a.prototype[d]=function(b,c){var f=t(a.defaults.global,a.defaults[d],c||{});return new e(b,f,this)}}else aa("Name not provided for this chart, so it hasn't been registered");return c};
a.Element=function(b){g(this,b);this.initialize.apply(this,arguments);this.save()};g(a.Element.prototype,{initialize:function(){},restore:function(b){return b?h(b,function(b){this[b]=this._saved[b]},this):g(this,this._saved),this},save:function(){return this._saved=n(this),delete this._saved._saved,this},update:function(b){return h(b,function(b,a){this._saved[a]=this[a];this[a]=b},this),this},transition:function(b,a){return h(b,function(b,c){this[c]=(b-this._saved[c])*a+this._saved[c]},this),this},
tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return I(this.value)}});a.Element.extend=x;a.Point=a.Element.extend({display:!0,inRange:function(b,a){return Math.pow(b-this.x,2)+Math.pow(a-this.y,2)<Math.pow(this.hitDetectionRadius+this.radius,2)},draw:function(){if(this.display){var b=this.ctx;b.beginPath();b.arc(this.x,this.y,this.radius,0,2*Math.PI);b.closePath();b.strokeStyle=this.strokeColor;b.lineWidth=this.strokeWidth;b.fillStyle=this.fillColor;b.fill();b.stroke()}}});
a.Arc=a.Element.extend({inRange:function(b,a){var c=e.getAngleFromPoint(this,{x:b,y:a}),d=c.distance>=this.innerRadius&&c.distance<=this.outerRadius;return c.angle>=this.startAngle&&c.angle<=this.endAngle&&d},tooltipPosition:function(){var b=this.startAngle+(this.endAngle-this.startAngle)/2,a=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(b)*a,y:this.y+Math.sin(b)*a}},draw:function(b){b=this.ctx;b.beginPath();b.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle);
b.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0);b.closePath();b.strokeStyle=this.strokeColor;b.lineWidth=this.strokeWidth;b.fillStyle=this.fillColor;b.fill();b.lineJoin="bevel";this.showStroke&&b.stroke()}});a.Rectangle=a.Element.extend({draw:function(){var b=this.ctx,a=this.width/2,c=this.x-a,a=this.x+a,e=this.base-(this.base-this.y),d=this.strokeWidth/2;this.showStroke&&(c+=d,a-=d,e+=d);b.beginPath();b.fillStyle=this.fillColor;b.strokeStyle=this.strokeColor;b.lineWidth=this.strokeWidth;
b.moveTo(c,this.base);b.lineTo(c,e);b.lineTo(a,e);b.lineTo(a,this.base);b.fill();this.showStroke&&b.stroke()},height:function(){return this.base-this.y},inRange:function(b,a){return b>=this.x-this.width/2&&b<=this.x+this.width/2&&a>=this.y&&a<=this.base}});a.Tooltip=a.Element.extend({draw:function(){var b=this.chart.ctx;b.font=O(this.fontSize,this.fontStyle,this.fontFamily);this.xAlign="center";this.yAlign="above";var a=this.caretPadding=2,c=b.measureText(this.text).width+2*this.xPadding,e=this.fontSize+
2*this.yPadding,d=e+this.caretHeight+a;this.x+c/2>this.chart.width?this.xAlign="left":0>this.x-c/2&&(this.xAlign="right");0>this.y-d&&(this.yAlign="below");var f=this.x-c/2,d=this.y-d;if(b.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case "above":b.beginPath();b.moveTo(this.x,this.y-a);b.lineTo(this.x+this.caretHeight,this.y-(a+this.caretHeight));b.lineTo(this.x-this.caretHeight,this.y-(a+this.caretHeight));b.closePath();b.fill();break;case "below":d=this.y+a+this.caretHeight,
b.beginPath(),b.moveTo(this.x,this.y+a),b.lineTo(this.x+this.caretHeight,this.y+a+this.caretHeight),b.lineTo(this.x-this.caretHeight,this.y+a+this.caretHeight),b.closePath(),b.fill()}switch(this.xAlign){case "left":f=this.x-c+(this.cornerRadius+this.caretHeight);break;case "right":f=this.x-(this.cornerRadius+this.caretHeight)}ja(b,f,d,c,e,this.cornerRadius);b.fill();b.fillStyle=this.textColor;b.textAlign="center";b.textBaseline="middle";b.fillText(this.text,f+c/2,d+e/2)}}});a.MultiTooltip=a.Element.extend({initialize:function(){this.font=
O(this.fontSize,this.fontStyle,this.fontFamily);this.titleFont=O(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);this.height=this.labels.length*this.fontSize+this.fontSize/2*(this.labels.length-1)+2*this.yPadding+1.5*this.titleFontSize;this.ctx.font=this.titleFont;var b=this.ctx.measureText(this.title).width,a=P(this.ctx,this.font,this.labels)+this.fontSize+3;this.width=Q([a,b])+2*this.xPadding;b=this.height/2;0>this.y-b?this.y=b:this.y+b>this.chart.height&&(this.y=this.chart.height-
b);this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(b){var a=this.y-this.height/2+this.yPadding;return 0===b?a+this.titleFontSize/2:a+(1.5*this.fontSize*(b-1)+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{ja(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var b=this.ctx;b.fillStyle=this.fillColor;b.fill();b.closePath();b.textAlign="left";b.textBaseline="middle";b.fillStyle=
this.titleTextColor;b.font=this.titleFont;b.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0));b.font=this.font;e.each(this.labels,function(a,c){b.fillStyle=this.textColor;b.fillText(a,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(c+1));b.fillStyle=this.legendColorBackground;b.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/2,this.fontSize,this.fontSize);b.fillStyle=this.legendColors[c].fill;b.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/
2,this.fontSize,this.fontSize)},this)}}});a.Scale=a.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var b=f(this.stepValue),a=0;a<=this.steps;a++)this.yLabels.push(N(this.templateString,{value:(this.min+a*this.stepValue).toFixed(b)}));this.yLabelWidth=this.display&&this.showLabels?P(this.ctx,this.font,this.yLabels):0},addXLabel:function(b){this.xLabels.push(b);this.valuesCount++;this.fit()},removeXLabel:function(){this.xLabels.shift();this.valuesCount--;
this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0;this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height;this.startPoint+=this.padding;this.endPoint-=this.padding;var b,a=this.endPoint-this.startPoint;this.calculateYRange(a);this.buildYLabels();for(this.calculateXLabelRotation();a>this.endPoint-this.startPoint;)a=this.endPoint-this.startPoint,b=this.yLabelWidth,this.calculateYRange(a),this.buildYLabels(),b<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=
this.font;var b,a=this.ctx.measureText(this.xLabels[0]).width;if(this.xScalePaddingRight=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width/2+3,this.xScalePaddingLeft=a/2>this.yLabelWidth+10?a/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var c,e=P(this.ctx,this.font,this.xLabels);this.xLabelWidth=e;for(var d=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>d&&0===this.xLabelRotation||this.xLabelWidth>d&&90>=this.xLabelRotation&&0<this.xLabelRotation;)c=
Math.cos(L(this.xLabelRotation)),b=c*a,b+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=b+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=c*e;0<this.xLabelRotation&&(this.endPoint-=Math.sin(L(this.xLabelRotation))*e+3)}else this.xLabelWidth=0,this.xScalePaddingLeft=this.xScalePaddingRight=this.padding},calculateYRange:v,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(b){var a=this.drawingArea()/(this.min-
this.max);return this.endPoint-a*(b-this.min)},calculateX:function(b){var a=(0<this.xLabelRotation,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight))/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1);b=a*b+this.xScalePaddingLeft;return this.offsetGridLines&&(b+=a/2),Math.round(b)},update:function(b){e.extend(this,b);this.fit()},draw:function(){var b=this.ctx,a=(this.endPoint-this.startPoint)/this.steps,c=Math.round(this.xScalePaddingLeft);this.display&&(b.fillStyle=this.textColor,
b.font=this.font,h(this.yLabels,function(d,f){var h=this.endPoint-a*f,g=Math.round(h),n=this.showHorizontalLines;b.textAlign="right";b.textBaseline="middle";this.showLabels&&b.fillText(d,c-10,h);0!==f||n||(n=!0);n&&b.beginPath();0<f?(b.lineWidth=this.gridLineWidth,b.strokeStyle=this.gridLineColor):(b.lineWidth=this.lineWidth,b.strokeStyle=this.lineColor);g+=e.aliasPixel(b.lineWidth);n&&(b.moveTo(c,g),b.lineTo(this.width,g),b.stroke(),b.closePath());b.lineWidth=this.lineWidth;b.strokeStyle=this.lineColor;
b.beginPath();b.moveTo(c-5,g);b.lineTo(c,g);b.stroke();b.closePath()},this),h(this.xLabels,function(a,c){var e=this.calculateX(c)+B(this.lineWidth),d=this.calculateX(c-(this.offsetGridLines?.5:0))+B(this.lineWidth),f=0<this.xLabelRotation,h=this.showVerticalLines;0!==c||h||(h=!0);h&&b.beginPath();0<c?(b.lineWidth=this.gridLineWidth,b.strokeStyle=this.gridLineColor):(b.lineWidth=this.lineWidth,b.strokeStyle=this.lineColor);h&&(b.moveTo(d,this.endPoint),b.lineTo(d,this.startPoint-3),b.stroke(),b.closePath());
b.lineWidth=this.lineWidth;b.strokeStyle=this.lineColor;b.beginPath();b.moveTo(d,this.endPoint);b.lineTo(d,this.endPoint+5);b.stroke();b.closePath();b.save();b.translate(e,f?this.endPoint+12:this.endPoint+8);b.rotate(-1*L(this.xLabelRotation));b.font=this.font;b.textAlign=f?"right":"center";b.textBaseline=f?"middle":"top";b.fillText(a,0,0);b.restore()},this))}});a.RadialScale=a.Element.extend({initialize:function(){this.size=M([this.height,this.width]);this.drawingArea=this.display?this.size/2-(this.fontSize/
2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(b){return this.drawingArea/(this.max-this.min)*(b-this.min)},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize();this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var b=f(this.stepValue),a=0;a<=this.steps;a++)this.yLabels.push(N(this.templateString,{value:(this.min+a*this.stepValue).toFixed(b)}))},getCircumference:function(){return 2*
Math.PI/this.valuesCount},setScaleSize:function(){var b,a,c,e,d,f,h,g=M([this.height/2-this.pointLabelFontSize-5,this.width/2]);h=this.width;var n=0;this.ctx.font=O(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);for(a=0;a<this.valuesCount;a++)b=this.getPointPosition(a,g),c=this.ctx.measureText(N(this.templateString,{value:this.labels[a]})).width+5,0===a||a===this.valuesCount/2?(e=c/2,b.x+e>h&&(h=b.x+e,d=a),b.x-e<n&&(n=b.x-e,f=a)):a<this.valuesCount/2?b.x+c>h&&(h=b.x+c,
d=a):a>this.valuesCount/2&&b.x-c<n&&(n=b.x-c,f=a);b=n;h=Math.ceil(h-this.width);d=this.getIndexAngle(d);f=this.getIndexAngle(f);d=h/Math.sin(d+Math.PI/2);f=b/Math.sin(f+Math.PI/2);d=I(d)?d:0;f=I(f)?f:0;this.drawingArea=g-(f+d)/2;this.setCenterPoint(f,d)},setCenterPoint:function(b,a){this.xCenter=(b+this.drawingArea+(this.width-a-this.drawingArea))/2;this.yCenter=this.height/2},getIndexAngle:function(b){return 2*Math.PI/this.valuesCount*b-Math.PI/2},getPointPosition:function(b,a){var c=this.getIndexAngle(b);
return{x:Math.cos(c)*a+this.xCenter,y:Math.sin(c)*a+this.yCenter}},draw:function(){if(this.display){var b=this.ctx;if(h(this.yLabels,function(a,c){if(0<c){var e;e=this.drawingArea/this.steps*c;var d=this.yCenter-e;if(0<this.lineWidth){if(b.strokeStyle=this.lineColor,b.lineWidth=this.lineWidth,this.lineArc)b.beginPath(),b.arc(this.xCenter,this.yCenter,e,0,2*Math.PI);else{b.beginPath();for(var f=0;f<this.valuesCount;f++)e=this.getPointPosition(f,this.calculateCenterOffset(this.min+c*this.stepValue)),
0===f?b.moveTo(e.x,e.y):b.lineTo(e.x,e.y)}b.closePath();b.stroke()}if(this.showLabels){if(b.font=O(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop)e=b.measureText(a).width,b.fillStyle=this.backdropColor,b.fillRect(this.xCenter-e/2-this.backdropPaddingX,d-this.fontSize/2-this.backdropPaddingY,e+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY);b.textAlign="center";b.textBaseline="middle";b.fillStyle=this.fontColor;b.fillText(a,this.xCenter,d)}}},this),!this.lineArc){b.lineWidth=
this.angleLineWidth;b.strokeStyle=this.angleLineColor;for(var a=this.valuesCount-1;0<=a;a--){if(0<this.angleLineWidth){var c=this.getPointPosition(a,this.calculateCenterOffset(this.max));b.beginPath();b.moveTo(this.xCenter,this.yCenter);b.lineTo(c.x,c.y);b.stroke();b.closePath()}c=this.getPointPosition(a,this.calculateCenterOffset(this.max)+5);b.font=O(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);b.fillStyle=this.pointLabelFontColor;var e=this.labels.length,d=this.labels.length/
2,f=d/2,g=f>a||a>e-f,e=a===f||a===e-f;b.textAlign=0===a?"center":a===d?"center":d>a?"left":"right";b.textBaseline=e?"middle":g?"bottom":"top";b.fillText(this.labels[a],c.x,c.y)}}}}});e.addEvent(window,"resize",function(){var b;return function(){clearTimeout(b);b=setTimeout(function(){h(a.instances,function(b){b.options.responsive&&b.resize(b.render,!0)})},50)}}());ga?define(function(){return a}):"object"==typeof module&&module.exports&&(module.exports=a);d.Chart=a;a.noConflict=function(){return d.Chart=
c,a}}).call(this);
(function(){var d=this.Chart,c=d.helpers;d.Type.extend({name:"Bar",defaults:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(a){var e=
this.options;this.ScaleClass=d.Scale.extend({offsetGridLines:!0,calculateBarX:function(a,c,d){var t=this.calculateBaseWidth();d=this.calculateX(d)-t/2;a=this.calculateBarWidth(a);return d+a*c+c*e.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*e.barValueSpacing},calculateBarWidth:function(a){return(this.calculateBaseWidth()-(a-1)*e.barDatasetSpacing)/a}});this.datasets=[];this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a=
"mouseout"!==a.type?this.getBarsAtEvent(a):[];this.eachBars(function(a){a.restore(["fillColor","strokeColor"])});c.each(a,function(a){a.fillColor=a.highlightFill;a.strokeColor=a.highlightStroke});this.showTooltip(a)});this.BarClass=d.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx});c.each(a.datasets,function(e){var d={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,bars:[]};this.datasets.push(d);c.each(e.data,
function(c,t){d.bars.push(new this.BarClass({value:c,label:a.labels[t],datasetLabel:e.label,strokeColor:e.strokeColor,fillColor:e.fillColor,highlightFill:e.highlightFill||e.fillColor,highlightStroke:e.highlightStroke||e.strokeColor}))},this)},this);this.buildScale(a.labels);this.BarClass.prototype.base=this.scale.endPoint;this.eachBars(function(a,e,d){c.extend(a,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,d,e),y:this.scale.endPoint});a.save()},
this);this.render()},update:function(){this.scale.update();c.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])});this.eachBars(function(a){a.save()});this.render()},eachBars:function(a){c.each(this.datasets,function(e,d){c.each(e.bars,a,this,d)},this)},getBarsAtEvent:function(a){var e,d=[];a=c.getRelativePosition(a);for(var n=function(a){d.push(a.bars[e])},g=0;g<this.datasets.length;g++)for(e=0;e<this.datasets[g].bars.length;e++)if(this.datasets[g].bars[e].inRange(a.x,a.y))return c.each(this.datasets,
n),d;return d},buildScale:function(a){var e=this,d=function(){var a=[];return e.eachBars(function(c){a.push(c.value)}),a};a={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){a=
c.calculateScaleRange(d(),a,this.fontSize,this.beginAtZero,this.integersOnly);c.extend(this,a)},xLabels:a,font:c.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?
this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&c.extend(a,{calculateYRange:c.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new this.ScaleClass(a)},addData:function(a,
e){c.each(a,function(a,c){this.datasets[c].bars.push(new this.BarClass({value:a,label:e,x:this.scale.calculateBarX(this.datasets.length,c,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[c].strokeColor,fillColor:this.datasets[c].fillColor}))},this);this.scale.addXLabel(e);this.update()},removeData:function(){this.scale.removeXLabel();c.each(this.datasets,function(a){a.bars.shift()},this);this.update()},
reflow:function(){c.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var a=c.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var e=a||1;this.clear();this.chart.ctx;this.scale.draw(e);c.each(this.datasets,function(a,d){c.each(a.bars,function(a,c){a.hasValue()&&(a.base=this.scale.endPoint,a.transition({x:this.scale.calculateBarX(this.datasets.length,d,c),y:this.scale.calculateY(a.value),width:this.scale.calculateBarWidth(this.datasets.length)},
e).draw())},this)},this)}})}).call(this);
(function(){var d=this.Chart,c=d.helpers,a={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};d.Type.extend({name:"Doughnut",defaults:a,
initialize:function(a){this.segments=[];this.outerRadius=(c.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;this.SegmentArc=d.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2});this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getSegmentsAtEvent(a):[];c.each(this.segments,function(a){a.restore(["fillColor"])});c.each(a,function(a){a.fillColor=a.highlightColor});this.showTooltip(a)});
this.calculateTotal(a);c.each(a,function(a,c){this.addData(a,c,!0)},this);this.render()},getSegmentsAtEvent:function(a){var d=[],n=c.getRelativePosition(a);return c.each(this.segments,function(a){a.inRange(n.x,n.y)&&d.push(a)},this),d},addData:function(a,c,d){this.segments.splice(c||this.segments.length,0,new this.SegmentArc({value:a.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:a.color,
highlightColor:a.highlight||a.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(a.value),label:a.label}));d||(this.reflow(),this.update())},calculateCircumference:function(a){return Math.abs(a)/this.total*Math.PI*2},calculateTotal:function(a){this.total=0;c.each(a,function(a){this.total+=Math.abs(a.value)},this)},update:function(){this.calculateTotal(this.segments);
c.each(this.activeElements,function(a){a.restore(["fillColor"])});c.each(this.segments,function(a){a.save()});this.render()},removeData:function(a){a=c.isNumber(a)?a:this.segments.length-1;this.segments.splice(a,1);this.reflow();this.update()},reflow:function(){c.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.outerRadius=(c.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;c.each(this.segments,function(a){a.update({outerRadius:this.outerRadius,
innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(a){var d=a?a:1;this.clear();c.each(this.segments,function(a,c){a.transition({circumference:this.calculateCircumference(a.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},d);a.endAngle=a.startAngle+a.circumference;a.draw();0===c&&(a.startAngle=1.5*Math.PI);c<this.segments.length-1&&(this.segments[c+1].startAngle=a.endAngle)},this)}});d.types.Doughnut.extend({name:"Pie",
defaults:c.merge(a,{percentageInnerCutout:0})})}).call(this);
(function(){var d=this.Chart,c=d.helpers;d.Type.extend({name:"Line",defaults:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(a){this.PointClass=
d.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(a){return Math.pow(a-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}});this.datasets=[];this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getPointsAtEvent(a):[];this.eachPoints(function(a){a.restore(["fillColor",
"strokeColor"])});c.each(a,function(a){a.fillColor=a.highlightFill;a.strokeColor=a.highlightStroke});this.showTooltip(a)});c.each(a.datasets,function(e){var d={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(d);c.each(e.data,function(c,g){d.points.push(new this.PointClass({value:c,label:a.labels[g],datasetLabel:e.label,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||
e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this);this.buildScale(a.labels);this.eachPoints(function(a,e){c.extend(a,{x:this.scale.calculateX(e),y:this.scale.endPoint});a.save()},this)},this);this.render()},update:function(){this.scale.update();c.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])});this.eachPoints(function(a){a.save()});this.render()},eachPoints:function(a){c.each(this.datasets,function(e){c.each(e.points,a,this)},this)},getPointsAtEvent:function(a){var e=
[],d=c.getRelativePosition(a);return c.each(this.datasets,function(a){c.each(a.points,function(a){a.inRange(d.x,d.y)&&e.push(a)})},this),e},buildScale:function(a){var e=this,h=function(){var a=[];return e.eachPoints(function(c){a.push(c.value)}),a};a={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,
valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){a=c.calculateScaleRange(h(),a,this.fontSize,this.beginAtZero,this.integersOnly);c.extend(this,a)},xLabels:a,font:c.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,
gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&c.extend(a,{calculateYRange:c.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,
max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new d.Scale(a)},addData:function(a,e){c.each(a,function(a,c){this.datasets[c].points.push(new this.PointClass({value:a,label:e,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[c].pointStrokeColor,fillColor:this.datasets[c].pointColor}))},this);this.scale.addXLabel(e);this.update()},removeData:function(){this.scale.removeXLabel();c.each(this.datasets,function(a){a.points.shift()},
this);this.update()},reflow:function(){var a=c.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var e=a||1;this.clear();var d=this.chart.ctx,n=function(a){return null!==a.value},g=function(a,e,d){return c.findNextWhere(e,n,d)||a},t=function(a,e,d){return c.findPreviousWhere(e,n,d)||a};this.scale.draw(e);c.each(this.datasets,function(a){var x=c.where(a.points,n);c.each(a.points,function(a,c){a.hasValue()&&a.transition({y:this.scale.calculateY(a.value),
x:this.scale.calculateX(c)},e)},this);this.options.bezierCurve&&c.each(x,function(a,e){var d=0<e&&e<x.length-1?this.options.bezierCurveTension:0;a.controlPoints=c.splineCurve(t(a,x,e),a,g(a,x,e),d);a.controlPoints.outer.y>this.scale.endPoint?a.controlPoints.outer.y=this.scale.endPoint:a.controlPoints.outer.y<this.scale.startPoint&&(a.controlPoints.outer.y=this.scale.startPoint);a.controlPoints.inner.y>this.scale.endPoint?a.controlPoints.inner.y=this.scale.endPoint:a.controlPoints.inner.y<this.scale.startPoint&&
(a.controlPoints.inner.y=this.scale.startPoint)},this);d.lineWidth=this.options.datasetStrokeWidth;d.strokeStyle=a.strokeColor;d.beginPath();c.each(x,function(a,c){if(0===c)d.moveTo(a.x,a.y);else if(this.options.bezierCurve){var e=t(a,x,c);d.bezierCurveTo(e.controlPoints.outer.x,e.controlPoints.outer.y,a.controlPoints.inner.x,a.controlPoints.inner.y,a.x,a.y)}else d.lineTo(a.x,a.y)},this);d.stroke();this.options.datasetFill&&0<x.length&&(d.lineTo(x[x.length-1].x,this.scale.endPoint),d.lineTo(x[0].x,
this.scale.endPoint),d.fillStyle=a.fillColor,d.closePath(),d.fill());c.each(x,function(a){a.draw()})},this)}})}).call(this);
(function(){var d=this.Chart,c=d.helpers;d.Type.extend({name:"PolarArea",defaults:{scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'},
initialize:function(a){this.segments=[];this.SegmentArc=d.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2});this.scale=new d.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,
showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:a.length});
this.updateScaleRange(a);this.scale.update();c.each(a,function(a,c){this.addData(a,c,!0)},this);this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getSegmentsAtEvent(a):[];c.each(this.segments,function(a){a.restore(["fillColor"])});c.each(a,function(a){a.fillColor=a.highlightColor});this.showTooltip(a)});this.render()},getSegmentsAtEvent:function(a){var e=[],d=c.getRelativePosition(a);return c.each(this.segments,function(a){a.inRange(d.x,
d.y)&&e.push(a)},this),e},addData:function(a,c,d){this.segments.splice(c||this.segments.length,0,new this.SegmentArc({fillColor:a.color,highlightColor:a.highlight||a.color,label:a.label,value:a.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(a.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI}));d||(this.reflow(),this.update())},removeData:function(a){a=c.isNumber(a)?a:this.segments.length-1;this.segments.splice(a,
1);this.reflow();this.update()},calculateTotal:function(a){this.total=0;c.each(a,function(a){this.total+=a.value},this);this.scale.valuesCount=this.segments.length},updateScaleRange:function(a){var e=[];c.each(a,function(a){e.push(a.value)});a=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:c.calculateScaleRange(e,c.min([this.chart.width,
this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);c.extend(this.scale,a,{size:c.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments);c.each(this.segments,function(a){a.save()});this.reflow();this.render()},reflow:function(){c.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.updateScaleRange(this.segments);
this.scale.update();c.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2});c.each(this.segments,function(a){a.update({outerRadius:this.scale.calculateCenterOffset(a.value)})},this)},draw:function(a){var e=a||1;this.clear();c.each(this.segments,function(a,c){a.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(a.value)},e);a.endAngle=a.startAngle+a.circumference;0===c&&(a.startAngle=1.5*Math.PI);c<this.segments.length-1&&(this.segments[c+
1].startAngle=a.endAngle);a.draw()},this);this.scale.draw()}})}).call(this);
(function(){var d=this.Chart,c=d.helpers;d.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},
initialize:function(a){this.PointClass=d.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx});this.datasets=[];this.buildScale(a);this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getPointsAtEvent(a):[];this.eachPoints(function(a){a.restore(["fillColor","strokeColor"])});c.each(a,function(a){a.fillColor=
a.highlightFill;a.strokeColor=a.highlightStroke});this.showTooltip(a)});c.each(a.datasets,function(e){var d={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(d);c.each(e.data,function(c,g){var t;this.scale.animation||(t=this.scale.getPointPosition(g,this.scale.calculateCenterOffset(c)));d.points.push(new this.PointClass({value:c,label:a.labels[g],datasetLabel:e.label,x:this.options.animation?
this.scale.xCenter:t.x,y:this.options.animation?this.scale.yCenter:t.y,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this)},this);this.render()},eachPoints:function(a){c.each(this.datasets,function(d){c.each(d.points,a,this)},this)},getPointsAtEvent:function(a){a=c.getRelativePosition(a);a=c.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},a);var d=Math.round((a.angle-
1.5*Math.PI)/(2*Math.PI/this.scale.valuesCount)),h=[];return(d>=this.scale.valuesCount||0>d)&&(d=0),a.distance<=this.scale.drawingArea&&c.each(this.datasets,function(a){h.push(a.points[d])}),h},buildScale:function(a){this.scale=new d.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,
backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,
pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:a.labels,valuesCount:a.datasets[0].data.length});this.scale.setScaleSize();this.updateScaleRange(a.datasets);this.scale.buildYLabels()},updateScaleRange:function(a){var d=function(){var d=[];return c.each(a,function(a){a.data?d=d.concat(a.data):c.each(a.points,function(a){d.push(a.value)})}),
d}(),d=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:c.calculateScaleRange(d,c.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);c.extend(this.scale,d)},addData:function(a,d){this.scale.valuesCount++;c.each(a,function(a,c){var g=this.scale.getPointPosition(this.scale.valuesCount,
this.scale.calculateCenterOffset(a));this.datasets[c].points.push(new this.PointClass({value:a,label:d,x:g.x,y:g.y,strokeColor:this.datasets[c].pointStrokeColor,fillColor:this.datasets[c].pointColor}))},this);this.scale.labels.push(d);this.reflow();this.update()},removeData:function(){this.scale.valuesCount--;this.scale.labels.shift();c.each(this.datasets,function(a){a.points.shift()},this);this.reflow();this.update()},update:function(){this.eachPoints(function(a){a.save()});this.reflow();this.render()},
reflow:function(){c.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:c.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2});this.updateScaleRange(this.datasets);this.scale.setScaleSize();this.scale.buildYLabels()},draw:function(a){var d=a||1,h=this.chart.ctx;this.clear();this.scale.draw();c.each(this.datasets,function(a){c.each(a.points,function(a,c){a.hasValue()&&a.transition(this.scale.getPointPosition(c,this.scale.calculateCenterOffset(a.value)),
d)},this);h.lineWidth=this.options.datasetStrokeWidth;h.strokeStyle=a.strokeColor;h.beginPath();c.each(a.points,function(a,c){0===c?h.moveTo(a.x,a.y):h.lineTo(a.x,a.y)},this);h.closePath();h.stroke();h.fillStyle=a.fillColor;h.fill();c.each(a.points,function(a){a.hasValue()&&a.draw()})},this)}})}).call(this);!function(d,c){var a=c(d);"object"==typeof module&&null!=module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):d.m=a}("undefined"!=typeof window?window:this,function(d,c){function a(a){return"function"==typeof a}function e(a){return"[object Object]"===ka.call(a)}function h(a){return"[object String]"===ka.call(a)}function n(){}function g(a,b){for(var c=[],d=1,f=arguments.length;f>d;d++)c[d-1]=arguments[d];if(e(a))return P(a,c);if(!h(a))throw Error("selector in m(selector, attrs, children) should be a string");
var d=(f=null!=b&&e(b)&&!("tag"in b||"view"in b||"subtree"in b))?b:{},c=f?c.slice(1):c,c={tag:"div",attrs:{},children:1===c.length&&U(c[0])?c[0]:c},f=c.attrs,g,k=[],K=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g;for(;g=K.exec(a);)""===g[1]&&g[2]?c.tag=g[2]:"#"===g[1]?c.attrs.id=g[2]:"."===g[1]?k.push(g[2]):"["===g[3][0]&&(g=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/.exec(g[3]),c.attrs[g[1]]=g[3]||"");var K="class"in d?"class":"className",l;for(l in d)V.call(d,l)&&(l===K&&null!=d[l]&&""!==d[l]?(k.push(d[l]),f[l]=""):
f[l]=d[l]);k.length&&(f[K]=k.join(" "));return c}function t(a,b){for(var c=0;c<a.length&&!b(a[c],c++););}function J(a,b){t(a,function(a,c){return(a=a&&a.attrs)&&null!=a.key&&b(a,c)})}function x(a){for(var b=0;b<a.length;b++)U(a[b])&&(a=a.concat.apply([],a),b--);return a}function v(a,b,c){a.insertBefore(b,a.childNodes[c]||null)}function ba(a,b,c,d){J(a,function(a,d){b[a=a.key]=b[a]?{action:Ia,index:d,from:b[a].index,element:c.nodes[b[a].index]||z.createElement("div")}:{action:Ja,index:d}});var e=[],
f;for(f in b)V.call(b,f)&&e.push(b[f]);var e=e.sort(ha),g=Array(c.length);return g.nodes=c.nodes.slice(),t(e,function(b){var e=b.index;if(b.action===Ka&&(A(c[e].nodes,c[e]),g.splice(e,1)),b.action===Ja){var f=z.createElement("div");f.key=a[e].attrs.key;v(d,f,e);g.splice(e,0,{attrs:{key:a[e].attrs.key},nodes:[f]});g.nodes[e]=f}if(b.action===Ia){var f=b.element,Ha=d.childNodes[e];Ha!==f&&null!==f&&d.insertBefore(f,Ha||null);g[e]=c[b.from];g.nodes[e]=f}}),g}function aa(a,b,c,d){var e=a.length!==b.length;
return e||J(a,function(a,c){var d=b[c];return e=d&&d.attrs&&d.attrs.key!==a.key}),e?ba(a,c,b,d):b}function ga(a,b,c){t(a,function(a,d){null!=b[d]&&c.push.apply(c,b[d].nodes)});t(b.nodes,function(a,d){null!=a.parentNode&&0>c.indexOf(a)&&A([a],[b[d]])});a.length<b.length&&(b.length=a.length);b.nodes=c}function I(a){var b=0;J(a,function(){return t(a,function(a){(a=a&&a.attrs)&&null==a.key&&(a.key="__mithril__"+b++)}),1})}function Q(a,b,c){return a.tag!==b.tag?!0:c.sort().join()!==Object.keys(b.attrs).sort().join()?
!0:a.attrs.id!==b.attrs.id?!0:a.attrs.key!==b.attrs.key?!0:"all"===g.redraw.strategy()?!b.configContext||!0!==b.configContext.retain:"diff"===g.redraw.strategy()?b.configContext&&!1===b.configContext.retain:!1}function M(b,c,d){Q(b,c,d)&&(c.nodes.length&&A(c.nodes),c.configContext&&a(c.configContext.onunload)&&c.configContext.onunload(),c.controllers&&t(c.controllers,function(a){a.onunload&&a.onunload({preventDefault:n})}))}function f(a,b,c){c.length&&(a.views=b,a.controllers=c,t(c,function(a){if(a.onunload&&
a.onunload.$old&&(a.onunload=a.onunload.$old),X&&a.onunload){var b=a.onunload;a.onunload=n;a.onunload.$old=b}}))}function L(b,c,d,e,f){if(a(c.attrs.config)){var g=f.configContext=f.configContext||{};b.push(function(){return c.attrs.config.call(c,d,!e,g,f)})}}function B(a){if(a.$trusted){if(a=a.match(/<[^\/]|\>\s*[^<]/g),null!=a)return a.length}else if(U(a))return a.length;return 1}function R(a,b,d,e,f,g,h,k,l){a=x(a);var n=[],w=b.length===a.length,q=0,p={},u=!1;J(b,function(a,c){u=!0;p[b[c].attrs.key]=
{action:Ka,index:c}});I(a);u&&(b=aa(a,b,p,d));for(var v=0,t=0,A=a.length;A>t;t++){var z=G(d,f,b,e,a[t],b[v],g,e+q||q,h,k,l);z!==c&&(w=w&&z.nodes.intact,q+=B(z),b[v++]=z)}return w||ga(a,b,n),b}function N(a,b,c,d){null!=d.onunload&&0>pa.map(function(a){return a.handler}).indexOf(d.onunload)&&pa.push({controller:d,handler:d.onunload});a.push(c);b.push(d)}function G(b,d,D,k,l,r,n,K,p,W,w){var q;a:{try{if(null!=l&&null!=l.toString()){q=l;break a}}catch(t){}q=""}l=q;if("retain"===l.subtree)b=r;else{a:{q=
l;if(null!=r){if(ka.call(r)===ka.call(q)){D=r;break a}if(D&&D.nodes){k=K-k;var x=k+(U(q)?q:r.nodes).length;A(D.nodes.slice(k,x),D.slice(k,x))}else r.nodes&&A(r.nodes,r)}D=(r=new q.constructor,r.tag&&(r={}),r.nodes=[],r)}r=D;if(U(l))b=R(l,r,b,K,d,n,p,W,w);else if(null!=l&&e(l)){var u,E=r;d=[];var y=[];r=l;for(D=(l=E)&&l.controllers;null!=r.view;){q=r;r=r.view.$original||r.view;k=D;var x=y,B=d,C;C=l.views;var ba=r,J=k,I=q.controller,F=void 0;C=(F="diff"===g.redraw.strategy()&&C?C.indexOf(ba):-1,-1<
F?J[F]:a(I)?new I:{});F=q&&q.attrs&&q.attrs.key;r=(q=0===X||Aa||k&&-1<k.indexOf(C)?q.view(C):{tag:"placeholder"},"retain"===q.subtree?q:(q.attrs=q.attrs||{},q.attrs.key=F,N(B,x,r,C),q))}if(u=r,"retain"===u.subtree)b=E;else{if(!u.tag&&y.length)throw Error("Component template must return a virtual element, not an array, string, etc.");u.attrs=u.attrs||{};E.attrs=E.attrs||{};l=Object.keys(u.attrs);D=l.length>("key"in u.attrs?1:0);(M(u,E,l),h(u.tag))?(l=0===E.nodes.length,W=u.attrs.xmlns?u.attrs.xmlns:
"svg"===u.tag?"http://www.w3.org/2000/svg":"math"===u.tag?"http://www.w3.org/1998/Math/MathML":W,l?(q=u,r=W,q=q.attrs.is?null==r?z.createElement(q.tag,q.attrs.is):z.createElementNS(r,q.tag,q.attrs.is):null==r?z.createElement(q.tag):z.createElementNS(r,q.tag),r=u,D=D?H(q,r.tag,r.attrs,{},W):r.attrs,v(b,q,K),r=u,r=null!=r.children&&0<r.children.length?G(q,r.tag,c,c,r.children,E.children,!0,0,r.attrs.contenteditable?q:p,W,w):r.children,p=u,E=q,D={tag:p.tag,attrs:D,children:r,nodes:[E]},E=(f(D,d,y),D.children&&
!D.children.nodes&&(D.children.nodes=[]),"select"===p.tag&&"value"in p.attrs&&H(E,p.tag,{value:p.attrs.value},{},W),D)):(q=E,r=u,k=q.nodes[0],q=(D&&H(k,r.tag,r.attrs,q.attrs,W),q.children=G(k,r.tag,c,c,r.children,q.children,!1,0,r.attrs.contenteditable?k:p,W,w),q.nodes.intact=!0,y.length&&(q.views=d,q.controllers=y),k)),b=(l||!0!==n||null==q||v(b,q,K),L(w,u,q,l,E),E)):b=void 0}}else if(a(l))b=r;else if(u=r,w=l,u.nodes.length)if(u.valueOf()!==w.valueOf()||n){n=u;u=n.nodes;if(!p||p!==z.activeElement)if(w.$trusted)A(u,
n),u=ca(b,K,w);else if("textarea"===d)b.value=w;else if(p)p.innerHTML=w;else{(1===u[0].nodeType||1<u.length||u[0].nodeValue.trim&&!u[0].nodeValue.trim())&&(A(n.nodes,n),u=[z.createTextNode(w)]);p=u[0];try{v(b,p,K),p.nodeValue=w}catch(t){}}b=(n=new w.constructor(w),n.nodes=u,n)}else b=(u.nodes.intact=!0,u);else w.$trusted?E=ca(b,K,w):(E=[z.createTextNode(w)],b.nodeName in Wa||v(b,E[0],K)),b=(y="string"==typeof w||"number"==typeof w||"boolean"==typeof w?new w.constructor(w):w,y.nodes=E,y)}return b}
function ha(a,b){return a.action-b.action||a.index-b.index}function H(b,c,d,f,g){for(var h in d)if(V.call(d,h)){var l;a:{var k=b,n=h,p=d[h],w=f[h],q=f,v=c,u=g;if(n in q&&w===p&&z.activeElement!==k)"value"===n&&"input"===v&&k.value!==p&&(k.value=p);else{q[n]=p;try{if("config"===n||"key"===n)l=!0;else{if(a(p)&&"on"===n.slice(0,2))k[n]=fa(p,k);else if("style"===n&&null!=p&&e(p)){u=k;v=p;k=w;w=void 0;for(w in v)V.call(v,w)&&(null!=k&&k[w]===v[w]||(u.style[w]=v[w]));for(w in k)V.call(k,w)&&(V.call(v,w)||
(u.style[w]=""))}else if(null!=u)"href"===n?k.setAttributeNS("http://www.w3.org/1999/xlink","href",p):k.setAttribute("className"===n?"class":n,p);else if(n in k&&!Xa[n])try{"input"===v&&k[n]===p||(k[n]=p)}catch(t){k.setAttribute(n,p)}else k.setAttribute(n,p);l=void 0}break a}catch(t){if(0>t.message.indexOf("Invalid argument"))throw t;}}l=void 0}!l}return f}function A(a,b){for(var c=a.length-1;-1<c;c--)if(a[c]&&a[c].parentNode){try{a[c].parentNode.removeChild(a[c])}catch(d){}b=[].concat(b);b[c]&&S(b[c])}a.length&&
(a.length=0)}function S(b){b.configContext&&a(b.configContext.onunload)&&(b.configContext.onunload(),b.configContext.onunload=null);b.controllers&&t(b.controllers,function(b){a(b.onunload)&&b.onunload({preventDefault:n})});b.children&&(U(b.children)?t(b.children,S):b.children.tag&&S(b.children))}function F(a){if("SCRIPT"===a.tagName)a.parentNode.replaceChild(ia(a),a);else{var b=a.childNodes;if(b&&b.length)for(var c=0;c<b.length;c++)F(b[c])}return a}function ia(a){for(var b=document.createElement("script"),
c=a.attributes,d=0;d<c.length;d++)b.setAttribute(c[d].name,c[d].value);return b.text=a.innerHTML,b}function ca(a,b,c){var d=a.childNodes[b];if(d){var e=1!==d.nodeType,f=z.createElement("span");e?(a.insertBefore(f,d||null),f.insertAdjacentHTML("beforebegin",c),a.removeChild(f)):d.insertAdjacentHTML("beforebegin",c)}else try{a.appendChild(z.createRange().createContextualFragment(c))}catch(g){a.insertAdjacentHTML("beforeend",c),F(a)}for(c=[];a.childNodes[b]!==d;)c.push(a.childNodes[b]),b++;return c}
function fa(a,b){return function(c){c=c||event;g.redraw.strategy("diff");g.startComputation();try{return a.call(b,c)}finally{k()}}}function T(a){var b=Ba.indexOf(a);return 0>b?Ba.push(a)-1:b}function O(a){function b(){return arguments.length&&(a=arguments[0]),a}return b.toJSON=function(){return a},b}function P(a,b){function c(){return(a.controller||n).apply(this,b)||this}function d(c){for(var e=[c].concat(b),f=1;f<arguments.length;f++)e.push(arguments[f]);return a.view.apply(a,e)}a.controller&&(c.prototype=
a.controller.prototype);d.$original=a.view;var e={controller:c,view:d};return b[0]&&null!=b[0].key&&(e.attrs={key:b[0].key}),e}function ja(a,c,d,e){if(!e){g.redraw.strategy("all");g.startComputation();qa[d]=c;e=La=a?a:a={controller:n};var f=new (a.controller||n);return e===La&&(Y[d]=f,Ca[d]=a),k(),null===a&&b(c,d),Y[d]}null==a&&b(c,d)}function b(a,b){qa.splice(b,1);Y.splice(b,1);Ca.splice(b,1);Ga(a);Ba.splice(T(a),1)}function l(){la&&(la(),la=null);t(qa,function(a,b){var c=Ca[b];if(Y[b]){var d=[Y[b]];
g.render(a,c.view?c.view(Y[b],d):"")}});ra&&(ra(),ra=null);da=null;Ma=new Date;g.redraw.strategy("diff")}function k(){"none"===g.redraw.strategy()?(X--,g.redraw.strategy("diff")):g.endComputation()}function y(a,b,c){ma={};var d=c.indexOf("?");-1!==d&&(ma=va(c.substr(d+1,c.length)),c=c.substr(0,d));var d=Object.keys(b),e=d.indexOf(c);if(-1!==e)return g.mount(a,b[d[e]]),!0;for(var f in b)if(V.call(b,f)){if(f===c)return g.mount(a,b[f]),!0;d=new RegExp("^"+f.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,
"([^\\/]+)")+"/?$");if(d.test(c))return c.replace(d,function(){var c=f.match(/:[^\/]+/g)||[],d=[].slice.call(arguments,1,-2);t(c,function(a,b){ma[a.replace(/:|\./g,"")]=decodeURIComponent(d[b])});g.mount(a,b[f])}),!0}}function p(a){if(a=a||event,!(a.ctrlKey||a.metaKey||a.shiftKey||2===a.which)){a.preventDefault?a.preventDefault():a.returnValue=!1;var b=a.currentTarget||a.srcElement;for(a="pathname"===g.route.mode&&b.search?va(b.search.slice(1)):{};b&&!/a/i.test(b.nodeName);)b=b.parentNode;X=0;g.route(b[g.route.mode].slice(na[g.route.mode].length),
a)}}function ea(){"hash"!==g.route.mode&&Z.hash?Z.hash=Z.hash:d.scrollTo(0,0)}function oa(a,b){var d={},f=[],g;for(g in a)if(V.call(a,g)){var h=b?b+"["+g+"]":g,k=a[g];if(null===k)f.push(encodeURIComponent(h));else if(e(k))f.push(oa(k,h));else if(U(k)){var l=[];d[h]=d[h]||{};t(k,function(a){d[h][a]||(d[h][a]=!0,l.push(encodeURIComponent(h)+"="+encodeURIComponent(a)))});f.push(l.join("&"))}else k!==c&&f.push(encodeURIComponent(h)+"="+encodeURIComponent(k))}return f.join("&")}function va(a){if(""===
a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");var b={};return t(a,function(a){var c=a.split("=");a=decodeURIComponent(c[0]);c=2===c.length?decodeURIComponent(c[1]):null;null!=b[a]?(U(b[a])||(b[a]=[b[a]]),b[a].push(c)):b[a]=c}),b}function Ga(a){var b=T(a);A(a.childNodes,sa[b]);sa[b]=c}function wa(a,b){var c=g.prop(b);return a.then(c),c.then=function(c,d){return wa(a.then(c,d),b)},c["catch"]=c.then.bind(null,null),c}function za(b,c){function d(a){l=a||Na;p.map(function(a){l===
xa?a.resolve(n):a.reject(n)})}function f(b,c,d,h){if((null!=n&&e(n)||a(n))&&a(b))try{var k=0;b.call(n,function(a){k++||(n=a,c())},function(a){k++||(n=a,d())})}catch(l){g.deferred.onerror(l),n=l,d()}else h()}function h(){var e;try{e=n&&n.then}catch(p){return g.deferred.onerror(p),n=p,l=ta,h()}l===ta&&g.deferred.onerror(n);f(e,function(){l=ua;h()},function(){l=ta;h()},function(){try{l===ua&&a(b)?n=b(n):l===ta&&a(c)&&(n=c(n),l=ua)}catch(h){return g.deferred.onerror(h),n=h,d()}n===k?(n=TypeError(),d()):
f(e,function(){d(xa)},d,function(){d(l===ua&&xa)})})}var k=this,l=0,n=0,p=[];k.promise={};k.resolve=function(a){return l||(n=a,l=ua,h()),k};k.reject=function(a){return l||(n=a,l=ta,h()),k};k.promise.then=function(a,b){var c=new za(a,b);return l===xa?c.resolve(n):l===Na?c.reject(n):p.push(c),c.promise}}function Qa(a){return a}function Ra(a){var b=a.callbackName||"mithril_callback_"+(new Date).getTime()+"_"+Math.round(1E16*Math.random()).toString(36),e=z.createElement("script");d[b]=function(f){e.parentNode.removeChild(e);
a.onload({type:"load",target:{responseText:f}});d[b]=c};e.onerror=function(){return e.parentNode.removeChild(e),a.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),d[b]=c,!1};e.onload=function(){return!1};e.src=a.url+(0<a.url.indexOf("?")?"&":"?")+(a.callbackKey?a.callbackKey:"callback")+"="+b+"&"+oa(a.data||{});z.body.appendChild(e)}function Sa(b){var c=new d.XMLHttpRequest;if(c.open(b.method,b.url,!0,b.user,b.password),c.onreadystatechange=
function(){4===c.readyState&&(200<=c.status&&300>c.status?b.onload({type:"load",target:c}):b.onerror({type:"error",target:c}))},b.serialize===JSON.stringify&&b.data&&"GET"!==b.method&&c.setRequestHeader("Content-Type","application/json; charset=utf-8"),b.deserialize===JSON.parse&&c.setRequestHeader("Accept","application/json, text/*"),a(b.config)){var e=b.config(c,b);null!=e&&(c=e)}if((e="GET"!==b.method&&b.data?b.data:"")&&!h(e)&&e.constructor!==d.FormData)throw Error("Request data should be either be a string or FormData. Check the `serialize` option in `m.request`");
return c.send(e),c}function Ta(a){return a.dataType&&"jsonp"===a.dataType.toLowerCase()?Ra(a):Sa(a)}function Ua(a,b,c){"GET"===a.method&&"jsonp"!==a.dataType?(c=0>a.url.indexOf("?")?"?":"&",b=oa(b),a.url+=b?c+b:""):a.data=c(b)}function Va(a,b){return b&&(a=a.replace(/:[a-z]\w+/gi,function(a){var c=a.slice(1);a=b[c]||a;return delete b[c],a})),a}g.version=function(){return"v0.2.5"};var z,Z,ya,Oa,V={}.hasOwnProperty,ka={}.toString,U=Array.isArray||function(a){return"[object Array]"===ka.call(a)},Wa=
{AREA:1,BASE:1,BR:1,COL:1,COMMAND:1,EMBED:1,HR:1,IMG:1,INPUT:1,KEYGEN:1,LINK:1,META:1,PARAM:1,SOURCE:1,TRACK:1,WBR:1};g.deps=function(a){a=d=a||window;z=a.document;Z=a.location;Oa=a.cancelAnimationFrame||a.clearTimeout;ya=a.requestAnimationFrame||a.setTimeout;return d};g.deps(d);var Ka=1,Ja=2,Ia=3,X=0;g.startComputation=function(){X++};g.endComputation=function(){1<X?X--:(X=0,g.redraw())};var Pa,pa=[],Aa=!1,Xa={list:1,style:1,form:1,type:1,width:1,height:1},Ya={appendChild:function(a){Pa===c&&(Pa=
z.createElement("html"));z.documentElement&&z.documentElement!==a?z.replaceChild(a,z.documentElement):z.appendChild(a);this.childNodes=z.childNodes},insertBefore:function(a){this.appendChild(a)},childNodes:[]},Ba=[],sa={};g.render=function(a,b,d){if(!a)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var e,f=[],g=T(a),h=a===z;e=h||a===z.documentElement?Ya:a;h&&"html"!==b.tag&&(b={tag:"html",attrs:{},children:b});sa[g]===c&&A(e.childNodes);!0===d&&Ga(a);
sa[g]=G(e,null,c,c,b,sa[g],!1,0,null,c,f);t(f,function(a){a()})};g.trust=function(a){return a=new String(a),a.$trusted=!0,a};g.prop=function(b){return(null!=b&&(e(b)||a(b))||"undefined"!=typeof Promise&&b instanceof Promise)&&a(b.then)?wa(b):O(b)};var La,qa=[],Ca=[],Y=[],da=null,Ma=0,la=null,ra=null;g.component=function(a){for(var b=Array(arguments.length-1),c=1;c<arguments.length;c++)b[c-1]=arguments[c];return P(a,b)};g.mount=g.module=function(b,c){if(!b)throw Error("Please ensure the DOM element exists before rendering a template into it.");
var d=qa.indexOf(b);0>d&&(d=qa.length);var e=!1,f={preventDefault:function(){e=!0;la=ra=null}};return t(pa,function(a){a.handler.call(a.controller,f);a.controller.onunload=null}),e?t(pa,function(a){a.controller.onunload=a.handler}):pa=[],Y[d]&&a(Y[d].onunload)&&Y[d].onunload(f),ja(c,b,d,e)};var Da=!1;g.redraw=function(a){if(!Da){Da=!0;a&&(Aa=!0);try{da&&!a?(ya===d.requestAnimationFrame||16<new Date-Ma)&&(0<da&&Oa(da),da=ya(l,16)):(l(),da=ya(function(){da=null},16))}finally{Da=Aa=!1}}};g.redraw.strategy=
g.prop();g.withAttr=function(a,b,c){return function(d){d=d||window.event;var e=d.currentTarget||this;d=c||this;e=a in e?e[a]:e.getAttribute(a);b.call(d,e)}};var ma,C,na={pathname:"",hash:"#",search:"?"},Ea=n,Fa=!1;g.route=function(a,b,c,e){if(0===arguments.length)return C;if(3===arguments.length&&h(b)){Ea=function(d){d=C=d.slice(na[g.route.mode].length);if(!y(a,c,d)){if(Fa)throw Error("Ensure the default route matches one of the routes defined in m.route");Fa=!0;g.route(b,!0);Fa=!1}};var f="hash"===
g.route.mode?"onhashchange":"onpopstate";return d[f]=function(){var a=Z[g.route.mode];"pathname"===g.route.mode&&(a+=Z.search);C!==a.slice(na[g.route.mode].length)&&Ea(a)},la=ea,void d[f]()}if(a.addEventListener||a.attachEvent)return a.href=("pathname"!==g.route.mode?Z.pathname:"")+na[g.route.mode]+e.attrs.href,void(a.addEventListener?(a.removeEventListener("click",p),a.addEventListener("click",p)):(a.detachEvent("onclick",p),a.attachEvent("onclick",p)));if(h(a)){f=C;C=a;var k,l=b||{},n=C.indexOf("?");
k=-1<n?va(C.slice(n+1)):{};for(var v in l)V.call(l,v)&&(k[v]=l[v]);k=oa(k);n=-1<n?C.slice(0,n):C;k&&(C=n+(-1===n.indexOf("?")?"?":"&")+k);f=!0===(3===arguments.length?c:b)||f===a;if(d.history.pushState){var t=f?"replaceState":"pushState";la=ea;ra=function(){try{d.history[t](null,z.title,na[g.route.mode]+C)}catch(a){Z[g.route.mode]=C}}}else Z[g.route.mode]=C;Ea(na[g.route.mode]+C)}};g.route.param=function(a){if(!ma)throw Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");
return a?ma[a]:ma};g.route.mode="search";g.route.buildQueryString=oa;g.route.parseQueryString=va;g.deferred=function(){var a=new za;return a.promise=wa(a.promise),a};var ua=1,ta=2,xa=3,Na=4;return g.deferred.onerror=function(a){if("[object Error]"===ka.call(a)&&!/ Error/.test(a.constructor.toString()))throw X=0,a;},g.sync=function(a){function b(a,g){return function(b){return e[a]=b,g||(f="reject"),0===--d&&(c.promise(e),c[f](e)),b}}var c=g.deferred(),d=a.length,e=[],f="resolve";return 0<a.length?
t(a,function(a,c){a.then(b(c,!0),b(c,!1))}):c.resolve([]),c.promise},g.request=function(a){!0!==a.background&&g.startComputation();var b,c,d,e=new za;return a.dataType&&"jsonp"===a.dataType.toLowerCase()?(b=a.serialize=c=a.deserialize=Qa,d=function(a){return a.responseText}):(b=a.serialize=a.serialize||JSON.stringify,c=a.deserialize=a.deserialize||JSON.parse,d=a.extract||function(a){return a.responseText.length||c!==JSON.parse?a.responseText:null}),a.method=(a.method||"GET").toUpperCase(),a.url=Va(a.url,
a.data),Ua(a,a.data,b),a.onload=a.onerror=function(b){try{b=b||event;var f=c(d(b.target,a));"load"===b.type?(a.unwrapSuccess&&(f=a.unwrapSuccess(f,b.target)),U(f)&&a.type?t(f,function(b,c){f[c]=new a.type(b)}):a.type&&(f=new a.type(f)),e.resolve(f)):(a.unwrapError&&(f=a.unwrapError(f,b.target)),e.reject(f))}catch(h){e.reject(h),g.deferred.onerror(h)}finally{!0!==a.background&&g.endComputation()}},Ta(a),e.promise=wa(e.promise,a.initialValue),e.promise},g});var lruAppCache=new Cache(-1,!1,new Cache.LocalStorageCacheStorage("searchcode")),testing={CodeResultList:Array,RepoFilterList:Array,LanguageFilterList:Array,OwnerFilterList:Array,CodeResult:function(d){this.filename=m.prop(d.fileName);this.reponame=m.prop(d.repoName);this.matchingresults=m.prop(d.matchingResults);this.repolocation=m.prop(d.repoLocation);this.documentid=m.prop(d.documentId);this.filelocation=m.prop(d.fileLocation);this.codepath=m.prop(d.codePath);this.languagename=m.prop(d.languageName);
this.codelines=m.prop(d.codeLines)},RepoFilter:function(d){this.count=m.prop(d.count);this.source=m.prop(d.repoName);this.selected=m.prop(d.selected)},LanguageFilter:function(d){this.count=m.prop(d.count);this.language=m.prop(d.languageName);this.selected=m.prop(d.selected)},OwnerFilter:function(d){this.count=m.prop(d.count);this.owner=m.prop(d.owner);this.selected=m.prop(d.selected)},vm:function(){var d={init:function(){d.searchvalue=m.prop("");d.langfilters=[];d.repositoryfilters=[];d.ownfilters=
[];d.activelangfilters=[];d.activerepositoryfilters=[];d.activeownfilters=[];d.pages=[];d.currentlyloading=m.prop(!1);d.currentpage=m.prop(0);d.clearfilters=function(){d.langfilters=[];d.repositoryfilters=[];d.ownfilters=[]};d.togglefilter=function(c,a){switch(c){case "language":-1===_.indexOf(d.langfilters,a)?d.langfilters.push(a):d.langfilters=_.without(d.langfilters,a);break;case "repo":-1===_.indexOf(d.repositoryfilters,a)?d.repositoryfilters.push(a):d.repositoryfilters=_.without(d.repositoryfilters,
a);break;case "owner":-1===_.indexOf(d.ownfilters,a)?d.ownfilters.push(a):d.ownfilters=_.without(d.ownfilters,a)}};d.filterexists=function(c,a){switch(c){case "language":if(-1===_.indexOf(d.langfilters,a))return!1;break;case "repo":if(-1===_.indexOf(d.repositoryfilters,a))return!1;break;case "owner":if(-1===_.indexOf(d.ownfilters,a))return!1}return!0};d.search=function(c,a){if(!d.currentlyloading()){d.currentlyloading(!0);m.redraw();var e="",h="",n="";0!=d.langfilters.length&&(e="&lan="+_.map(d.langfilters,
function(a){return encodeURIComponent(a)}).join("&lan="));0!=d.repositoryfilters.length&&(h="&repo="+_.map(d.repositoryfilters,function(a){return encodeURIComponent(a)}).join("&repo="));0!=d.ownfilters.length&&(n="&own="+_.map(d.ownfilters,function(a){return encodeURIComponent(a)}).join("&own="));var g=0,t="";void 0!==c&&(g=c,d.currentpage(c),0!==g&&(t="&p="+g));d.activelangfilters=JSON.parse(JSON.stringify(d.langfilters));d.activerepositoryfilters=JSON.parse(JSON.stringify(d.repositoryfilters));
d.activeownfilters=JSON.parse(JSON.stringify(d.ownfilters));void 0===a&&history.pushState({searchvalue:d.searchvalue(),langfilters:d.activelangfilters,repofilters:d.activerepositoryfilters,ownfilters:d.activeownfilters,currentpage:d.currentpage()},"search","?q="+encodeURIComponent(d.searchvalue())+e+h+n+t);var J="/api/codesearch/?q="+encodeURIComponent(d.searchvalue())+e+h+n+"&p="+g,e=lruAppCache.getItem(J),x=function(a){d.coderesults=new testing.CodeResultList;d.repofilters=new testing.RepoFilterList;
d.languagefilters=new testing.LanguageFilterList;d.ownerfilters=new testing.OwnerFilterList;d.totalhits=a.totalHits;d.altquery=a.altQuery;d.query=a.query;d.pages=a.pages;d.currentpage(a.page);_.each(a.codeResultList,function(a){d.coderesults.push(new testing.CodeResult(a))});_.each(a.repoFacetResults,function(a){d.repofilters.push(new testing.RepoFilter(a))});_.each(a.languageFacetResults,function(a){d.languagefilters.push(new testing.LanguageFilter(a))});_.each(a.repoOwnerResults,function(a){d.ownerfilters.push(new testing.OwnerFilter(a))});
d.currentlyloading(!1);m.redraw()};null!==e?x(e):m.request({method:"GET",background:!0,url:J}).then(function(a){lruAppCache.setItem(J,a,{expirationAbsolute:null,expirationSliding:60,priority:Cache.Priority.HIGH});x(a)})}}}};return d}(),controller:function(){testing.vm.init()},view:function(){return m("div",[m.component(SearchOptionsComponent),m.component(SearchCountComponent,{totalhits:testing.vm.totalhits,query:testing.vm.query,repofilters:testing.vm.activerepositoryfilters,languagefilters:testing.vm.activelangfilters,
ownerfilters:testing.vm.activeownfilters}),m.component(SearchChartComponent,{languagefilters:testing.vm.langfilters,repofilters:testing.vm.repofilters}),m.component(SearchLoadingComponent,{currentlyloading:testing.vm.currentlyloading}),m("div.row",[m("div.col-md-3.search-filters-container.search-filters",[m.component(SearchNextPreviousComponent,{currentpage:testing.vm.currentpage,pages:testing.vm.pages,setpage:testing.vm.setpage,search:testing.vm.search,totalhits:testing.vm.totalhits}),m.component(SearchButtonFilterComponent,
{totalhits:testing.vm.totalhits,clearfilters:testing.vm.clearfilters,search:testing.vm.search,languagefilters:testing.vm.langfilters,repofilters:testing.vm.repositoryfilters,ownfilters:testing.vm.ownfilters}),m.component(SearchAlternateFilterComponent,{query:testing.vm.query,altquery:testing.vm.altquery}),m.component(SearchRepositoriesFilterComponent,{repofilters:testing.vm.repofilters}),m.component(SearchLanguagesFilterComponent,{languagefilters:testing.vm.languagefilters}),m.component(SearchOwnersFilterComponent,
{ownerfilters:testing.vm.ownerfilters})]),m("div.col-md-9.search-results",[m.component(SearchNoResultsComponent,{totalhits:testing.vm.totalhits,query:testing.vm.query,altquery:testing.vm.altquery,query:testing.vm.query}),m.component(SearchResultsComponent,{coderesults:testing.vm.coderesults})]),m.component(SearchPagesComponent,{currentpage:testing.vm.currentpage,pages:testing.vm.pages,search:testing.vm.search})])])}},SearchNoResultsComponent={controller:function(){return{doaltquery:function(d){testing.vm.searchvalue(d);
testing.vm.search()}}},view:function(d,c){if(0!==c.totalhits)return m("div");var a=m("h5","Try searching with fewer and more general keywords or if you have filters remove them.");0!==c.altquery.length&&(a="Try one of the following searches instead",1===c.altquery.length&&(a="Try the following search instead"),a=m("div",[m("h5",a),m("ul",{style:{"list-style-type":"none"}},_.map(c.altquery,function(a){return m("li",m("a",{href:"",onclick:function(){d.doaltquery(a)}},a))}))]));return m("div",[m("h4",
"No results found for ",m("i.grey",c.query)),a])}},SearchNextPreviousComponent={controller:function(){},view:function(d,c){if(void 0===c.pages||void 0===c.totalhits||0===c.totalhits)return m("div");var a="",e="";0==c.currentpage()&&(a="disabled");c.currentpage()+1>=c.pages.length&&(e="disabled");return m("div",[m("h5","Page "+(c.currentpage()+1)+" of "+(0==c.pages.length?1:c.pages.length)),m("div.center",m("input.btn.btn-xs.btn-success.filter-button",{type:"submit",disabled:a,onclick:function(){c.search(c.currentpage()-
1)},value:"\u25c0 Previous"}),m("span",m.trust("&nbsp;")),m("input.btn.btn-xs.btn-success.filter-button",{type:"submit",disabled:e,onclick:function(){c.search(c.currentpage()+1)},value:"Next \u25b6"}))])}},SearchLoadingComponent={controller:function(){},view:function(d,c){var a={};!1===c.currentlyloading()&&(a={style:{display:"none"}});return m("div.search-loading",a,[m("img",{src:"/img/loading.gif"}),m("h5","Loading...")])}},SearchPagesComponent={controller:function(){},view:function(d,c){return m("div.search-pagination",
m("ul.pagination",[_.map(c.pages,function(a){return m("li",{"class":a==c.currentpage()?"active":""},m("a",{onclick:function(){c.search(a);window.scrollTo(0,0)}},a+1))})]))}},SearchButtonFilterComponent={controller:function(){},view:function(d,c){return void 0===c.totalhits||0===c.totalhits&&0===c.languagefilters.length+c.repofilters.length+c.ownfilters.length?m("div"):0===c.totalhits&&0!==c.languagefilters.length+c.repofilters.length+c.ownfilters.length?m("div",[m("h5","Filter Results"),m("input.btn.btn-xs.btn-success.filter-button",
{type:"submit",onclick:function(){c.clearfilters();c.search()},value:"Remove"})]):m("div",[m("h5","Filter Results"),m("div.center",m("input.btn.btn-xs.btn-success.filter-button",{type:"submit",onclick:function(){c.clearfilters();c.search()},value:"Remove"}),m("span",m.trust("&nbsp;")),m("input.btn.btn-xs.btn-success.filter-button",{type:"submit",onclick:function(){c.search()},value:"Apply"}))])}},SearchRepositoriesFilterComponent={controller:function(){var d=!1,c="";return{trimrepo:function(a){0!==
c.length||d||(a=_.first(a,5));0!==c.length&&(a=_.filter(a,function(a){return-1!==a.source().toLowerCase().indexOf(c)}));return a},toggleshowall:function(){d=!d},showall:function(){return d},trimlength:function(){return 5},clickenvent:function(a){testing.vm.togglefilter("repo",a)},filtervalue:function(a){c=a},hasfilter:function(){return 0!==c.length},getfiltervalue:function(){return c}}},view:function(d,c){var a=m("div");if(void 0===c.repofilters||0==c.repofilters.length)return a;!d.hasfilter()&&d.trimlength()<
c.repofilters.length&&(a=c.repofilters.length-d.trimlength(),a=m("a.green",{onclick:d.toggleshowall},a+" more repositories ",m("span.glyphicon.glyphicon-chevron-down")),d.showall()&&(a=m("a.green",{onclick:d.toggleshowall},"less repositories ",m("span.glyphicon.glyphicon-chevron-up"))));return m("div",[m("h5","Repositories"),m("input.repo-filter",{onkeyup:m.withAttr("value",d.filtervalue),placeholder:"Filter Repositories",value:d.getfiltervalue()}),_.map(d.trimrepo(c.repofilters),function(a,c){return m.component(FilterCheckboxComponent,
{onclick:function(){d.clickenvent(a.source())},value:a.source(),count:a.count(),checked:testing.vm.filterexists("repo",a.source())})}),a])}},SearchLanguagesFilterComponent={controller:function(){var d=!1,c="";return{trimlanguage:function(a){0!==c.length||d||(a=_.first(a,5));0!==c.length&&(a=_.filter(a,function(a){return-1!==a.language().toLowerCase().indexOf(c)}));return a},toggleshowall:function(){d=!d},showall:function(){return d},trimlength:function(){return 5},clickenvent:function(a){testing.vm.togglefilter("language",
a)},filtervalue:function(a){c=a},hasfilter:function(){return 0!==c.length},getfiltervalue:function(){return c}}},view:function(d,c){var a=m("div");if(void 0===c.languagefilters||0==c.languagefilters.length)return a;!d.hasfilter()&&d.trimlength()<c.languagefilters.length&&(a=c.languagefilters.length-d.trimlength(),a=m("a.green",{onclick:d.toggleshowall},a+" more languages ",m("span.glyphicon.glyphicon-chevron-down")),d.showall()&&(a=m("a.green",{onclick:d.toggleshowall},"less languages ",m("span.glyphicon.glyphicon-chevron-up"))));
return m("div",[m("h5","Languages"),m("input.repo-filter",{onkeyup:m.withAttr("value",d.filtervalue),placeholder:"Filter Languages",value:d.getfiltervalue()}),_.map(d.trimlanguage(c.languagefilters),function(a,c){return m.component(FilterCheckboxComponent,{onclick:function(){d.clickenvent(a.language())},value:a.language(),count:a.count(),checked:testing.vm.filterexists("language",a.language())})}),a])}},SearchOwnersFilterComponent={controller:function(){var d=!1,c="";return{trimlanguage:function(a){0!==
c.length||d||(a=_.first(a,5));0!==c.length&&(a=_.filter(a,function(a){return-1!==a.owner().toLowerCase().indexOf(c)}));return a},toggleshowall:function(){d=!d},showall:function(){return d},trimlength:function(){return 5},clickenvent:function(a){testing.vm.togglefilter("owner",a)},filtervalue:function(a){c=a},hasfilter:function(){return 0!==c.length},getfiltervalue:function(){return c}}},view:function(d,c){var a=m("div");if(void 0===c.ownerfilters||0==c.ownerfilters.length)return a;!d.hasfilter()&&
d.trimlength()<c.ownerfilters.length&&(a=c.ownerfilters.length-d.trimlength(),a=m("a.green",{onclick:d.toggleshowall},a+" more owners ",m("span.glyphicon.glyphicon-chevron-down")),d.showall()&&(a=m("a.green",{onclick:d.toggleshowall},"less owners ",m("span.glyphicon.glyphicon-chevron-up"))));return m("div",[m("h5","Owners"),m("input.repo-filter",{onkeyup:m.withAttr("value",d.filtervalue),placeholder:"Filter Owners",value:d.getfiltervalue()}),_.map(d.trimlanguage(c.ownerfilters),function(a,c){return m.component(FilterCheckboxComponent,
{onclick:function(){d.clickenvent(a.owner())},value:a.owner(),count:a.count(),checked:testing.vm.filterexists("owner",a.owner())})}),a])}},FilterCheckboxComponent={view:function(d,c){var a={type:"checkbox",onclick:c.onclick};c.checked&&(a.checked="checked");return m("div.checkbox",m("label",[m("input",a),m("span",c.value),m("span",{"class":"badge pull-right"},c.count)]))}},SearchOptionsComponent={controller:function(){return{dosearch:function(){testing.vm.search()}}},view:function(d,c){return m("div",
{"class":"search-options"},m("form",{onsubmit:function(a){d.dosearch();return!1}},m("div.form-inline",[m("div.form-group",m("input.form-control",{autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false",size:"50",placeholder:"Search Expression",onkeyup:m.withAttr("value",testing.vm.searchvalue),value:testing.vm.searchvalue(),type:"search",id:"searchbox"})),m("input.btn.btn-success",{value:"search",type:"submit",onclick:d.dosearch.bind(this)})])))}},SearchCountComponent={controller:function(){return{}},
view:function(d,c){if(void 0===c.totalhits)return m("div");var a="",e="",h="";if(0!==c.repofilters.length){var n="repository";2<=c.repofilters.length&&(n="repositories");a=" filtered by "+n+' "'+c.repofilters.join(", ")+'"'}0!==c.languagefilters.length&&(n="language",2<=c.languagefilters.length&&(n="languages"),e=(""===a?" filtered by "+n+' "':" and "+n+' "')+c.languagefilters.join(", ")+'"');0!=c.ownerfilters.length&&(n="owner",2<=c.ownerfilters.length&&(n="owners"),h=""===a&&""===e?" filtered by "+
n+' "':" and "+n+' "',h=h+c.ownerfilters.join(", ")+'"');document.title='Search for "'+c.query+'"'+a+e+h;return m("div.row.search-count",[m("b",c.totalhits+" results: "),m("span.grey",'"'+c.query+'"'+a+e+h)])}},SearchChartComponent={controller:function(){return{}},view:function(d,c){return m("div.row.search-chart",m("canvas",{id:"search-chart"}))}},SearchAlternateFilterComponent={controller:function(){return{doaltquery:function(d){testing.vm.searchvalue(d);testing.vm.search()}}},view:function(d,c){return void 0===
c.altquery||0===c.altquery.length?m("div"):m("div",[m("h5","Alternate Searches"),m("div",[_.map(c.altquery,function(a){return m("div.checkbox",m("label",[m("a",{onclick:function(){d.doaltquery(a)}},a)]))})])])}},SearchResultsComponent={controller:function(){return{}},view:function(d,c){return m("div",[_.map(c.coderesults,function(a){return m("div.code-result",[m("div",m("h5",[m("a",{href:"/file/"+a.documentid()+"/"+a.codepath()},a.filename()+" in "+a.reponame()),m("small"," | "+a.repolocation()+" | "+
a.codelines()+" lines | "+a.languagename())])),m("ol.code-result",[_.map(a.matchingresults(),function(c){return m("li",{value:c.lineNumber},m("a",{href:"/file/"+a.documentid()+"/"+a.codepath()+"#"+c.lineNumber},m("pre",m.trust(c.line))))})]),m("hr",{"class":"spacer"})])})])}};m.mount(document.getElementsByClassName("container")[0],{controller:testing.controller,view:testing.view});
window.onpopstate=function(d){testing.vm.searchvalue(d.state.searchvalue);testing.vm.currentpage(d.state.currentpage);testing.vm.activelangfilters=d.state.langfilters;testing.vm.langfilters=d.state.langfilters;testing.vm.activerepositoryfilters=d.state.repofilters;testing.vm.repositoryfilters=d.state.repofilters;testing.vm.ownfilters=d.state.ownfilters;testing.vm.activeownfilters=d.state.ownfilters;testing.vm.search(d.state.currentpage,!0);popstate=!0};
void 0!==preload&&(testing.vm.searchvalue(preload.query),testing.vm.currentpage(preload.page),testing.vm.activelangfilters=preload.languageFacets,testing.vm.langfilters=preload.languageFacets,testing.vm.activerepositoryfilters=preload.repositoryFacets,testing.vm.repositoryfilters=preload.repositoryFacets,testing.vm.ownfilters=preload.ownerFacets,testing.vm.activeownfilters=preload.ownerFacets,testing.vm.search(preload.page,!0));
