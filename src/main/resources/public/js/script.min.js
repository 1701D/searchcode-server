(function(){function e(b){return function(p,a,c,d){a=O(a,d,4);var g=!G(p)&&f.keys(p),e=(g||p).length,h=0<b?0:e-1;3>arguments.length&&(c=p[g?g[h]:h],h+=b);for(var l=a,n=c;0<=h&&e>h;h+=b)var k=g?g[h]:h,n=l(n,p[k],k,p);return n}}function c(b){return function(p,a,c){a=C(a,c);c=I(p);for(var d=0<b?0:c-1;0<=d&&c>d;d+=b)if(a(p[d],d,p))return d;return-1}}function a(b,p,a){return function(c,d,g){var e=0,h=I(c);if("number"==typeof g)0<b?e=0<=g?g:Math.max(g+h,e):h=0<=g?Math.min(g+1,h):g+h+1;else if(a&&g&&h)return g=
a(c,d),c[g]===d?g:-1;if(d!==d)return g=p(u.call(c,e,h),f.isNaN),0<=g?g+e:-1;for(g=0<b?e:h-1;0<=g&&h>g;g+=b)if(c[g]===d)return g;return-1}}function d(b,p){var a=da.length,c=b.constructor,c=f.isFunction(c)&&c.prototype||k,d="constructor";for(f.has(b,d)&&!f.contains(p,d)&&p.push(d);a--;)d=da[a],d in b&&b[d]!==c[d]&&!f.contains(p,d)&&p.push(d)}var l=this,n=l._,q=Array.prototype,k=Object.prototype,v=q.push,u=q.slice,y=k.toString,P=k.hasOwnProperty,ba=Array.isArray,ja=Object.keys,L=Function.prototype.bind,
T=Object.create,Q=function(){},f=function(b){return b instanceof f?b:this instanceof f?void(this._wrapped=b):new f(b)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports._=f):l._=f;f.VERSION="1.8.3";var O=function(b,p,a){if(void 0===p)return b;switch(null==a?3:a){case 1:return function(a){return b.call(p,a)};case 2:return function(a,c){return b.call(p,a,c)};case 3:return function(a,c,d){return b.call(p,a,c,d)};case 4:return function(a,c,d,oa){return b.call(p,
a,c,d,oa)}}return function(){return b.apply(p,arguments)}},C=function(b,p,a){return null==b?f.identity:f.isFunction(b)?O(b,p,a):f.isObject(b)?f.matcher(b):f.property(b)};f.iteratee=function(b,p){return C(b,p,1/0)};var N=function(b,p){return function(a){var c=arguments.length;if(2>c||null==a)return a;for(var d=1;c>d;d++)for(var f=arguments[d],g=b(f),e=g.length,h=0;e>h;h++){var l=g[h];p&&void 0!==a[l]||(a[l]=f[l])}return a}},R=function(b){if(!f.isObject(b))return{};if(T)return T(b);Q.prototype=b;b=
new Q;return Q.prototype=null,b},J=function(b){return function(p){return null==p?void 0:p[b]}},M=Math.pow(2,53)-1,I=J("length"),G=function(b){b=I(b);return"number"==typeof b&&0<=b&&M>=b};f.each=f.forEach=function(b,p,a){p=O(p,a);var c;if(G(b))for(a=0,c=b.length;c>a;a++)p(b[a],a,b);else{var d=f.keys(b);a=0;for(c=d.length;c>a;a++)p(b[d[a]],d[a],b)}return b};f.map=f.collect=function(b,p,a){p=C(p,a);a=!G(b)&&f.keys(b);for(var c=(a||b).length,d=Array(c),g=0;c>g;g++){var e=a?a[g]:g;d[g]=p(b[e],e,b)}return d};
f.reduce=f.foldl=f.inject=e(1);f.reduceRight=f.foldr=e(-1);f.find=f.detect=function(b,p,a){var c;return c=G(b)?f.findIndex(b,p,a):f.findKey(b,p,a),void 0!==c&&-1!==c?b[c]:void 0};f.filter=f.select=function(b,p,a){var c=[];return p=C(p,a),f.each(b,function(b,z,a){p(b,z,a)&&c.push(b)}),c};f.reject=function(b,a,c){return f.filter(b,f.negate(C(a)),c)};f.every=f.all=function(b,a,c){a=C(a,c);c=!G(b)&&f.keys(b);for(var d=(c||b).length,g=0;d>g;g++){var e=c?c[g]:g;if(!a(b[e],e,b))return!1}return!0};f.some=
f.any=function(b,a,c){a=C(a,c);c=!G(b)&&f.keys(b);for(var d=(c||b).length,g=0;d>g;g++){var e=c?c[g]:g;if(a(b[e],e,b))return!0}return!1};f.contains=f.includes=f.include=function(b,a,c,d){return G(b)||(b=f.values(b)),("number"!=typeof c||d)&&(c=0),0<=f.indexOf(b,a,c)};f.invoke=function(b,a){var c=u.call(arguments,2),d=f.isFunction(a);return f.map(b,function(b){var z=d?a:b[a];return null==z?z:z.apply(b,c)})};f.pluck=function(b,a){return f.map(b,f.property(a))};f.where=function(b,a){return f.filter(b,
f.matcher(a))};f.findWhere=function(b,a){return f.find(b,f.matcher(a))};f.max=function(b,a,c){var d,g=-1/0,e=-1/0;if(null==a&&null!=b){b=G(b)?b:f.values(b);for(var h=0,l=b.length;l>h;h++)c=b[h],c>g&&(g=c)}else a=C(a,c),f.each(b,function(b,z,c){d=a(b,z,c);(d>e||d===-1/0&&g===-1/0)&&(g=b,e=d)});return g};f.min=function(b,a,c){var d,g=1/0,e=1/0;if(null==a&&null!=b){b=G(b)?b:f.values(b);for(var h=0,l=b.length;l>h;h++)c=b[h],g>c&&(g=c)}else a=C(a,c),f.each(b,function(b,z,c){d=a(b,z,c);(e>d||1/0===d&&1/
0===g)&&(g=b,e=d)});return g};f.shuffle=function(b){for(var a=G(b)?b:f.values(b),c=a.length,d=Array(c),g=0;c>g;g++)b=f.random(0,g),b!==g&&(d[g]=d[b]),d[b]=a[g];return d};f.sample=function(b,a,c){return null==a||c?(G(b)||(b=f.values(b)),b[f.random(b.length-1)]):f.shuffle(b).slice(0,Math.max(0,a))};f.sortBy=function(b,a,c){return a=C(a,c),f.pluck(f.map(b,function(b,z,c){return{value:b,index:z,criteria:a(b,z,c)}}).sort(function(b,a){var z=b.criteria,c=a.criteria;if(z!==c){if(z>c||void 0===z)return 1;
if(c>z||void 0===c)return-1}return b.index-a.index}),"value")};var ea=function(b){return function(a,c,d){var g={};return c=C(c,d),f.each(a,function(d,f){var e=c(d,f,a);b(g,d,e)}),g}};f.groupBy=ea(function(b,a,c){f.has(b,c)?b[c].push(a):b[c]=[a]});f.indexBy=ea(function(b,a,c){b[c]=a});f.countBy=ea(function(b,a,c){f.has(b,c)?b[c]++:b[c]=1});f.toArray=function(b){return b?f.isArray(b)?u.call(b):G(b)?f.map(b,f.identity):f.values(b):[]};f.size=function(b){return null==b?0:G(b)?b.length:f.keys(b).length};
f.partition=function(b,a,c){a=C(a,c);var d=[],g=[];return f.each(b,function(b,c,z){(a(b,c,z)?d:g).push(b)}),[d,g]};f.first=f.head=f.take=function(b,a,c){return null==b?void 0:null==a||c?b[0]:f.initial(b,b.length-a)};f.initial=function(b,a,c){return u.call(b,0,Math.max(0,b.length-(null==a||c?1:a)))};f.last=function(b,a,c){return null==b?void 0:null==a||c?b[b.length-1]:f.rest(b,Math.max(0,b.length-a))};f.rest=f.tail=f.drop=function(b,a,c){return u.call(b,null==a||c?1:a)};f.compact=function(b){return f.filter(b,
f.identity)};var H=function(b,a,c,d){var g=[],e=0;d=d||0;for(var h=I(b);h>d;d++){var l=b[d];if(G(l)&&(f.isArray(l)||f.isArguments(l))){a||(l=H(l,a,c));var n=0,k=l.length;for(g.length+=k;k>n;)g[e++]=l[n++]}else c||(g[e++]=l)}return g};f.flatten=function(b,a){return H(b,a,!1)};f.without=function(b){return f.difference(b,u.call(arguments,1))};f.uniq=f.unique=function(b,a,c,d){f.isBoolean(a)||(d=c,c=a,a=!1);null!=c&&(c=C(c,d));d=[];for(var g=[],e=0,h=I(b);h>e;e++){var l=b[e],n=c?c(l,e,b):l;a?(e&&g===
n||d.push(l),g=n):c?f.contains(g,n)||(g.push(n),d.push(l)):f.contains(d,l)||d.push(l)}return d};f.union=function(){return f.uniq(H(arguments,!0,!0))};f.intersection=function(b){for(var a=[],c=arguments.length,d=0,g=I(b);g>d;d++){var e=b[d];if(!f.contains(a,e)){for(var h=1;c>h&&f.contains(arguments[h],e);h++);h===c&&a.push(e)}}return a};f.difference=function(b){var a=H(arguments,!0,!0,1);return f.filter(b,function(b){return!f.contains(a,b)})};f.zip=function(){return f.unzip(arguments)};f.unzip=function(b){for(var a=
b&&f.max(b,I).length||0,c=Array(a),d=0;a>d;d++)c[d]=f.pluck(b,d);return c};f.object=function(b,a){for(var c={},d=0,g=I(b);g>d;d++)a?c[b[d]]=a[d]:c[b[d][0]]=b[d][1];return c};f.findIndex=c(1);f.findLastIndex=c(-1);f.sortedIndex=function(b,a,c,d){c=C(c,d,1);a=c(a);d=0;for(var g=I(b);g>d;){var f=Math.floor((d+g)/2);c(b[f])<a?d=f+1:g=f}return d};f.indexOf=a(1,f.findIndex,f.sortedIndex);f.lastIndexOf=a(-1,f.findLastIndex);f.range=function(b,a,c){null==a&&(a=b||0,b=0);c=c||1;a=Math.max(Math.ceil((a-b)/
c),0);for(var d=Array(a),g=0;a>g;g++,b+=c)d[g]=b;return d};var ka=function(b,a,c,d,g){if(!(d instanceof a))return b.apply(c,g);a=R(b.prototype);b=b.apply(a,g);return f.isObject(b)?b:a};f.bind=function(b,a){if(L&&b.bind===L)return L.apply(b,u.call(arguments,1));if(!f.isFunction(b))throw new TypeError("Bind must be called on a function");var c=u.call(arguments,2),d=function(){return ka(b,d,a,this,c.concat(u.call(arguments)))};return d};f.partial=function(b){var a=u.call(arguments,1),c=function(){for(var d=
0,g=a.length,e=Array(g),h=0;g>h;h++)e[h]=a[h]===f?arguments[d++]:a[h];for(;d<arguments.length;)e.push(arguments[d++]);return ka(b,c,this,this,e)};return c};f.bindAll=function(b){var a,c,d=arguments.length;if(1>=d)throw Error("bindAll must be passed function names");for(a=1;d>a;a++)c=arguments[a],b[c]=f.bind(b[c],b);return b};f.memoize=function(b,a){var c=function(d){var g=c.cache,e=""+(a?a.apply(this,arguments):d);return f.has(g,e)||(g[e]=b.apply(this,arguments)),g[e]};return c.cache={},c};f.delay=
function(b,a){var c=u.call(arguments,2);return setTimeout(function(){return b.apply(null,c)},a)};f.defer=f.partial(f.delay,f,1);f.throttle=function(b,a,c){var d,g,e,h=null,l=0;c||(c={});var n=function(){l=!1===c.leading?0:f.now();h=null;e=b.apply(d,g);h||(d=g=null)};return function(){var k=f.now();l||!1!==c.leading||(l=k);var q=a-(k-l);return d=this,g=arguments,0>=q||q>a?(h&&(clearTimeout(h),h=null),l=k,e=b.apply(d,g),h||(d=g=null)):h||!1===c.trailing||(h=setTimeout(n,q)),e}};f.debounce=function(b,
a,c){var d,g,e,h,l,n=function(){var k=f.now()-h;a>k&&0<=k?d=setTimeout(n,a-k):(d=null,c||(l=b.apply(e,g),d||(e=g=null)))};return function(){e=this;g=arguments;h=f.now();var k=c&&!d;return d||(d=setTimeout(n,a)),k&&(l=b.apply(e,g),e=g=null),l}};f.wrap=function(b,a){return f.partial(a,b)};f.negate=function(b){return function(){return!b.apply(this,arguments)}};f.compose=function(){var b=arguments,a=b.length-1;return function(){for(var c=a,d=b[a].apply(this,arguments);c--;)d=b[c].call(this,d);return d}};
f.after=function(b,a){return function(){return 1>--b?a.apply(this,arguments):void 0}};f.before=function(b,a){var c;return function(){return 0<--b&&(c=a.apply(this,arguments)),1>=b&&(a=null),c}};f.once=f.partial(f.before,2);var fa=!{toString:null}.propertyIsEnumerable("toString"),da="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");f.keys=function(b){if(!f.isObject(b))return[];if(ja)return ja(b);var a=[],c;for(c in b)f.has(b,c)&&a.push(c);return fa&&d(b,
a),a};f.allKeys=function(b){if(!f.isObject(b))return[];var a=[],c;for(c in b)a.push(c);return fa&&d(b,a),a};f.values=function(b){for(var a=f.keys(b),c=a.length,d=Array(c),g=0;c>g;g++)d[g]=b[a[g]];return d};f.mapObject=function(b,a,c){a=C(a,c);for(var d=f.keys(b),g=d.length,e={},h=0;g>h;h++)c=d[h],e[c]=a(b[c],c,b);return e};f.pairs=function(b){for(var a=f.keys(b),c=a.length,d=Array(c),g=0;c>g;g++)d[g]=[a[g],b[a[g]]];return d};f.invert=function(b){for(var a={},c=f.keys(b),d=0,g=c.length;g>d;d++)a[b[c[d]]]=
c[d];return a};f.functions=f.methods=function(b){var a=[],c;for(c in b)f.isFunction(b[c])&&a.push(c);return a.sort()};f.extend=N(f.allKeys);f.extendOwn=f.assign=N(f.keys);f.findKey=function(b,a,c){a=C(a,c);var d;c=f.keys(b);for(var g=0,e=c.length;e>g;g++)if(d=c[g],a(b[d],d,b))return d};f.pick=function(b,a,c){var d,g,e={},h=b;if(null==h)return e;f.isFunction(a)?(g=f.allKeys(h),d=O(a,c)):(g=H(arguments,!1,!1,1),d=function(b,a,c){return a in c},h=Object(h));for(var l=0,n=g.length;n>l;l++){var k=g[l],
q=h[k];d(q,k,h)&&(e[k]=q)}return e};f.omit=function(b,a,c){if(f.isFunction(a))a=f.negate(a);else{var d=f.map(H(arguments,!1,!1,1),String);a=function(b,a){return!f.contains(d,a)}}return f.pick(b,a,c)};f.defaults=N(f.allKeys,!0);f.create=function(b,a){var c=R(b);return a&&f.extendOwn(c,a),c};f.clone=function(b){return f.isObject(b)?f.isArray(b)?b.slice():f.extend({},b):b};f.tap=function(b,a){return a(b),b};f.isMatch=function(b,a){var c=f.keys(a),d=c.length;if(null==b)return!d;for(var g=Object(b),e=
0;d>e;e++){var h=c[e];if(a[h]!==g[h]||!(h in g))return!1}return!0};var ca=function(b,a,c,d){if(b===a)return 0!==b||1/b===1/a;if(null==b||null==a)return b===a;b instanceof f&&(b=b._wrapped);a instanceof f&&(a=a._wrapped);var g=y.call(b);if(g!==y.call(a))return!1;switch(g){case "[object RegExp]":case "[object String]":return""+b==""+a;case "[object Number]":return+b!==+b?+a!==+a:0===+b?1/+b===1/a:+b===+a;case "[object Date]":case "[object Boolean]":return+b===+a}g="[object Array]"===g;if(!g){if("object"!=
typeof b||"object"!=typeof a)return!1;var e=b.constructor,h=a.constructor;if(e!==h&&!(f.isFunction(e)&&e instanceof e&&f.isFunction(h)&&h instanceof h)&&"constructor"in b&&"constructor"in a)return!1}c=c||[];d=d||[];for(e=c.length;e--;)if(c[e]===b)return d[e]===a;if(c.push(b),d.push(a),g){if(e=b.length,e!==a.length)return!1;for(;e--;)if(!ca(b[e],a[e],c,d))return!1}else{var l,g=f.keys(b);if(e=g.length,f.keys(a).length!==e)return!1;for(;e--;)if(l=g[e],!f.has(a,l)||!ca(b[l],a[l],c,d))return!1}return c.pop(),
d.pop(),!0};f.isEqual=function(b,a){return ca(b,a)};f.isEmpty=function(b){return null==b?!0:G(b)&&(f.isArray(b)||f.isString(b)||f.isArguments(b))?0===b.length:0===f.keys(b).length};f.isElement=function(b){return!(!b||1!==b.nodeType)};f.isArray=ba||function(b){return"[object Array]"===y.call(b)};f.isObject=function(b){var a=typeof b;return"function"===a||"object"===a&&!!b};f.each("Arguments Function String Number Date RegExp Error".split(" "),function(b){f["is"+b]=function(a){return y.call(a)==="[object "+
b+"]"}});f.isArguments(arguments)||(f.isArguments=function(b){return f.has(b,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(f.isFunction=function(b){return"function"==typeof b||!1});f.isFinite=function(b){return isFinite(b)&&!isNaN(parseFloat(b))};f.isNaN=function(b){return f.isNumber(b)&&b!==+b};f.isBoolean=function(b){return!0===b||!1===b||"[object Boolean]"===y.call(b)};f.isNull=function(b){return null===b};f.isUndefined=function(b){return void 0===b};f.has=function(b,a){return null!=
b&&P.call(b,a)};f.noConflict=function(){return l._=n,this};f.identity=function(b){return b};f.constant=function(b){return function(){return b}};f.noop=function(){};f.property=J;f.propertyOf=function(b){return null==b?function(){}:function(a){return b[a]}};f.matcher=f.matches=function(b){return b=f.extendOwn({},b),function(a){return f.isMatch(a,b)}};f.times=function(b,a,c){var d=Array(Math.max(0,b));a=O(a,c,1);for(c=0;b>c;c++)d[c]=a(c);return d};f.random=function(b,a){return null==a&&(a=b,b=0),b+Math.floor(Math.random()*
(a-b+1))};f.now=Date.now||function(){return(new Date).getTime()};ba={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};N=f.invert(ba);J=function(b){var a=function(a){return b[a]},c="(?:"+f.keys(b).join("|")+")",d=RegExp(c),g=RegExp(c,"g");return function(b){return b=null==b?"":""+b,d.test(b)?b.replace(g,a):b}};f.escape=J(ba);f.unescape=J(N);f.result=function(b,a,c){a=null==b?void 0:b[a];return void 0===a&&(a=c),f.isFunction(a)?a.call(b):a};var S=0;f.uniqueId=function(b){var a=
++S+"";return b?b+a:a};f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},b=/\\|'|\r|\n|\u2028|\u2029/g,g=function(b){return"\\"+W[b]};f.template=function(a,c,d){!c&&d&&(c=d);c=f.defaults({},c,f.templateSettings);d=RegExp([(c.escape||V).source,(c.interpolate||V).source,(c.evaluate||V).source].join("|")+"|$","g");var e=0,h="__p+='";a.replace(d,function(c,d,f,
l,n){return h+=a.slice(e,n).replace(b,g),e=n+c.length,d?h+="'+\n((__t=("+d+"))==null?'':_.escape(__t))+\n'":f?h+="'+\n((__t=("+f+"))==null?'':__t)+\n'":l&&(h+="';\n"+l+"\n__p+='"),c});h+="';\n";c.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{var l=new Function(c.variable||"obj","_",h)}catch(n){throw n.source=h,n;}d=function(b){return l.call(this,b,f)};return d.source="function("+(c.variable||
"obj")+"){\n"+h+"}",d};f.chain=function(b){b=f(b);return b._chain=!0,b};var h=function(b,a){return b._chain?f(a).chain():a};f.mixin=function(b){f.each(f.functions(b),function(a){var c=f[a]=b[a];f.prototype[a]=function(){var b=[this._wrapped];return v.apply(b,arguments),h(this,c.apply(f,b))}})};f.mixin(f);f.each("pop push reverse shift sort splice unshift".split(" "),function(b){var a=q[b];f.prototype[b]=function(){var c=this._wrapped;return a.apply(c,arguments),"shift"!==b&&"splice"!==b||0!==c.length||
delete c[0],h(this,c)}});f.each(["concat","join","slice"],function(b){var a=q[b];f.prototype[b]=function(){return h(this,a.apply(this._wrapped,arguments))}});f.prototype.value=function(){return this._wrapped};f.prototype.valueOf=f.prototype.toJSON=f.prototype.value;f.prototype.toString=function(){return""+this._wrapped};"function"==typeof define&&define.amd&&define("underscore",[],function(){return f})}).call(this);(function(){function e(c,a,d){this.maxSize_=c||-1;this.debug_=a||!1;this.storage_=d||new e.BasicCacheStorage;this.fillFactor_=.75;this.stats_={};this.stats_.hits=0;this.stats_.misses=0;this.log_("Initialized cache with size "+c)}e.Priority={LOW:1,NORMAL:2,HIGH:4};e.BasicCacheStorage=function(){this.items_={};this.count_=0};e.BasicCacheStorage.prototype.get=function(c){return this.items_[c]};e.BasicCacheStorage.prototype.set=function(c,a){"undefined"===typeof this.get(c)&&this.count_++;this.items_[c]=
a};e.BasicCacheStorage.prototype.size=function(c,a){return this.count_};e.BasicCacheStorage.prototype.remove=function(c){var a=this.get(c);"undefined"!==typeof a&&this.count_--;delete this.items_[c];return a};e.BasicCacheStorage.prototype.keys=function(){var c=[],a;for(a in this.items_)c.push(a);return c};e.LocalStorageCacheStorage=function(c){this.prefix_="cache-storage."+(c||"default")+".";c=this.prefix_.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");this.regexp_=new RegExp("^"+c)};e.LocalStorageCacheStorage.prototype.get=
function(c){return(c=window.localStorage[this.prefix_+c])?JSON.parse(c):null};e.LocalStorageCacheStorage.prototype.set=function(c,a){window.localStorage[this.prefix_+c]=JSON.stringify(a)};e.LocalStorageCacheStorage.prototype.size=function(c,a){return this.keys().length};e.LocalStorageCacheStorage.prototype.remove=function(c){var a=this.get(c);delete window.localStorage[this.prefix_+c];return a};e.LocalStorageCacheStorage.prototype.keys=function(){var c=[],a;for(a in window.localStorage)a.match(this.regexp_)&&
c.push(a.replace(this.prefix_,""));return c};e.prototype.getItem=function(c){var a=this.storage_.get(c);null!=a&&(this.isExpired_(a)?(this.removeItem(c),a=null):a.lastAccessed=(new Date).getTime());(a=a?a.value:null)?(this.stats_.hits++,this.log_("Cache HIT for key "+c)):(this.stats_.misses++,this.log_("Cache MISS for key "+c));return a};e._CacheItem=function(c,a,d){if(!c)throw Error("key cannot be null or empty");this.key=c;this.value=a;d=d||{};d.expirationAbsolute&&(d.expirationAbsolute=d.expirationAbsolute.getTime());
d.priority||(d.priority=e.Priority.NORMAL);this.options=d;this.lastAccessed=(new Date).getTime()};e.prototype.setItem=function(c,a,d){null!=this.storage_.get(c)&&this.removeItem(c);this.addItem_(new e._CacheItem(c,a,d));this.log_("Setting key "+c);if(0<this.maxSize_&&this.size()>this.maxSize_){var l=this;setTimeout(function(){l.purge_.call(l)},0)}};e.prototype.clear=function(){for(var c=this.storage_.keys(),a=0;a<c.length;a++)this.removeItem(c[a]);this.log_("Cache cleared")};e.prototype.getStats=
function(){return this.stats_};e.prototype.toHtmlString=function(){for(var c=this.size()+" item(s) in cache<br /><ul>",a=this.storage_.keys(),d=0;d<a.length;d++)var e=this.storage_.get(a[d]),c=c+"<li>"+e.key.toString()+" = "+e.value.toString()+"</li>";return c+"</ul>"};e.prototype.resize=function(c){this.log_("Resizing Cache from "+this.maxSize_+" to "+c);var a=this.maxSize_;this.maxSize_=c;0<c&&(0>a||c<a)&&this.size()>c&&this.purge_();this.log_("Resizing done")};e.prototype.purge_=function(){var c=
[],a=Math.round(this.maxSize_*this.fillFactor_);0>this.maxSize_&&(a=this.size()*this.fillFactor_);for(var d=this.storage_.keys(),e=0;e<d.length;e++){var n=d[e],q=this.storage_.get(n);this.isExpired_(q)?this.removeItem(n):c.push(q)}if(c.length>a)for(c=c.sort(function(a,c){return a.options.priority!=c.options.priority?c.options.priority-a.options.priority:c.lastAccessed-a.lastAccessed});c.length>a;)d=c.pop(),this.removeItem(d.key);this.log_("Purged cached")};e.prototype.addItem_=function(c,a){try{this.storage_.set(c.key,
c)}catch(d){if(a)throw this.log_("Failed setting again, giving up: "+d.toString()),d;this.log_("Error adding item, purging and trying again: "+d.toString());this.purge_();this.addItem_(c,!0)}};e.prototype.removeItem=function(c){var a=this.storage_.remove(c);this.log_("removed key "+c);a&&a.options&&a.options.callback&&setTimeout(function(){a.options.callback.call(null,a.key,a.value)},0);return a?a.value:null};e.prototype.removeWhere=function(c){for(var a=this.storage_.keys(),d=0;d<a.length;d++){var e=
a[d],n=this.storage_.get(e);!0===c(e,n.value)&&this.removeItem(e)}};e.prototype.size=function(){return this.storage_.size()};e.prototype.isExpired_=function(c){var a=(new Date).getTime(),d=!1;c.options.expirationAbsolute&&c.options.expirationAbsolute<a&&(d=!0);!d&&c.options.expirationSliding&&c.lastAccessed+1E3*c.options.expirationSliding<a&&(d=!0);return d};e.prototype.log_=function(c){this.debug_&&console.log(c)};"undefined"!==typeof module&&module.exports?module.exports=e:"function"==typeof define&&
define.amd?define(function(){return e}):this.Cache=e})();(function(){var e=this,c=e.Chart,a=function(b){this.canvas=b.canvas;this.ctx=b;var a=function(b,a){return b["offset"+a]?b["offset"+a]:document.defaultView.getComputedStyle(b).getPropertyValue(a)},c=this.width=a(b.canvas,"Width"),a=this.height=a(b.canvas,"Height");b.canvas.width=c;b.canvas.height=a;c=this.width=b.canvas.width;a=this.height=b.canvas.height;return this.aspectRatio=this.width/this.height,d.retinaScale(this),this};a.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",
showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",
tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",
onAnimationProgress:function(){},onAnimationComplete:function(){}}};a.types={};var d=a.helpers={},l=d.each=function(b,a,c){var d=Array.prototype.slice.call(arguments,3);if(b)if(b.length===+b.length){var e;for(e=0;e<b.length;e++)a.apply(c,[b[e],e].concat(d))}else for(e in b)a.apply(c,[b[e],e].concat(d))},n=d.clone=function(b){var a={};return l(b,function(c,d){b.hasOwnProperty(d)&&(a[d]=c)}),a},q=d.extend=function(b){return l(Array.prototype.slice.call(arguments,1),function(a){l(a,function(c,d){a.hasOwnProperty(d)&&
(b[d]=c)})}),b},k=d.merge=function(){var b=Array.prototype.slice.call(arguments,0);return b.unshift({}),q.apply(null,b)},v=d.indexOf=function(b,a){if(Array.prototype.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(b[c]===a)return c;return-1},u=(d.where=function(b,a){var c=[];return d.each(b,function(b){a(b)&&c.push(b)}),c},d.findNextWhere=function(b,a,c){c||(c=-1);for(c+=1;c<b.length;c++){var d=b[c];if(a(d))return d}},d.findPreviousWhere=function(b,a,c){c||(c=b.length);for(--c;0<=c;c--){var d=
b[c];if(a(d))return d}},d.inherits=function(b){var a=this,c=b&&b.hasOwnProperty("constructor")?b.constructor:function(){return a.apply(this,arguments)},d=function(){this.constructor=c};return d.prototype=a.prototype,c.prototype=new d,c.extend=u,b&&q(c.prototype,b),c.__super__=a.prototype,c}),y=d.noop=function(){},P=d.uid=function(){var b=0;return function(){return"chart-"+b++}}(),ba=d.warn=function(b){window.console&&"function"==typeof window.console.warn&&console.warn(b)},ja=d.amd="function"==typeof define&&
define.amd,L=d.isNumber=function(b){return!isNaN(parseFloat(b))&&isFinite(b)},T=d.max=function(b){return Math.max.apply(Math,b)},Q=d.min=function(b){return Math.min.apply(Math,b)},f=(d.cap=function(b,a,c){if(L(a)){if(b>a)return a}else if(L(c)&&c>b)return c;return b},d.getDecimalPlaces=function(b){return 0!==b%1&&L(b)?b.toString().split(".")[1].length:0}),O=d.radians=function(b){return Math.PI/180*b},C=(d.getAngleFromPoint=function(b,a){var c=a.x-b.x,d=a.y-b.y,e=Math.sqrt(c*c+d*d),f=2*Math.PI+Math.atan2(d,
c);return 0>c&&0>d&&(f+=2*Math.PI),{angle:f,distance:e}},d.aliasPixel=function(b){return 0===b%2?0:.5}),N=(d.splineCurve=function(b,a,c,d){var e=Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2)),f=Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2)),l=d*e/(e+f);d=d*f/(e+f);return{inner:{x:a.x-l*(c.x-b.x),y:a.y-l*(c.y-b.y)},outer:{x:a.x+d*(c.x-b.x),y:a.y+d*(c.y-b.y)}}},d.calculateOrderOfMagnitude=function(b){return Math.floor(Math.log(b)/Math.LN10)}),R=(d.calculateScaleRange=function(b,a,c,d,e){a=Math.floor(a/
(1.5*c));c=2>=a;var f=T(b),l=Q(b);f===l&&(f+=.5,.5<=l&&!d?l-=.5:f+=.5);b=N(Math.abs(f-l));d=d?0:Math.floor(l/(1*Math.pow(10,b)))*Math.pow(10,b);for(var f=Math.ceil(f/(1*Math.pow(10,b)))*Math.pow(10,b)-d,l=Math.pow(10,b),n=Math.round(f/l);(n>a||a>2*n)&&!c;)if(n>a)l*=2,n=Math.round(f/l),0!==n%1&&(c=!0);else{if(e&&0<=b&&0!==l/2%1)break;l/=2;n=Math.round(f/l)}return c&&(n=2,l=f/n),{steps:n,stepValue:l,min:d,max:d+n*l}},d.template=function(b,a){if(b instanceof Function)return b(a);var c={},c=/\W/.test(b)?
new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+b.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):c[b]=c[b];return a?c(a):c}),J=(d.generateLabels=function(b,a,c,d){var e=Array(a);return labelTemplateString&&l(e,function(a,g){e[g]=R(b,{value:c+d*(g+1)})}),e},d.easingEffects={linear:function(b){return b},
easeInQuad:function(b){return b*b},easeOutQuad:function(b){return-1*b*(b-2)},easeInOutQuad:function(b){return 1>(b/=.5)?.5*b*b:-.5*(--b*(b-2)-1)},easeInCubic:function(b){return b*b*b},easeOutCubic:function(b){return 1*((b=b/1-1)*b*b+1)},easeInOutCubic:function(b){return 1>(b/=.5)?.5*b*b*b:.5*((b-=2)*b*b+2)},easeInQuart:function(b){return b*b*b*b},easeOutQuart:function(b){return-1*((b=b/1-1)*b*b*b-1)},easeInOutQuart:function(b){return 1>(b/=.5)?.5*b*b*b*b:-.5*((b-=2)*b*b*b-2)},easeInQuint:function(b){return 1*
(b/=1)*b*b*b*b},easeOutQuint:function(b){return 1*((b=b/1-1)*b*b*b*b+1)},easeInOutQuint:function(b){return 1>(b/=.5)?.5*b*b*b*b*b:.5*((b-=2)*b*b*b*b+2)},easeInSine:function(b){return-1*Math.cos(b/1*(Math.PI/2))+1},easeOutSine:function(b){return 1*Math.sin(b/1*(Math.PI/2))},easeInOutSine:function(b){return-.5*(Math.cos(Math.PI*b/1)-1)},easeInExpo:function(b){return 0===b?1:1*Math.pow(2,10*(b/1-1))},easeOutExpo:function(b){return 1===b?1:1*(-Math.pow(2,-10*b/1)+1)},easeInOutExpo:function(b){return 0===
b?0:1===b?1:1>(b/=.5)?.5*Math.pow(2,10*(b-1)):.5*(-Math.pow(2,-10*--b)+2)},easeInCirc:function(b){return 1<=b?b:-1*(Math.sqrt(1-(b/=1)*b)-1)},easeOutCirc:function(b){return 1*Math.sqrt(1-(b=b/1-1)*b)},easeInOutCirc:function(b){return 1>(b/=.5)?-.5*(Math.sqrt(1-b*b)-1):.5*(Math.sqrt(1-(b-=2)*b)+1)},easeInElastic:function(b){var a=1.70158,c=0,d=1;return 0===b?0:1==(b/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,a=c/4):a=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*--b)*Math.sin(2*(1*b-a)*Math.PI/c)))},easeOutElastic:function(b){var a=
1.70158,c=0,d=1;return 0===b?0:1==(b/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,a=c/4):a=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*b)*Math.sin(2*(1*b-a)*Math.PI/c)+1)},easeInOutElastic:function(b){var a=1.70158,c=0,d=1;return 0===b?0:2==(b/=.5)?1:(c||(c=.3*1.5),d<Math.abs(1)?(d=1,a=c/4):a=c/(2*Math.PI)*Math.asin(1/d),1>b?-.5*d*Math.pow(2,10*--b)*Math.sin(2*(1*b-a)*Math.PI/c):d*Math.pow(2,-10*--b)*Math.sin(2*(1*b-a)*Math.PI/c)*.5+1)},easeInBack:function(b){return 1*(b/=1)*b*(2.70158*b-1.70158)},easeOutBack:function(b){return 1*
((b=b/1-1)*b*(2.70158*b+1.70158)+1)},easeInOutBack:function(b){var a=1.70158;return 1>(b/=.5)?.5*b*b*(((a*=1.525)+1)*b-a):.5*((b-=2)*b*(((a*=1.525)+1)*b+a)+2)},easeInBounce:function(b){return 1-J.easeOutBounce(1-b)},easeOutBounce:function(b){return(b/=1)<1/2.75?7.5625*b*b:2/2.75>b?1*(7.5625*(b-=1.5/2.75)*b+.75):2.5/2.75>b?1*(7.5625*(b-=2.25/2.75)*b+.9375):1*(7.5625*(b-=2.625/2.75)*b+.984375)},easeInOutBounce:function(b){return.5>b?.5*J.easeInBounce(2*b):.5*J.easeOutBounce(2*b-1)+.5}}),M=d.requestAnimFrame=
function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){return window.setTimeout(b,1E3/60)}}(),I=d.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(b){return window.clearTimeout(b,1E3/60)}}(),G=(d.animationLoop=function(b,
a,c,d,e,f){var l=0,n=J[c]||J.linear,k=function(){l++;var c=l/a,h=n(c);b.call(f,h,c,l);d.call(f,h,c);a>l?f.animationFrame=M(k):e.apply(f)};M(k)},d.getRelativePosition=function(b){var a,c,d=b.originalEvent||b;b=(b.currentTarget||b.srcElement).getBoundingClientRect();return d.touches?(a=d.touches[0].clientX-b.left,c=d.touches[0].clientY-b.top):(a=d.clientX-b.left,c=d.clientY-b.top),{x:a,y:c}},d.addEvent=function(b,a,c){b.addEventListener?b.addEventListener(a,c):b.attachEvent?b.attachEvent("on"+a,c):
b["on"+a]=c}),ea=d.removeEvent=function(b,a,c){b.removeEventListener?b.removeEventListener(a,c,!1):b.detachEvent?b.detachEvent("on"+a,c):b["on"+a]=y},H=(d.bindEvents=function(b,a,c){b.events||(b.events={});l(a,function(a){b.events[a]=function(){c.apply(b,arguments)};G(b.chart.canvas,a,b.events[a])})},d.unbindEvents=function(b,a){l(a,function(a,c){ea(b.chart.canvas,c,a)})}),ka=d.getMaximumWidth=function(b){return b.parentNode.clientWidth},fa=d.getMaximumHeight=function(b){return b.parentNode.clientHeight},
da=(d.getMaximumSize=d.getMaximumWidth,d.retinaScale=function(b){var a=b.ctx,c=b.canvas.width;b=b.canvas.height;window.devicePixelRatio&&(a.canvas.style.width=c+"px",a.canvas.style.height=b+"px",a.canvas.height=b*window.devicePixelRatio,a.canvas.width=c*window.devicePixelRatio,a.scale(window.devicePixelRatio,window.devicePixelRatio))}),ca=d.clear=function(b){b.ctx.clearRect(0,0,b.width,b.height)},S=d.fontString=function(b,a,c){return a+" "+b+"px "+c},V=d.longestText=function(b,a,c){b.font=a;var d=
0;return l(c,function(a){a=b.measureText(a).width;d=a>d?a:d}),d},W=d.drawRoundedRectangle=function(b,a,c,d,e,f){b.beginPath();b.moveTo(a+f,c);b.lineTo(a+d-f,c);b.quadraticCurveTo(a+d,c,a+d,c+f);b.lineTo(a+d,c+e-f);b.quadraticCurveTo(a+d,c+e,a+d-f,c+e);b.lineTo(a+f,c+e);b.quadraticCurveTo(a,c+e,a,c+e-f);b.lineTo(a,c+f);b.quadraticCurveTo(a,c,a+f,c);b.closePath()};a.instances={};a.Type=function(b,c,d){this.options=c;this.chart=d;this.id=P();a.instances[this.id]=this;c.responsive&&this.resize();this.initialize.call(this,
b)};q(a.Type.prototype,{initialize:function(){return this},clear:function(){return ca(this.chart),this},stop:function(){return I(this.animationFrame),this},resize:function(b){this.stop();var a=this.chart.canvas,c=ka(this.chart.canvas),d=this.options.maintainAspectRatio?c/this.chart.aspectRatio:fa(this.chart.canvas);return a.width=this.chart.width=c,a.height=this.chart.height=d,da(this.chart),"function"==typeof b&&b.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:y,render:function(b){return b&&
this.reflow(),this.options.animation&&!b?d.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return R(this.options.legendTemplate,this)},destroy:function(){this.clear();H(this,this.events);var b=this.chart.canvas;b.width=this.chart.width;b.height=this.chart.height;b.style.removeProperty?(b.style.removeProperty("width"),
b.style.removeProperty("height")):(b.style.removeAttribute("width"),b.style.removeAttribute("height"));delete a.instances[this.id]},showTooltip:function(b,c){"undefined"==typeof this.activeElements&&(this.activeElements=[]);if(function(b){var a=!1;return b.length!==this.activeElements.length?a=!0:(l(b,function(b,c){b!==this.activeElements[c]&&(a=!0)},this),a)}.call(this,b)||c){if(this.activeElements=b,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),0<b.length)if(this.datasets&&
1<this.datasets.length){for(var e,f,n=this.datasets.length-1;0<=n&&(e=this.datasets[n].points||this.datasets[n].bars||this.datasets[n].segments,f=v(e,b[0]),-1===f);n--);var k=[],q=[];e=function(){var b,a,c,e,g,l=[],n=[],h=[];return d.each(this.datasets,function(a){b=a.points||a.bars||a.segments;b[f]&&b[f].hasValue()&&l.push(b[f])}),d.each(l,function(b){n.push(b.x);h.push(b.y);k.push(d.template(this.options.multiTooltipTemplate,b));q.push({fill:b._saved.fillColor||b.fillColor,stroke:b._saved.strokeColor||
b.strokeColor})},this),g=Q(h),c=T(h),e=Q(n),a=T(n),{x:e>this.chart.width/2?e:a,y:(g+c)/2}}.call(this,f);(new a.MultiTooltip({x:e.x,y:e.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,
titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:k,legendColors:q,legendColorBackground:this.options.multiTooltipKeyBackground,title:b[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips})).draw()}else l(b,function(b){var c=b.tooltipPosition();(new a.Tooltip({x:Math.round(c.x),y:Math.round(c.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,
fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:R(this.options.tooltipTemplate,b),chart:this.chart,custom:this.options.customTooltips})).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}});
a.Type.extend=function(b){var c=this,d=function(){return c.apply(this,arguments)};if(d.prototype=n(c.prototype),q(d.prototype,b),d.extend=a.Type.extend,b.name||c.prototype.name){var e=b.name||c.prototype.name,f=a.defaults[c.prototype.name]?n(a.defaults[c.prototype.name]):{};a.defaults[e]=q(f,b.defaults);a.types[e]=d;a.prototype[e]=function(b,c){var f=k(a.defaults.global,a.defaults[e],c||{});return new d(b,f,this)}}else ba("Name not provided for this chart, so it hasn't been registered");return c};
a.Element=function(b){q(this,b);this.initialize.apply(this,arguments);this.save()};q(a.Element.prototype,{initialize:function(){},restore:function(b){return b?l(b,function(b){this[b]=this._saved[b]},this):q(this,this._saved),this},save:function(){return this._saved=n(this),delete this._saved._saved,this},update:function(b){return l(b,function(b,a){this._saved[a]=this[a];this[a]=b},this),this},transition:function(b,a){return l(b,function(b,c){this[c]=(b-this._saved[c])*a+this._saved[c]},this),this},
tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return L(this.value)}});a.Element.extend=u;a.Point=a.Element.extend({display:!0,inRange:function(b,a){return Math.pow(b-this.x,2)+Math.pow(a-this.y,2)<Math.pow(this.hitDetectionRadius+this.radius,2)},draw:function(){if(this.display){var b=this.ctx;b.beginPath();b.arc(this.x,this.y,this.radius,0,2*Math.PI);b.closePath();b.strokeStyle=this.strokeColor;b.lineWidth=this.strokeWidth;b.fillStyle=this.fillColor;b.fill();b.stroke()}}});
a.Arc=a.Element.extend({inRange:function(b,a){var c=d.getAngleFromPoint(this,{x:b,y:a}),e=c.distance>=this.innerRadius&&c.distance<=this.outerRadius;return c.angle>=this.startAngle&&c.angle<=this.endAngle&&e},tooltipPosition:function(){var b=this.startAngle+(this.endAngle-this.startAngle)/2,a=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(b)*a,y:this.y+Math.sin(b)*a}},draw:function(b){b=this.ctx;b.beginPath();b.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle);
b.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0);b.closePath();b.strokeStyle=this.strokeColor;b.lineWidth=this.strokeWidth;b.fillStyle=this.fillColor;b.fill();b.lineJoin="bevel";this.showStroke&&b.stroke()}});a.Rectangle=a.Element.extend({draw:function(){var b=this.ctx,a=this.width/2,c=this.x-a,a=this.x+a,d=this.base-(this.base-this.y),e=this.strokeWidth/2;this.showStroke&&(c+=e,a-=e,d+=e);b.beginPath();b.fillStyle=this.fillColor;b.strokeStyle=this.strokeColor;b.lineWidth=this.strokeWidth;
b.moveTo(c,this.base);b.lineTo(c,d);b.lineTo(a,d);b.lineTo(a,this.base);b.fill();this.showStroke&&b.stroke()},height:function(){return this.base-this.y},inRange:function(b,a){return b>=this.x-this.width/2&&b<=this.x+this.width/2&&a>=this.y&&a<=this.base}});a.Tooltip=a.Element.extend({draw:function(){var b=this.chart.ctx;b.font=S(this.fontSize,this.fontStyle,this.fontFamily);this.xAlign="center";this.yAlign="above";var a=this.caretPadding=2,c=b.measureText(this.text).width+2*this.xPadding,d=this.fontSize+
2*this.yPadding,e=d+this.caretHeight+a;this.x+c/2>this.chart.width?this.xAlign="left":0>this.x-c/2&&(this.xAlign="right");0>this.y-e&&(this.yAlign="below");var f=this.x-c/2,e=this.y-e;if(b.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case "above":b.beginPath();b.moveTo(this.x,this.y-a);b.lineTo(this.x+this.caretHeight,this.y-(a+this.caretHeight));b.lineTo(this.x-this.caretHeight,this.y-(a+this.caretHeight));b.closePath();b.fill();break;case "below":e=this.y+a+this.caretHeight,
b.beginPath(),b.moveTo(this.x,this.y+a),b.lineTo(this.x+this.caretHeight,this.y+a+this.caretHeight),b.lineTo(this.x-this.caretHeight,this.y+a+this.caretHeight),b.closePath(),b.fill()}switch(this.xAlign){case "left":f=this.x-c+(this.cornerRadius+this.caretHeight);break;case "right":f=this.x-(this.cornerRadius+this.caretHeight)}W(b,f,e,c,d,this.cornerRadius);b.fill();b.fillStyle=this.textColor;b.textAlign="center";b.textBaseline="middle";b.fillText(this.text,f+c/2,e+d/2)}}});a.MultiTooltip=a.Element.extend({initialize:function(){this.font=
S(this.fontSize,this.fontStyle,this.fontFamily);this.titleFont=S(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);this.height=this.labels.length*this.fontSize+this.fontSize/2*(this.labels.length-1)+2*this.yPadding+1.5*this.titleFontSize;this.ctx.font=this.titleFont;var b=this.ctx.measureText(this.title).width,a=V(this.ctx,this.font,this.labels)+this.fontSize+3;this.width=T([a,b])+2*this.xPadding;b=this.height/2;0>this.y-b?this.y=b:this.y+b>this.chart.height&&(this.y=this.chart.height-
b);this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(b){var a=this.y-this.height/2+this.yPadding;return 0===b?a+this.titleFontSize/2:a+(1.5*this.fontSize*(b-1)+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{W(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var b=this.ctx;b.fillStyle=this.fillColor;b.fill();b.closePath();b.textAlign="left";b.textBaseline="middle";b.fillStyle=
this.titleTextColor;b.font=this.titleFont;b.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0));b.font=this.font;d.each(this.labels,function(a,c){b.fillStyle=this.textColor;b.fillText(a,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(c+1));b.fillStyle=this.legendColorBackground;b.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/2,this.fontSize,this.fontSize);b.fillStyle=this.legendColors[c].fill;b.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/
2,this.fontSize,this.fontSize)},this)}}});a.Scale=a.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var b=f(this.stepValue),a=0;a<=this.steps;a++)this.yLabels.push(R(this.templateString,{value:(this.min+a*this.stepValue).toFixed(b)}));this.yLabelWidth=this.display&&this.showLabels?V(this.ctx,this.font,this.yLabels):0},addXLabel:function(b){this.xLabels.push(b);this.valuesCount++;this.fit()},removeXLabel:function(){this.xLabels.shift();this.valuesCount--;
this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0;this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height;this.startPoint+=this.padding;this.endPoint-=this.padding;var b,a=this.endPoint-this.startPoint;this.calculateYRange(a);this.buildYLabels();for(this.calculateXLabelRotation();a>this.endPoint-this.startPoint;)a=this.endPoint-this.startPoint,b=this.yLabelWidth,this.calculateYRange(a),this.buildYLabels(),b<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=
this.font;var b,a=this.ctx.measureText(this.xLabels[0]).width;if(this.xScalePaddingRight=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width/2+3,this.xScalePaddingLeft=a/2>this.yLabelWidth+10?a/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var c,d=V(this.ctx,this.font,this.xLabels);this.xLabelWidth=d;for(var e=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>e&&0===this.xLabelRotation||this.xLabelWidth>e&&90>=this.xLabelRotation&&0<this.xLabelRotation;)c=
Math.cos(O(this.xLabelRotation)),b=c*a,b+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=b+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=c*d;0<this.xLabelRotation&&(this.endPoint-=Math.sin(O(this.xLabelRotation))*d+3)}else this.xLabelWidth=0,this.xScalePaddingLeft=this.xScalePaddingRight=this.padding},calculateYRange:y,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(b){var a=this.drawingArea()/(this.min-
this.max);return this.endPoint-a*(b-this.min)},calculateX:function(b){var a=(0<this.xLabelRotation,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight))/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1);b=a*b+this.xScalePaddingLeft;return this.offsetGridLines&&(b+=a/2),Math.round(b)},update:function(b){d.extend(this,b);this.fit()},draw:function(){var b=this.ctx,a=(this.endPoint-this.startPoint)/this.steps,c=Math.round(this.xScalePaddingLeft);this.display&&(b.fillStyle=this.textColor,
b.font=this.font,l(this.yLabels,function(e,f){var l=this.endPoint-a*f,n=Math.round(l),k=this.showHorizontalLines;b.textAlign="right";b.textBaseline="middle";this.showLabels&&b.fillText(e,c-10,l);0!==f||k||(k=!0);k&&b.beginPath();0<f?(b.lineWidth=this.gridLineWidth,b.strokeStyle=this.gridLineColor):(b.lineWidth=this.lineWidth,b.strokeStyle=this.lineColor);n+=d.aliasPixel(b.lineWidth);k&&(b.moveTo(c,n),b.lineTo(this.width,n),b.stroke(),b.closePath());b.lineWidth=this.lineWidth;b.strokeStyle=this.lineColor;
b.beginPath();b.moveTo(c-5,n);b.lineTo(c,n);b.stroke();b.closePath()},this),l(this.xLabels,function(a,c){var d=this.calculateX(c)+C(this.lineWidth),e=this.calculateX(c-(this.offsetGridLines?.5:0))+C(this.lineWidth),f=0<this.xLabelRotation,l=this.showVerticalLines;0!==c||l||(l=!0);l&&b.beginPath();0<c?(b.lineWidth=this.gridLineWidth,b.strokeStyle=this.gridLineColor):(b.lineWidth=this.lineWidth,b.strokeStyle=this.lineColor);l&&(b.moveTo(e,this.endPoint),b.lineTo(e,this.startPoint-3),b.stroke(),b.closePath());
b.lineWidth=this.lineWidth;b.strokeStyle=this.lineColor;b.beginPath();b.moveTo(e,this.endPoint);b.lineTo(e,this.endPoint+5);b.stroke();b.closePath();b.save();b.translate(d,f?this.endPoint+12:this.endPoint+8);b.rotate(-1*O(this.xLabelRotation));b.font=this.font;b.textAlign=f?"right":"center";b.textBaseline=f?"middle":"top";b.fillText(a,0,0);b.restore()},this))}});a.RadialScale=a.Element.extend({initialize:function(){this.size=Q([this.height,this.width]);this.drawingArea=this.display?this.size/2-(this.fontSize/
2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(b){return this.drawingArea/(this.max-this.min)*(b-this.min)},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize();this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var b=f(this.stepValue),a=0;a<=this.steps;a++)this.yLabels.push(R(this.templateString,{value:(this.min+a*this.stepValue).toFixed(b)}))},getCircumference:function(){return 2*
Math.PI/this.valuesCount},setScaleSize:function(){var b,a,c,d,e,f,l,n=Q([this.height/2-this.pointLabelFontSize-5,this.width/2]);l=this.width;var k=0;this.ctx.font=S(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);for(a=0;a<this.valuesCount;a++)b=this.getPointPosition(a,n),c=this.ctx.measureText(R(this.templateString,{value:this.labels[a]})).width+5,0===a||a===this.valuesCount/2?(d=c/2,b.x+d>l&&(l=b.x+d,e=a),b.x-d<k&&(k=b.x-d,f=a)):a<this.valuesCount/2?b.x+c>l&&(l=b.x+c,
e=a):a>this.valuesCount/2&&b.x-c<k&&(k=b.x-c,f=a);b=k;l=Math.ceil(l-this.width);e=this.getIndexAngle(e);f=this.getIndexAngle(f);e=l/Math.sin(e+Math.PI/2);f=b/Math.sin(f+Math.PI/2);e=L(e)?e:0;f=L(f)?f:0;this.drawingArea=n-(f+e)/2;this.setCenterPoint(f,e)},setCenterPoint:function(b,a){this.xCenter=(b+this.drawingArea+(this.width-a-this.drawingArea))/2;this.yCenter=this.height/2},getIndexAngle:function(b){return 2*Math.PI/this.valuesCount*b-Math.PI/2},getPointPosition:function(b,a){var c=this.getIndexAngle(b);
return{x:Math.cos(c)*a+this.xCenter,y:Math.sin(c)*a+this.yCenter}},draw:function(){if(this.display){var b=this.ctx;if(l(this.yLabels,function(a,c){if(0<c){var d;d=this.drawingArea/this.steps*c;var e=this.yCenter-d;if(0<this.lineWidth){if(b.strokeStyle=this.lineColor,b.lineWidth=this.lineWidth,this.lineArc)b.beginPath(),b.arc(this.xCenter,this.yCenter,d,0,2*Math.PI);else{b.beginPath();for(var f=0;f<this.valuesCount;f++)d=this.getPointPosition(f,this.calculateCenterOffset(this.min+c*this.stepValue)),
0===f?b.moveTo(d.x,d.y):b.lineTo(d.x,d.y)}b.closePath();b.stroke()}if(this.showLabels){if(b.font=S(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop)d=b.measureText(a).width,b.fillStyle=this.backdropColor,b.fillRect(this.xCenter-d/2-this.backdropPaddingX,e-this.fontSize/2-this.backdropPaddingY,d+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY);b.textAlign="center";b.textBaseline="middle";b.fillStyle=this.fontColor;b.fillText(a,this.xCenter,e)}}},this),!this.lineArc){b.lineWidth=
this.angleLineWidth;b.strokeStyle=this.angleLineColor;for(var a=this.valuesCount-1;0<=a;a--){if(0<this.angleLineWidth){var c=this.getPointPosition(a,this.calculateCenterOffset(this.max));b.beginPath();b.moveTo(this.xCenter,this.yCenter);b.lineTo(c.x,c.y);b.stroke();b.closePath()}c=this.getPointPosition(a,this.calculateCenterOffset(this.max)+5);b.font=S(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);b.fillStyle=this.pointLabelFontColor;var d=this.labels.length,e=this.labels.length/
2,f=e/2,n=f>a||a>d-f,d=a===f||a===d-f;b.textAlign=0===a?"center":a===e?"center":e>a?"left":"right";b.textBaseline=d?"middle":n?"bottom":"top";b.fillText(this.labels[a],c.x,c.y)}}}}});d.addEvent(window,"resize",function(){var b;return function(){clearTimeout(b);b=setTimeout(function(){l(a.instances,function(b){b.options.responsive&&b.resize(b.render,!0)})},50)}}());ja?define(function(){return a}):"object"==typeof module&&module.exports&&(module.exports=a);e.Chart=a;a.noConflict=function(){return e.Chart=
c,a}}).call(this);
(function(){var e=this.Chart,c=e.helpers;e.Type.extend({name:"Bar",defaults:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(a){var d=
this.options;this.ScaleClass=e.Scale.extend({offsetGridLines:!0,calculateBarX:function(a,c,e){var k=this.calculateBaseWidth();e=this.calculateX(e)-k/2;a=this.calculateBarWidth(a);return e+a*c+c*d.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*d.barValueSpacing},calculateBarWidth:function(a){return(this.calculateBaseWidth()-(a-1)*d.barDatasetSpacing)/a}});this.datasets=[];this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a=
"mouseout"!==a.type?this.getBarsAtEvent(a):[];this.eachBars(function(a){a.restore(["fillColor","strokeColor"])});c.each(a,function(a){a.fillColor=a.highlightFill;a.strokeColor=a.highlightStroke});this.showTooltip(a)});this.BarClass=e.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx});c.each(a.datasets,function(d){var e={label:d.label||null,fillColor:d.fillColor,strokeColor:d.strokeColor,bars:[]};this.datasets.push(e);c.each(d.data,
function(c,k){e.bars.push(new this.BarClass({value:c,label:a.labels[k],datasetLabel:d.label,strokeColor:d.strokeColor,fillColor:d.fillColor,highlightFill:d.highlightFill||d.fillColor,highlightStroke:d.highlightStroke||d.strokeColor}))},this)},this);this.buildScale(a.labels);this.BarClass.prototype.base=this.scale.endPoint;this.eachBars(function(a,d,e){c.extend(a,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,e,d),y:this.scale.endPoint});a.save()},
this);this.render()},update:function(){this.scale.update();c.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])});this.eachBars(function(a){a.save()});this.render()},eachBars:function(a){c.each(this.datasets,function(d,e){c.each(d.bars,a,this,e)},this)},getBarsAtEvent:function(a){var d,e=[];a=c.getRelativePosition(a);for(var n=function(a){e.push(a.bars[d])},q=0;q<this.datasets.length;q++)for(d=0;d<this.datasets[q].bars.length;d++)if(this.datasets[q].bars[d].inRange(a.x,a.y))return c.each(this.datasets,
n),e;return e},buildScale:function(a){var d=this,e=function(){var a=[];return d.eachBars(function(c){a.push(c.value)}),a};a={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){a=
c.calculateScaleRange(e(),a,this.fontSize,this.beginAtZero,this.integersOnly);c.extend(this,a)},xLabels:a,font:c.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?
this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&c.extend(a,{calculateYRange:c.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new this.ScaleClass(a)},addData:function(a,
d){c.each(a,function(a,c){this.datasets[c].bars.push(new this.BarClass({value:a,label:d,x:this.scale.calculateBarX(this.datasets.length,c,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[c].strokeColor,fillColor:this.datasets[c].fillColor}))},this);this.scale.addXLabel(d);this.update()},removeData:function(){this.scale.removeXLabel();c.each(this.datasets,function(a){a.bars.shift()},this);this.update()},
reflow:function(){c.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var a=c.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var d=a||1;this.clear();this.chart.ctx;this.scale.draw(d);c.each(this.datasets,function(a,e){c.each(a.bars,function(a,c){a.hasValue()&&(a.base=this.scale.endPoint,a.transition({x:this.scale.calculateBarX(this.datasets.length,e,c),y:this.scale.calculateY(a.value),width:this.scale.calculateBarWidth(this.datasets.length)},
d).draw())},this)},this)}})}).call(this);
(function(){var e=this.Chart,c=e.helpers,a={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Doughnut",defaults:a,
initialize:function(a){this.segments=[];this.outerRadius=(c.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;this.SegmentArc=e.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2});this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getSegmentsAtEvent(a):[];c.each(this.segments,function(a){a.restore(["fillColor"])});c.each(a,function(a){a.fillColor=a.highlightColor});this.showTooltip(a)});
this.calculateTotal(a);c.each(a,function(a,c){this.addData(a,c,!0)},this);this.render()},getSegmentsAtEvent:function(a){var e=[],n=c.getRelativePosition(a);return c.each(this.segments,function(a){a.inRange(n.x,n.y)&&e.push(a)},this),e},addData:function(a,c,e){this.segments.splice(c||this.segments.length,0,new this.SegmentArc({value:a.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:a.color,
highlightColor:a.highlight||a.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(a.value),label:a.label}));e||(this.reflow(),this.update())},calculateCircumference:function(a){return Math.abs(a)/this.total*Math.PI*2},calculateTotal:function(a){this.total=0;c.each(a,function(a){this.total+=Math.abs(a.value)},this)},update:function(){this.calculateTotal(this.segments);
c.each(this.activeElements,function(a){a.restore(["fillColor"])});c.each(this.segments,function(a){a.save()});this.render()},removeData:function(a){a=c.isNumber(a)?a:this.segments.length-1;this.segments.splice(a,1);this.reflow();this.update()},reflow:function(){c.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.outerRadius=(c.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;c.each(this.segments,function(a){a.update({outerRadius:this.outerRadius,
innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(a){var e=a?a:1;this.clear();c.each(this.segments,function(a,c){a.transition({circumference:this.calculateCircumference(a.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},e);a.endAngle=a.startAngle+a.circumference;a.draw();0===c&&(a.startAngle=1.5*Math.PI);c<this.segments.length-1&&(this.segments[c+1].startAngle=a.endAngle)},this)}});e.types.Doughnut.extend({name:"Pie",
defaults:c.merge(a,{percentageInnerCutout:0})})}).call(this);
(function(){var e=this.Chart,c=e.helpers;e.Type.extend({name:"Line",defaults:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(a){this.PointClass=
e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(a){return Math.pow(a-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}});this.datasets=[];this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getPointsAtEvent(a):[];this.eachPoints(function(a){a.restore(["fillColor",
"strokeColor"])});c.each(a,function(a){a.fillColor=a.highlightFill;a.strokeColor=a.highlightStroke});this.showTooltip(a)});c.each(a.datasets,function(d){var e={label:d.label||null,fillColor:d.fillColor,strokeColor:d.strokeColor,pointColor:d.pointColor,pointStrokeColor:d.pointStrokeColor,points:[]};this.datasets.push(e);c.each(d.data,function(c,q){e.points.push(new this.PointClass({value:c,label:a.labels[q],datasetLabel:d.label,strokeColor:d.pointStrokeColor,fillColor:d.pointColor,highlightFill:d.pointHighlightFill||
d.pointColor,highlightStroke:d.pointHighlightStroke||d.pointStrokeColor}))},this);this.buildScale(a.labels);this.eachPoints(function(a,d){c.extend(a,{x:this.scale.calculateX(d),y:this.scale.endPoint});a.save()},this)},this);this.render()},update:function(){this.scale.update();c.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])});this.eachPoints(function(a){a.save()});this.render()},eachPoints:function(a){c.each(this.datasets,function(d){c.each(d.points,a,this)},this)},getPointsAtEvent:function(a){var d=
[],e=c.getRelativePosition(a);return c.each(this.datasets,function(a){c.each(a.points,function(a){a.inRange(e.x,e.y)&&d.push(a)})},this),d},buildScale:function(a){var d=this,l=function(){var a=[];return d.eachPoints(function(c){a.push(c.value)}),a};a={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,
valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){a=c.calculateScaleRange(l(),a,this.fontSize,this.beginAtZero,this.integersOnly);c.extend(this,a)},xLabels:a,font:c.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,
gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&c.extend(a,{calculateYRange:c.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,
max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new e.Scale(a)},addData:function(a,d){c.each(a,function(a,c){this.datasets[c].points.push(new this.PointClass({value:a,label:d,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[c].pointStrokeColor,fillColor:this.datasets[c].pointColor}))},this);this.scale.addXLabel(d);this.update()},removeData:function(){this.scale.removeXLabel();c.each(this.datasets,function(a){a.points.shift()},
this);this.update()},reflow:function(){var a=c.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var d=a||1;this.clear();var e=this.chart.ctx,n=function(a){return null!==a.value},q=function(a,d,e){return c.findNextWhere(d,n,e)||a},k=function(a,d,e){return c.findPreviousWhere(d,n,e)||a};this.scale.draw(d);c.each(this.datasets,function(a){var u=c.where(a.points,n);c.each(a.points,function(a,c){a.hasValue()&&a.transition({y:this.scale.calculateY(a.value),
x:this.scale.calculateX(c)},d)},this);this.options.bezierCurve&&c.each(u,function(a,d){var e=0<d&&d<u.length-1?this.options.bezierCurveTension:0;a.controlPoints=c.splineCurve(k(a,u,d),a,q(a,u,d),e);a.controlPoints.outer.y>this.scale.endPoint?a.controlPoints.outer.y=this.scale.endPoint:a.controlPoints.outer.y<this.scale.startPoint&&(a.controlPoints.outer.y=this.scale.startPoint);a.controlPoints.inner.y>this.scale.endPoint?a.controlPoints.inner.y=this.scale.endPoint:a.controlPoints.inner.y<this.scale.startPoint&&
(a.controlPoints.inner.y=this.scale.startPoint)},this);e.lineWidth=this.options.datasetStrokeWidth;e.strokeStyle=a.strokeColor;e.beginPath();c.each(u,function(a,c){if(0===c)e.moveTo(a.x,a.y);else if(this.options.bezierCurve){var d=k(a,u,c);e.bezierCurveTo(d.controlPoints.outer.x,d.controlPoints.outer.y,a.controlPoints.inner.x,a.controlPoints.inner.y,a.x,a.y)}else e.lineTo(a.x,a.y)},this);e.stroke();this.options.datasetFill&&0<u.length&&(e.lineTo(u[u.length-1].x,this.scale.endPoint),e.lineTo(u[0].x,
this.scale.endPoint),e.fillStyle=a.fillColor,e.closePath(),e.fill());c.each(u,function(a){a.draw()})},this)}})}).call(this);
(function(){var e=this.Chart,c=e.helpers;e.Type.extend({name:"PolarArea",defaults:{scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'},
initialize:function(a){this.segments=[];this.SegmentArc=e.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2});this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,
showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:a.length});
this.updateScaleRange(a);this.scale.update();c.each(a,function(a,c){this.addData(a,c,!0)},this);this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getSegmentsAtEvent(a):[];c.each(this.segments,function(a){a.restore(["fillColor"])});c.each(a,function(a){a.fillColor=a.highlightColor});this.showTooltip(a)});this.render()},getSegmentsAtEvent:function(a){var d=[],e=c.getRelativePosition(a);return c.each(this.segments,function(a){a.inRange(e.x,
e.y)&&d.push(a)},this),d},addData:function(a,c,e){this.segments.splice(c||this.segments.length,0,new this.SegmentArc({fillColor:a.color,highlightColor:a.highlight||a.color,label:a.label,value:a.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(a.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI}));e||(this.reflow(),this.update())},removeData:function(a){a=c.isNumber(a)?a:this.segments.length-1;this.segments.splice(a,
1);this.reflow();this.update()},calculateTotal:function(a){this.total=0;c.each(a,function(a){this.total+=a.value},this);this.scale.valuesCount=this.segments.length},updateScaleRange:function(a){var d=[];c.each(a,function(a){d.push(a.value)});a=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:c.calculateScaleRange(d,c.min([this.chart.width,
this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);c.extend(this.scale,a,{size:c.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments);c.each(this.segments,function(a){a.save()});this.reflow();this.render()},reflow:function(){c.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.updateScaleRange(this.segments);
this.scale.update();c.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2});c.each(this.segments,function(a){a.update({outerRadius:this.scale.calculateCenterOffset(a.value)})},this)},draw:function(a){var d=a||1;this.clear();c.each(this.segments,function(a,c){a.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(a.value)},d);a.endAngle=a.startAngle+a.circumference;0===c&&(a.startAngle=1.5*Math.PI);c<this.segments.length-1&&(this.segments[c+
1].startAngle=a.endAngle);a.draw()},this);this.scale.draw()}})}).call(this);
(function(){var e=this.Chart,c=e.helpers;e.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},
initialize:function(a){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx});this.datasets=[];this.buildScale(a);this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){a="mouseout"!==a.type?this.getPointsAtEvent(a):[];this.eachPoints(function(a){a.restore(["fillColor","strokeColor"])});c.each(a,function(a){a.fillColor=
a.highlightFill;a.strokeColor=a.highlightStroke});this.showTooltip(a)});c.each(a.datasets,function(d){var e={label:d.label||null,fillColor:d.fillColor,strokeColor:d.strokeColor,pointColor:d.pointColor,pointStrokeColor:d.pointStrokeColor,points:[]};this.datasets.push(e);c.each(d.data,function(c,q){var k;this.scale.animation||(k=this.scale.getPointPosition(q,this.scale.calculateCenterOffset(c)));e.points.push(new this.PointClass({value:c,label:a.labels[q],datasetLabel:d.label,x:this.options.animation?
this.scale.xCenter:k.x,y:this.options.animation?this.scale.yCenter:k.y,strokeColor:d.pointStrokeColor,fillColor:d.pointColor,highlightFill:d.pointHighlightFill||d.pointColor,highlightStroke:d.pointHighlightStroke||d.pointStrokeColor}))},this)},this);this.render()},eachPoints:function(a){c.each(this.datasets,function(d){c.each(d.points,a,this)},this)},getPointsAtEvent:function(a){a=c.getRelativePosition(a);a=c.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},a);var d=Math.round((a.angle-
1.5*Math.PI)/(2*Math.PI/this.scale.valuesCount)),e=[];return(d>=this.scale.valuesCount||0>d)&&(d=0),a.distance<=this.scale.drawingArea&&c.each(this.datasets,function(a){e.push(a.points[d])}),e},buildScale:function(a){this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,
backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,
pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:a.labels,valuesCount:a.datasets[0].data.length});this.scale.setScaleSize();this.updateScaleRange(a.datasets);this.scale.buildYLabels()},updateScaleRange:function(a){var d=function(){var d=[];return c.each(a,function(a){a.data?d=d.concat(a.data):c.each(a.points,function(a){d.push(a.value)})}),
d}(),d=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:c.calculateScaleRange(d,c.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);c.extend(this.scale,d)},addData:function(a,d){this.scale.valuesCount++;c.each(a,function(a,c){var e=this.scale.getPointPosition(this.scale.valuesCount,
this.scale.calculateCenterOffset(a));this.datasets[c].points.push(new this.PointClass({value:a,label:d,x:e.x,y:e.y,strokeColor:this.datasets[c].pointStrokeColor,fillColor:this.datasets[c].pointColor}))},this);this.scale.labels.push(d);this.reflow();this.update()},removeData:function(){this.scale.valuesCount--;this.scale.labels.shift();c.each(this.datasets,function(a){a.points.shift()},this);this.reflow();this.update()},update:function(){this.eachPoints(function(a){a.save()});this.reflow();this.render()},
reflow:function(){c.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:c.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2});this.updateScaleRange(this.datasets);this.scale.setScaleSize();this.scale.buildYLabels()},draw:function(a){var d=a||1,e=this.chart.ctx;this.clear();this.scale.draw();c.each(this.datasets,function(a){c.each(a.points,function(a,c){a.hasValue()&&a.transition(this.scale.getPointPosition(c,this.scale.calculateCenterOffset(a.value)),
d)},this);e.lineWidth=this.options.datasetStrokeWidth;e.strokeStyle=a.strokeColor;e.beginPath();c.each(a.points,function(a,c){0===c?e.moveTo(a.x,a.y):e.lineTo(a.x,a.y)},this);e.closePath();e.stroke();e.fillStyle=a.fillColor;e.fill();c.each(a.points,function(a){a.hasValue()&&a.draw()})},this)}})}).call(this);var m=function a$$2(c,a){function d(a){return"function"==typeof a}function l(a){return"[object Object]"===la.call(a)}function n(a){return"[object String]"===la.call(a)}function q(a){B=a.document;aa=a.location;Ba=a.cancelAnimationFrame||a.clearTimeout;sa=a.requestAnimationFrame||a.setTimeout}function k(a,b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];if(l(a))return fa(a,c);var f,g=null!=b&&l(b)&&!("tag"in b||"view"in b||"subtree"in b),d=g?b:{},k="class"in d?"class":"className",h={tag:"div",
attrs:{}},E=[];if(!n(a))throw Error("selector in m(selector, attrs, children) should be a string");for(;null!=(f=Ma.exec(a));)""===f[1]&&f[2]?h.tag=f[2]:"#"===f[1]?h.attrs.id=f[2]:"."===f[1]?E.push(f[2]):"["===f[3][0]&&(f=Na.exec(f[3]),h.attrs[f[1]]=f[3]||(f[2]?"":!0));c=g?c.slice(1):c;h.children=1===c.length&&U(c[0])?c[0]:c;for(var p in d)d.hasOwnProperty(p)&&(p===k&&null!=d[p]&&""!==d[p]?(E.push(d[p]),h.attrs[p]=""):h.attrs[p]=d[p]);return E.length&&(h.attrs[k]=E.join(" ")),h}function v(a,b){for(var c=
0;c<a.length&&!b(a[c],c++););}function u(a,b){v(a,function(a,c){return(a=a&&a.attrs)&&null!=a.key&&b(a,c)})}function y(a){for(var b=0;b<a.length;b++)U(a[b])&&(a=a.concat.apply([],a),b--);return a}function P(a,b,c,d){u(a,function(a,d){b[a=a.key]=b[a]?{action:Da,index:d,from:b[a].index,element:c.nodes[b[a].index]||B.createElement("div")}:{action:Ea,index:d}});var f=[],g;for(g in b)f.push(b[g]);var f=f.sort(R),l=Array(c.length);return l.nodes=c.nodes.slice(),v(f,function(b){var f=b.index;if(b.action===
Fa&&(M(c[f].nodes,c[f]),l.splice(f,1)),b.action===Ea){var X=B.createElement("div");X.key=a[f].attrs.key;d.insertBefore(X,d.childNodes[f]||null);l.splice(f,0,{attrs:{key:a[f].attrs.key},nodes:[X]});l.nodes[f]=X}if(b.action===Da){var X=b.element,g=d.childNodes[f];g!==X&&null!==X&&d.insertBefore(X,g||null);l[f]=c[b.from];l.nodes[f]=X}}),l}function ba(a,b,c,d){var f=a.length!==b.length;return f||u(a,function(a,c){var d=b[c];return f=d&&d.attrs&&d.attrs.key!==a.key}),f?P(a,c,b,d):b}function ja(a,b,c){v(a,
function(a,d){null!=b[d]&&c.push.apply(c,b[d].nodes)});v(b.nodes,function(a,d){null!=a.parentNode&&0>c.indexOf(a)&&M([a],[b[d]])});a.length<b.length&&(b.length=a.length);b.nodes=c}function L(a){var b=0;u(a,function(){return v(a,function(a){(a=a&&a.attrs)&&null==a.key&&(a.key="__mithril__"+b++)}),1})}function T(a,b,c){(a.tag!==b.tag||c.sort().join()!==Object.keys(b.attrs).sort().join()||a.attrs.id!==b.attrs.id||a.attrs.key!==b.attrs.key||"all"===k.redraw.strategy()&&(!b.configContext||!0!==b.configContext.retain)||
"diff"===k.redraw.strategy()&&b.configContext&&!1===b.configContext.retain)&&(b.nodes.length&&M(b.nodes),b.configContext&&d(b.configContext.onunload)&&b.configContext.onunload(),b.controllers&&v(b.controllers,function(a){a.unload&&a.onunload({preventDefault:ga})}))}function Q(a,b,c){c.length&&(a.views=b,a.controllers=c,v(c,function(a){if(a.onunload&&a.onunload.$old&&(a.onunload=a.onunload.$old),Y&&a.onunload){var b=a.onunload;a.onunload=ga;a.onunload.$old=b}}))}function f(a,b,c,f,g){if(d(b.attrs.config)){var l=
g.configContext=g.configContext||{};a.push(function(){return b.attrs.config.call(b,c,!f,l,g)})}}function O(a){if(a.$trusted){if(a=a.match(/<[^\/]|\>\s*[^<]/g),null!=a)return a.length}else if(U(a))return a.length;return 1}function C(b,c,d,f,g,l,k,h,n){b=y(b);var p=[],t=c.length===b.length,r=0,q={},x=!1;u(c,function(a,b){x=!0;q[c[b].attrs.key]={action:Fa,index:b}});L(b);x&&(c=ba(b,c,q,d));for(var v=0,B=0,z=b.length;z>B;B++){var C=N(d,g,c,f,b[B],c[v],l,f+r||r,k,h,n);C!==a&&(t=t&&C.nodes.intact,r+=O(C),
c[v++]=C)}return t||ja(b,c,p),c}function N(b,c,g,h,D,A,K,p,E,q,t){var r;a:{try{if(null==D||null==D.toString()){r="";break a}}catch(u){r="";break a}r=D}D=r;if("retain"===D.subtree)b=A;else{a:{r=D;if(null!=A){if(la.call(A)===la.call(r)){g=A;break a}if(g&&g.nodes){h=p-h;var w=h+(U(r)?r:A.nodes).length;M(g.nodes.slice(h,w),g.slice(h,w))}else A.nodes&&M(A.nodes,A)}g=(A=new r.constructor,A.tag&&(A={}),A.nodes=[],A)}A=g;if(U(D))b=C(D,A,b,p,c,K,E,q,t);else if(null!=D&&l(D)){var x;g=A;r=q;c=[];q=[];w=D;for(A=
(D=g)&&D.controllers;null!=w.view;){h=w;var w=w.view.$original||w.view,v=D,y=A,z=q,I=c,F,P=v.views,L=w;F=y;var H=h.controller,P="diff"===k.redraw.strategy()&&P?P.indexOf(L):-1;F=-1<P?F[P]:"function"==typeof H?new H:{};H=+(h&&h.attrs&&h.attrs.key);h=0===Y||wa||y&&-1<y.indexOf(F)?h.view(F):{tag:"placeholder"};"retain"===h.subtree?h=v:(H===H&&((h.attrs=h.attrs||{}).key=H),v=I,y=F,null!=y.onunload&&ta.push({controller:y,handler:y.onunload}),v.push(w),z.push(y));w=h}if(x=w,!x.tag&&q.length)throw Error("Component template must return a virtual element, not an array, string, etc.");
x.attrs=x.attrs||{};g.attrs=g.attrs||{};D=Object.keys(x.attrs);A=D.length>("key"in x.attrs?1:0);(T(x,g,D),n(x.tag))?(D=0===g.nodes.length,r=x.attrs.xmlns?x.attrs.xmlns:"svg"===x.tag?"http://www.w3.org/2000/svg":"math"===x.tag?"http://www.w3.org/1998/Math/MathML":r,D?(h=x,w=r,h=w===a?h.attrs.is?B.createElement(h.tag,h.attrs.is):B.createElement(h.tag):h.attrs.is?B.createElementNS(w,h.tag,h.attrs.is):B.createElementNS(w,h.tag),w=x,A=A?J(h,w.tag,w.attrs,{},r):w.attrs,w=x,w=null!=w.children&&0<w.children.length?
N(h,w.tag,a,a,w.children,g.children,!0,0,w.attrs.contenteditable?h:E,r,t):w.children,E=x,g=h,A={tag:E.tag,attrs:A,children:w,nodes:[g]},g=(Q(A,c,q),A.children&&!A.children.nodes&&(A.children.nodes=[]),"select"===E.tag&&"value"in E.attrs&&J(g,E.tag,{value:E.attrs.value},{},r),A)):(h=g,w=x,z=h.nodes[0],h=(A&&J(z,w.tag,w.attrs,h.attrs,r),h.children=N(z,w.tag,a,a,w.children,h.children,!1,0,w.attrs.contenteditable?z:E,r,t),h.nodes.intact=!0,q.length&&(h.views=c,h.controllers=q),z)),(D||!0===K&&null!=h)&&
b.insertBefore(h,b.childNodes[p]||null),b=(f(t,x,h,D,g),g)):b=void 0}else if(d(D))b=A;else if(x=A,t=D,0===x.nodes.length)t.$trusted?K=G(b,p,t):(K=[B.createTextNode(t)],b.nodeName.match(Oa)||b.insertBefore(K[0],b.childNodes[p]||null)),b="string"==typeof t||"number"==typeof t||"boolean"==typeof t?new t.constructor(t):t,b=(b.nodes=K,b);else if(x.valueOf()!==t.valueOf()||!0===K){K=x;x=K.nodes;if(!E||E!==B.activeElement)if(t.$trusted)M(x,K),x=G(b,p,t);else if("textarea"===c)b.value=t;else if(E)E.innerHTML=
t;else{(1===x[0].nodeType||1<x.length||x[0].nodeValue.trim&&!x[0].nodeValue.trim())&&(M(K.nodes,K),x=[B.createTextNode(t)]);E=x[0];try{b.insertBefore(E,b.childNodes[p]||null),E.nodeValue=t}catch(u){}}b=(K=new t.constructor(t),K.nodes=x,K)}else b=(x.nodes.intact=!0,x)}return b}function R(a,b){return a.action-b.action||a.index-b.index}function J(a,b,c,f,g){for(var h in c){var k=c[h],n=f[h];if(h in f&&n===k)"value"===h&&"input"===b&&a.value!=k&&(a.value=k);else{f[h]=k;try{if("config"!==h&&"key"!==h)if(d(k)&&
"on"===h.slice(0,2))a[h]=ea(k,a);else if("style"===h&&null!=k&&l(k)){for(var p in k)null!=n&&n[p]===k[p]||(a.style[p]=k[p]);for(p in n)p in k||(a.style[p]="")}else null!=g?"href"===h?a.setAttributeNS("http://www.w3.org/1999/xlink","href",k):a.setAttribute("className"===h?"class":h,k):h in a&&"list"!==h&&"style"!==h&&"form"!==h&&"type"!==h&&"width"!==h&&"height"!==h?("input"!==b||a[h]!==k)&&(a[h]=k):a.setAttribute(h,k)}catch(q){if(0>q.message.indexOf("Invalid argument"))throw q;}}}return f}function M(a,
b){for(var c=a.length-1;-1<c;c--)if(a[c]&&a[c].parentNode){try{a[c].parentNode.removeChild(a[c])}catch(d){}b=[].concat(b);b[c]&&I(b[c])}a.length&&(a.length=0)}function I(a){a.configContext&&d(a.configContext.onunload)&&(a.configContext.onunload(),a.configContext.onunload=null);a.controllers&&v(a.controllers,function(a){d(a.onunload)&&a.onunload({preventDefault:ga})});a.children&&(U(a.children)?v(a.children,I):a.children.tag&&I(a.children))}function G(a,b,d){var f=a.childNodes[b];if(f){var g=1!==f.nodeType,
h=B.createElement("span");g?(a.insertBefore(h,f||null),h.insertAdjacentHTML("beforebegin",d),a.removeChild(h)):f.insertAdjacentHTML("beforebegin",d)}else c.Range&&c.Range.prototype.createContextualFragment?a.appendChild(B.createRange().createContextualFragment(d)):a.insertAdjacentHTML("beforeend",d);for(d=[];a.childNodes[b]!==f;)d.push(a.childNodes[b]),b++;return d}function ea(a,b){return function(c){c=c||event;k.redraw.strategy("diff");k.startComputation();try{return a.call(b,c)}finally{S()}}}function H(a){var b=
xa.indexOf(a);return 0>b?xa.push(a)-1:b}function ka(a){var b=function(){return arguments.length&&(a=arguments[0]),a};return b.toJSON=function(){return a},b}function fa(a,b){var c=function(){return(a.controller||ga).apply(this,b)||this};a.controller&&(c.prototype=a.controller.prototype);var d=function(c){var d=1<arguments.length?b.concat([].slice.call(arguments,1)):b;return a.view.apply(a,d?[c].concat(d):[c])};d.$original=a.view;c={controller:c,view:d};return b[0]&&null!=b[0].key&&(c.attrs={key:b[0].key}),
c}function da(a,b){pa.splice(b,1);Z.splice(b,1);ya.splice(b,1);z(a);xa.splice(H(a),1)}function ca(){ma&&(ma(),ma=null);v(pa,function(a,b){var c=ya[b];if(Z[b]){var d=[Z[b]];k.render(a,c.view?c.view(Z[b],d):"")}});qa&&(qa(),qa=null);ha=null;Ga=new Date;k.redraw.strategy("diff")}function S(){"none"===k.redraw.strategy()?(Y--,k.redraw.strategy("diff")):k.endComputation()}function V(a,b,c){na={};var d=c.indexOf("?");-1!==d&&(na=h(c.substr(d+1,c.length)),c=c.substr(0,d));var d=Object.keys(b),f=d.indexOf(c);
if(-1!==f)return k.mount(a,b[d[f]]),!0;for(var g in b){if(g===c)return k.mount(a,b[g]),!0;d=new RegExp("^"+g.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(d.test(c))return c.replace(d,function(){var c=g.match(/:[^\/]+/g)||[],d=[].slice.call(arguments,1,-2);v(c,function(a,b){na[a.replace(/:|\./g,"")]=decodeURIComponent(d[b])});k.mount(a,b[g])}),!0}}function W(a){if(a=a||event,!a.ctrlKey&&!a.metaKey&&2!==a.which){a.preventDefault?a.preventDefault():a.returnValue=!1;a=a.currentTarget||
a.srcElement;for(var b="pathname"===k.route.mode&&a.search?h(a.search.slice(1)):{};a&&"A"!==a.nodeName.toUpperCase();)a=a.parentNode;Y=0;k.route(a[k.route.mode].slice(ia[k.route.mode].length),b)}}function b(){"hash"!==k.route.mode&&aa.hash?aa.hash=aa.hash:c.scrollTo(0,0)}function g(b,c){var d={},f=[],h;for(h in b){var k=c?c+"["+h+"]":h,n=b[h];if(null===n)f.push(encodeURIComponent(k));else if(l(n))f.push(g(n,k));else if(U(n)){var p=[];d[k]=d[k]||{};v(n,function(a){d[k][a]||(d[k][a]=!0,p.push(encodeURIComponent(k)+
"="+encodeURIComponent(a)))});f.push(p.join("&"))}else n!==a&&f.push(encodeURIComponent(k)+"="+encodeURIComponent(n))}return f.join("&")}function h(a){if(""===a||null==a)return{};"?"===a.charAt(0)&&(a=a.slice(1));a=a.split("&");var b={};return v(a,function(a){var c=a.split("=");a=decodeURIComponent(c[0]);c=2===c.length?decodeURIComponent(c[1]):null;null!=b[a]?(U(b[a])||(b[a]=[b[a]]),b[a].push(c)):b[a]=c}),b}function z(b){var c=H(b);M(b.childNodes,ra[c]);ra[c]=a}function p(a,b){var c=k.prop(b);return a.then(c),
c.then=function(c,d){return p(a.then(c,d),b)},c["catch"]=c.then.bind(null,null),c}function oa(a,b){function c(a){t=a||q;w.map(function(a){t===p?a.resolve(r):a.reject(r)})}function f(a,b,c,g){if((null!=r&&l(r)||d(r))&&d(a))try{var h=0;a.call(r,function(a){h++||(r=a,b())},function(a){h++||(r=a,c())})}catch(Ca){k.deferred.onerror(Ca),r=Ca,c()}else g()}function g(){var l;try{l=r&&r.then}catch(q){return k.deferred.onerror(q),r=q,t=n,g()}t===n&&k.deferred.onerror(r);f(l,function(){t=h;g()},function(){t=
n;g()},function(){try{t===h&&d(a)?r=a(r):t===n&&d(b)&&(r=b(r),t=h)}catch(g){return k.deferred.onerror(g),r=g,c()}r===y?(r=TypeError(),c()):f(l,function(){c(p)},c,function(){c(t===h&&p)})})}var h=1,n=2,p=3,q=4,y=this,t=0,r=0,w=[];y.promise={};y.resolve=function(a){return t||(r=a,t=h,g()),this};y.reject=function(a){return t||(r=a,t=n,g()),this};y.promise.then=function(a,b){var c=new oa(a,b);return t===p?c.resolve(r):t===q?c.reject(r):w.push(c),c.promise}}function va(a){return a}function Ja(b){if(!b.dataType||
"jsonp"!==b.dataType.toLowerCase()){var f=new c.XMLHttpRequest;if(f.open(b.method,b.url,!0,b.user,b.password),f.onreadystatechange=function(){4===f.readyState&&(200<=f.status&&300>f.status?b.onload({type:"load",target:f}):b.onerror({type:"error",target:f}))},b.serialize===JSON.stringify&&b.data&&"GET"!==b.method&&f.setRequestHeader("Content-Type","application/json; charset=utf-8"),b.deserialize===JSON.parse&&f.setRequestHeader("Accept","application/json, text/*"),d(b.config)){var h=b.config(f,b);
null!=h&&(f=h)}if((h="GET"!==b.method&&b.data?b.data:"")&&!n(h)&&h.constructor!==c.FormData)throw Error("Request data should be either be a string or FormData. Check the `serialize` option in `m.request`");return f.send(h),f}var l="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1E16*Math.random()).toString(36),k=B.createElement("script");c[l]=function(d){k.parentNode.removeChild(k);b.onload({type:"load",target:{responseText:d}});c[l]=a};k.onerror=function(){return k.parentNode.removeChild(k),
b.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),c[l]=a,!1};k.onload=function(){return!1};k.src=b.url+(0<b.url.indexOf("?")?"&":"?")+(b.callbackKey?b.callbackKey:"callback")+"="+l+"&"+g(b.data||{});B.body.appendChild(k)}function Ka(a,b,c){"GET"===a.method&&"jsonp"!==a.dataType?(c=0>a.url.indexOf("?")?"?":"&",b=g(b),a.url+=b?c+b:""):a.data=c(b);return a}function La(a,b){var c=a.match(/:[a-z]\w+/gi);return c&&b&&v(c,function(c){var d=c.slice(1);
a=a.replace(c,b[d]);delete b[d]}),a}var B,aa,sa,Ba,U=Array.isArray||function(a){return"[object Array]"===la.call(a)},la={}.toString,Ma=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,Na=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,Oa=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/,ga=function(){};q(c);k.version=function(){return"v0.2.2-rc.1"};var Ha,Fa=1,Ea=2,Da=3,Pa={appendChild:function(b){Ha===a&&(Ha=B.createElement("html"));B.documentElement&&B.documentElement!==b?B.replaceChild(b,
B.documentElement):B.appendChild(b);this.childNodes=B.childNodes},insertBefore:function(a){this.appendChild(a)},childNodes:[]},xa=[],ra={};k.render=function(b,c,d){var f=[];if(!b)throw Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var g=H(b),h=b===B,k=h||b===B.documentElement?Pa:b;h&&"html"!==c.tag&&(c={tag:"html",attrs:{},children:c});ra[g]===a&&M(k.childNodes);!0===d&&z(b);ra[g]=N(k,null,a,a,c,ra[g],!1,0,null,a,f);v(f,function(a){a()})};k.trust=function(a){return a=
new String(a),a.$trusted=!0,a};k.prop=function(a){return(null!=a&&l(a)||d(a))&&d(a.then)?p(a):ka(a)};var Ia,pa=[],ya=[],Z=[],ha=null,Ga=0,ma=null,qa=null,ta=[];k.component=function(a){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);return fa(a,b)};k.mount=k.module=function(a,b){if(!a)throw Error("Please ensure the DOM element exists before rendering a template into it.");var c=pa.indexOf(a);0>c&&(c=pa.length);var f=!1,g={preventDefault:function(){f=!0;ma=qa=null}};v(ta,function(a){a.handler.call(a.controller,
g);a.controller.onunload=null});f?v(ta,function(a){a.controller.onunload=a.handler}):ta=[];Z[c]&&d(Z[c].onunload)&&Z[c].onunload(g);var h=null===b;if(!f){k.redraw.strategy("all");k.startComputation();pa[c]=a;var l=Ia=b?b:b={controller:ga},n=new (b.controller||ga);return l===Ia&&(Z[c]=n,ya[c]=b),S(),h&&da(a,c),Z[c]}h&&da(a,c)};var za=!1,wa=!1;k.redraw=function(a){if(!za){za=!0;a&&(wa=!0);try{ha&&!a?(sa===c.requestAnimationFrame||16<new Date-Ga)&&(0<ha&&Ba(ha),ha=sa(ca,16)):(ca(),ha=sa(function(){ha=
null},16))}finally{za=wa=!1}}};k.redraw.strategy=k.prop();var Y=0;k.startComputation=function(){Y++};k.endComputation=function(){1<Y?Y--:(Y=0,k.redraw())};k.withAttr=function(a,b,c){return function(d){d=d||event;d=d.currentTarget||this;b.call(c||this,a in d?d[a]:d.getAttribute(a))}};var na,F,ia={pathname:"",hash:"#",search:"?"},ua=ga,Aa=!1;return k.route=function(a,d,f,l){if(0===arguments.length)return F;if(3===arguments.length&&n(d)){ua=function(b){b=F=b.slice(ia[k.route.mode].length);if(!V(a,f,
b)){if(Aa)throw Error("Ensure the default route matches one of the routes defined in m.route");Aa=!0;k.route(d,!0);Aa=!1}};var p="hash"===k.route.mode?"onhashchange":"onpopstate";c[p]=function(){var a=aa[k.route.mode];"pathname"===k.route.mode&&(a+=aa.search);F!==a.slice(ia[k.route.mode].length)&&ua(a)};ma=b;c[p]()}else if(a.addEventListener||a.attachEvent)a.href=("pathname"!==k.route.mode?aa.pathname:"")+ia[k.route.mode]+l.attrs.href,a.addEventListener?(a.removeEventListener("click",W),a.addEventListener("click",
W)):(a.detachEvent("onclick",W),a.attachEvent("onclick",W));else if(n(a)){p=F;F=a;var q=d||{},y=F.indexOf("?"),u=-1<y?h(F.slice(y+1)):{},v;for(v in q)u[v]=q[v];q=g(u);y=-1<y?F.slice(0,y):F;q&&(F=y+(-1===y.indexOf("?")?"?":"&")+q);var z=!0===(3===arguments.length?f:d)||p===a;c.history.pushState?(ma=b,qa=function(){c.history[z?"replaceState":"pushState"](null,B.title,ia[k.route.mode]+F)},ua(ia[k.route.mode]+F)):(aa[k.route.mode]=F,ua(ia[k.route.mode]+F))}},k.route.param=function(a){if(!na)throw Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");
return a?na[a]:na},k.route.mode="search",k.route.buildQueryString=g,k.route.parseQueryString=h,k.deferred=function(){var a=new oa;return a.promise=p(a.promise),a},k.deferred.onerror=function(a){if("[object Error]"===la.call(a)&&!a.constructor.toString().match(/ Error/))throw Y=0,a;},k.sync=function(a){function b(a,h){return function(b){return g[a]=b,h||(c="reject"),0===--f&&(d.promise(g),d[c](g)),b}}var c="resolve",d=k.deferred(),f=a.length,g=Array(f);return 0<a.length?v(a,function(a,c){a.then(b(c,
!0),b(c,!1))}):d.resolve([]),d.promise},k.request=function(a){!0!==a.background&&k.startComputation();var b=new oa,c=a.dataType&&"jsonp"===a.dataType.toLowerCase(),d=a.serialize=c?va:a.serialize||JSON.stringify,f=a.deserialize=c?va:a.deserialize||JSON.parse,g=c?function(a){return a.responseText}:a.extract||function(a){return 0===a.responseText.length&&f===JSON.parse?null:a.responseText};return a.method=(a.method||"GET").toUpperCase(),a.url=La(a.url,a.data),a=Ka(a,a.data,d),a.onload=a.onerror=function(c){try{c=
c||event;var d=(("load"===c.type?a.unwrapSuccess:a.unwrapError)||va)(f(g(c.target,a)),c.target);"load"===c.type?(U(d)&&a.type?v(d,function(b,c){d[c]=new a.type(b)}):a.type&&(d=new a.type(d)),b.resolve(d)):b.reject(d);b["load"===c.type?"resolve":"reject"](d)}catch(h){b.reject(h)}finally{!0!==a.background&&k.endComputation()}},Ja(a),b.promise=p(b.promise,a.initialValue),b.promise},k.deps=function(a){return q(c=a||c),c},k.deps.factory=a$$2,k}("undefined"!=typeof window?window:{});
"object"==typeof module&&null!=module&&module.exports?module.exports=m:"function"==typeof define&&define.amd&&define(function(){return m});var lruAppCache=new Cache(-1,!1,new Cache.LocalStorageCacheStorage("searchcode")),testing={CodeResultList:Array,RepoFilterList:Array,LanguageFilterList:Array,OwnerFilterList:Array,CodeResult:function(e){this.filename=m.prop(e.fileName);this.reponame=m.prop(e.repoName);this.matchingresults=m.prop(e.matchingResults);this.repolocation=m.prop(e.repoLocation);this.documentid=m.prop(e.documentId);this.filelocation=m.prop(e.fileLocation);this.codepath=m.prop(e.codePath);this.languagename=m.prop(e.languageName);
this.codelines=m.prop(e.codeLines)},RepoFilter:function(e){this.count=m.prop(e.count);this.source=m.prop(e.repoName);this.selected=m.prop(e.selected)},LanguageFilter:function(e){this.count=m.prop(e.count);this.language=m.prop(e.languageName);this.selected=m.prop(e.selected)},OwnerFilter:function(e){this.count=m.prop(e.count);this.owner=m.prop(e.owner);this.selected=m.prop(e.selected)},vm:function(){var e={init:function(){e.searchvalue=m.prop("");e.langfilters=[];e.repositoryfilters=[];e.ownfilters=
[];e.activelangfilters=[];e.activerepositoryfilters=[];e.activeownfilters=[];e.pages=[];e.currentlyloading=m.prop(!1);e.currentpage=m.prop(0);e.clearfilters=function(){e.langfilters=[];e.repositoryfilters=[];e.ownfilters=[]};e.togglefilter=function(c,a){switch(c){case "language":-1===_.indexOf(e.langfilters,a)?e.langfilters.push(a):e.langfilters=_.without(e.langfilters,a);break;case "repo":-1===_.indexOf(e.repositoryfilters,a)?e.repositoryfilters.push(a):e.repositoryfilters=_.without(e.repositoryfilters,
a);break;case "owner":-1===_.indexOf(e.ownfilters,a)?e.ownfilters.push(a):e.ownfilters=_.without(e.ownfilters,a)}};e.filterexists=function(c,a){switch(c){case "language":if(-1===_.indexOf(e.langfilters,a))return!1;break;case "repo":if(-1===_.indexOf(e.repositoryfilters,a))return!1;break;case "owner":if(-1===_.indexOf(e.ownfilters,a))return!1}return!0};e.search=function(c,a){if(!e.currentlyloading()){e.currentlyloading(!0);m.redraw();var d="",l="",n="";0!=e.langfilters.length&&(d="&lan="+_.map(e.langfilters,
function(a){return encodeURIComponent(a)}).join("&lan="));0!=e.repositoryfilters.length&&(l="&repo="+_.map(e.repositoryfilters,function(a){return encodeURIComponent(a)}).join("&repo="));0!=e.ownfilters.length&&(n="&own="+_.map(e.ownfilters,function(a){return encodeURIComponent(a)}).join("&own="));var q=0,k="";void 0!==c&&(q=c,e.currentpage(c),0!==q&&(k="&p="+q));e.activelangfilters=JSON.parse(JSON.stringify(e.langfilters));e.activerepositoryfilters=JSON.parse(JSON.stringify(e.repositoryfilters));
e.activeownfilters=JSON.parse(JSON.stringify(e.ownfilters));void 0===a&&history.pushState({searchvalue:e.searchvalue(),langfilters:e.activelangfilters,repofilters:e.activerepositoryfilters,ownfilters:e.activeownfilters,currentpage:e.currentpage()},"search","?q="+encodeURIComponent(e.searchvalue())+d+l+n+k);var v="/api/codesearch/?q="+encodeURIComponent(e.searchvalue())+d+l+n+"&p="+q,d=lruAppCache.getItem(v),u=function(a){e.coderesults=new testing.CodeResultList;e.repofilters=new testing.RepoFilterList;
e.languagefilters=new testing.LanguageFilterList;e.ownerfilters=new testing.OwnerFilterList;e.totalhits=a.totalHits;e.altquery=a.altQuery;e.query=a.query;e.pages=a.pages;e.currentpage(a.page);_.each(a.codeResultList,function(a){e.coderesults.push(new testing.CodeResult(a))});_.each(a.repoFacetResults,function(a){e.repofilters.push(new testing.RepoFilter(a))});_.each(a.languageFacetResults,function(a){e.languagefilters.push(new testing.LanguageFilter(a))});_.each(a.repoOwnerResults,function(a){e.ownerfilters.push(new testing.OwnerFilter(a))});
e.currentlyloading(!1);m.redraw()};null!==d?u(d):m.request({method:"GET",background:!0,url:v}).then(function(a){lruAppCache.setItem(v,a,{expirationAbsolute:null,expirationSliding:60,priority:Cache.Priority.HIGH});u(a)})}}}};return e}(),controller:function(){testing.vm.init()},view:function(){return m("div",[m.component(SearchOptionsComponent),m.component(SearchCountComponent,{totalhits:testing.vm.totalhits,query:testing.vm.query,repofilters:testing.vm.activerepositoryfilters,languagefilters:testing.vm.activelangfilters,
ownerfilters:testing.vm.activeownfilters}),m.component(SearchChartComponent,{languagefilters:testing.vm.langfilters,repofilters:testing.vm.repofilters}),m.component(SearchLoadingComponent,{currentlyloading:testing.vm.currentlyloading}),m("div.row",[m("div.col-md-3.search-filters-container.search-filters",[m.component(SearchNextPreviousComponent,{currentpage:testing.vm.currentpage,pages:testing.vm.pages,setpage:testing.vm.setpage,search:testing.vm.search,totalhits:testing.vm.totalhits}),m.component(SearchButtonFilterComponent,
{totalhits:testing.vm.totalhits,clearfilters:testing.vm.clearfilters,search:testing.vm.search,languagefilters:testing.vm.langfilters,repofilters:testing.vm.repositoryfilters,ownfilters:testing.vm.ownfilters}),m.component(SearchAlternateFilterComponent,{query:testing.vm.query,altquery:testing.vm.altquery}),m.component(SearchRepositoriesFilterComponent,{repofilters:testing.vm.repofilters}),m.component(SearchLanguagesFilterComponent,{languagefilters:testing.vm.languagefilters}),m.component(SearchOwnersFilterComponent,
{ownerfilters:testing.vm.ownerfilters})]),m("div.col-md-9.search-results",[m.component(SearchNoResultsComponent,{totalhits:testing.vm.totalhits,query:testing.vm.query,altquery:testing.vm.altquery,query:testing.vm.query}),m.component(SearchResultsComponent,{coderesults:testing.vm.coderesults})]),m.component(SearchPagesComponent,{currentpage:testing.vm.currentpage,pages:testing.vm.pages,search:testing.vm.search})])])}},SearchNoResultsComponent={controller:function(){return{doaltquery:function(e){testing.vm.searchvalue(e);
testing.vm.search()}}},view:function(e,c){if(0!==c.totalhits)return m("div");var a=m("h5","Try searching with fewer and more general keywords or if you have filters remove them.");0!==c.altquery.length&&(a="Try one of the following searches instead",1===c.altquery.length&&(a="Try the following search instead"),a=m("div",[m("h5",a),m("ul",{style:{"list-style-type":"none"}},_.map(c.altquery,function(a){return m("li",m("a",{href:"",onclick:function(){e.doaltquery(a)}},a))}))]));return m("div",[m("h4",
"No results found for ",m("i.grey",c.query)),a])}},SearchNextPreviousComponent={controller:function(){},view:function(e,c){if(void 0===c.pages||void 0===c.totalhits||0===c.totalhits)return m("div");var a="",d="";0==c.currentpage()&&(a="disabled");c.currentpage()+1>=c.pages.length&&(d="disabled");return m("div",[m("h5","Page "+(c.currentpage()+1)+" of "+(0==c.pages.length?1:c.pages.length)),m("div.center",m("input.btn.btn-xs.btn-success.filter-button",{type:"submit",disabled:a,onclick:function(){c.search(c.currentpage()-
1)},value:"\u25c0 Previous"}),m("span",m.trust("&nbsp;")),m("input.btn.btn-xs.btn-success.filter-button",{type:"submit",disabled:d,onclick:function(){c.search(c.currentpage()+1)},value:"Next \u25b6"}))])}},SearchLoadingComponent={controller:function(){},view:function(e,c){var a={};!1===c.currentlyloading()&&(a={style:{display:"none"}});return m("div.search-loading",a,[m("img",{src:"/img/loading.gif"}),m("h5","Loading...")])}},SearchPagesComponent={controller:function(){},view:function(e,c){return m("div.search-pagination",
m("ul.pagination",[_.map(c.pages,function(a){return m("li",{"class":a==c.currentpage()?"active":""},m("a",{onclick:function(){c.search(a);window.scrollTo(0,0)}},a+1))})]))}},SearchButtonFilterComponent={controller:function(){},view:function(e,c){return void 0===c.totalhits||0===c.totalhits&&0===c.languagefilters.length+c.repofilters.length+c.ownfilters.length?m("div"):0===c.totalhits&&0!==c.languagefilters.length+c.repofilters.length+c.ownfilters.length?m("div",[m("h5","Filter Results"),m("input.btn.btn-xs.btn-success.filter-button",
{type:"submit",onclick:function(){c.clearfilters();c.search()},value:"Remove"})]):m("div",[m("h5","Filter Results"),m("div.center",m("input.btn.btn-xs.btn-success.filter-button",{type:"submit",onclick:function(){c.clearfilters();c.search()},value:"Remove"}),m("span",m.trust("&nbsp;")),m("input.btn.btn-xs.btn-success.filter-button",{type:"submit",onclick:function(){c.search()},value:"Apply"}))])}},SearchRepositoriesFilterComponent={controller:function(){var e=!1,c="";return{trimrepo:function(a){0!==
c.length||e||(a=_.first(a,5));0!==c.length&&(a=_.filter(a,function(a){return-1!==a.source().toLowerCase().indexOf(c)}));return a},toggleshowall:function(){e=!e},showall:function(){return e},trimlength:function(){return 5},clickenvent:function(a){testing.vm.togglefilter("repo",a)},filtervalue:function(a){c=a},hasfilter:function(){return 0!==c.length},getfiltervalue:function(){return c}}},view:function(e,c){var a=m("div");if(void 0===c.repofilters||0==c.repofilters.length)return a;!e.hasfilter()&&e.trimlength()<
c.repofilters.length&&(a=c.repofilters.length-e.trimlength(),a=m("a.green",{onclick:e.toggleshowall},a+" more repositories ",m("span.glyphicon.glyphicon-chevron-down")),e.showall()&&(a=m("a.green",{onclick:e.toggleshowall},"less repositories ",m("span.glyphicon.glyphicon-chevron-up"))));return m("div",[m("h5","Repositories"),m("input.repo-filter",{onkeyup:m.withAttr("value",e.filtervalue),placeholder:"Filter Repositories",value:e.getfiltervalue()}),_.map(e.trimrepo(c.repofilters),function(a,c){return m.component(FilterCheckboxComponent,
{onclick:function(){e.clickenvent(a.source())},value:a.source(),count:a.count(),checked:testing.vm.filterexists("repo",a.source())})}),a])}},SearchLanguagesFilterComponent={controller:function(){var e=!1,c="";return{trimlanguage:function(a){0!==c.length||e||(a=_.first(a,5));0!==c.length&&(a=_.filter(a,function(a){return-1!==a.language().toLowerCase().indexOf(c)}));return a},toggleshowall:function(){e=!e},showall:function(){return e},trimlength:function(){return 5},clickenvent:function(a){testing.vm.togglefilter("language",
a)},filtervalue:function(a){c=a},hasfilter:function(){return 0!==c.length},getfiltervalue:function(){return c}}},view:function(e,c){var a=m("div");if(void 0===c.languagefilters||0==c.languagefilters.length)return a;!e.hasfilter()&&e.trimlength()<c.languagefilters.length&&(a=c.languagefilters.length-e.trimlength(),a=m("a.green",{onclick:e.toggleshowall},a+" more languages ",m("span.glyphicon.glyphicon-chevron-down")),e.showall()&&(a=m("a.green",{onclick:e.toggleshowall},"less languages ",m("span.glyphicon.glyphicon-chevron-up"))));
return m("div",[m("h5","Languages"),m("input.repo-filter",{onkeyup:m.withAttr("value",e.filtervalue),placeholder:"Filter Languages",value:e.getfiltervalue()}),_.map(e.trimlanguage(c.languagefilters),function(a,c){return m.component(FilterCheckboxComponent,{onclick:function(){e.clickenvent(a.language())},value:a.language(),count:a.count(),checked:testing.vm.filterexists("language",a.language())})}),a])}},SearchOwnersFilterComponent={controller:function(){var e=!1,c="";return{trimlanguage:function(a){0!==
c.length||e||(a=_.first(a,5));0!==c.length&&(a=_.filter(a,function(a){return-1!==a.owner().toLowerCase().indexOf(c)}));return a},toggleshowall:function(){e=!e},showall:function(){return e},trimlength:function(){return 5},clickenvent:function(a){testing.vm.togglefilter("owner",a)},filtervalue:function(a){c=a},hasfilter:function(){return 0!==c.length},getfiltervalue:function(){return c}}},view:function(e,c){var a=m("div");if(void 0===c.ownerfilters||0==c.ownerfilters.length)return a;!e.hasfilter()&&
e.trimlength()<c.ownerfilters.length&&(a=c.ownerfilters.length-e.trimlength(),a=m("a.green",{onclick:e.toggleshowall},a+" more owners ",m("span.glyphicon.glyphicon-chevron-down")),e.showall()&&(a=m("a.green",{onclick:e.toggleshowall},"less owners ",m("span.glyphicon.glyphicon-chevron-up"))));return m("div",[m("h5","Owners"),m("input.repo-filter",{onkeyup:m.withAttr("value",e.filtervalue),placeholder:"Filter Owners",value:e.getfiltervalue()}),_.map(e.trimlanguage(c.ownerfilters),function(a,c){return m.component(FilterCheckboxComponent,
{onclick:function(){e.clickenvent(a.owner())},value:a.owner(),count:a.count(),checked:testing.vm.filterexists("owner",a.owner())})}),a])}},FilterCheckboxComponent={view:function(e,c){var a={type:"checkbox",onclick:c.onclick};c.checked&&(a.checked="checked");return m("div.checkbox",m("label",[m("input",a),m("span",c.value),m("span",{"class":"badge pull-right"},c.count)]))}},SearchOptionsComponent={controller:function(){return{dosearch:function(){testing.vm.search()}}},view:function(e,c){return m("div",
{"class":"search-options"},m("form",{onsubmit:function(a){e.dosearch();return!1}},m("div.form-inline",[m("div.form-group",m("input.form-control",{autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false",size:"50",placeholder:"Search Expression",onkeyup:m.withAttr("value",testing.vm.searchvalue),value:testing.vm.searchvalue(),type:"search"})),m("input.btn.btn-success",{value:"search",type:"submit",onclick:e.dosearch.bind(this)})])))}},SearchCountComponent={controller:function(){return{}},
view:function(e,c){if(void 0===c.totalhits)return m("div");var a="",d="",l="";if(0!==c.repofilters.length){var n="repository";2<=c.repofilters.length&&(n="repositories");a=" filtered by "+n+' "'+c.repofilters.join(", ")+'"'}0!==c.languagefilters.length&&(n="language",2<=c.languagefilters.length&&(n="languages"),d=(""===a?" filtered by "+n+' "':" and "+n+' "')+c.languagefilters.join(", ")+'"');0!=c.ownerfilters.length&&(n="owner",2<=c.ownerfilters.length&&(n="owners"),l=""===a&&""===d?" filtered by "+
n+' "':" and "+n+' "',l=l+c.ownerfilters.join(", ")+'"');document.title='Search for "'+c.query+'"'+a+d+l;return m("div.row.search-count",[m("b",c.totalhits+" results: "),m("span.grey",'"'+c.query+'"'+a+d+l)])}},SearchChartComponent={controller:function(){return{}},view:function(e,c){return m("div.row.search-chart",m("canvas",{id:"search-chart"}))}},SearchAlternateFilterComponent={controller:function(){return{doaltquery:function(e){testing.vm.searchvalue(e);testing.vm.search()}}},view:function(e,c){return void 0===
c.altquery||0===c.altquery.length?m("div"):m("div",[m("h5","Alternate Searches"),m("div",[_.map(c.altquery,function(a){return m("div.checkbox",m("label",[m("a",{onclick:function(){e.doaltquery(a)}},a)]))})])])}},SearchResultsComponent={controller:function(){return{}},view:function(e,c){return m("div",[_.map(c.coderesults,function(a){return m("div.code-result",[m("div",m("h5",[m("a",{href:"/file/"+a.documentid()+"/"+a.codepath()},a.filename()+" in "+a.reponame()),m("small"," | "+a.repolocation()+" | "+
a.codelines()+" lines | "+a.languagename())])),m("ol.code-result",[_.map(a.matchingresults(),function(c){return m("li",{value:c.lineNumber},m("a",{href:"/file/"+a.documentid()+"/"+a.codepath()+"#"+c.lineNumber},m("pre",m.trust(c.line))))})]),m("hr",{"class":"spacer"})])})])}};m.mount(document.getElementsByClassName("container")[0],{controller:testing.controller,view:testing.view});
window.onpopstate=function(e){testing.vm.searchvalue(e.state.searchvalue);testing.vm.currentpage(e.state.currentpage);testing.vm.activelangfilters=e.state.langfilters;testing.vm.langfilters=e.state.langfilters;testing.vm.activerepositoryfilters=e.state.repofilters;testing.vm.repositoryfilters=e.state.repofilters;testing.vm.ownfilters=e.state.ownfilters;testing.vm.activeownfilters=e.state.ownfilters;testing.vm.search(e.state.currentpage,!0);popstate=!0};
void 0!==preload&&(testing.vm.searchvalue(preload.query),testing.vm.currentpage(preload.page),testing.vm.activelangfilters=preload.languageFacets,testing.vm.langfilters=preload.languageFacets,testing.vm.activerepositoryfilters=preload.repositoryFacets,testing.vm.repositoryfilters=preload.repositoryFacets,testing.vm.ownfilters=preload.ownerFacets,testing.vm.activeownfilters=preload.ownerFacets,testing.vm.search(preload.page,!0));
